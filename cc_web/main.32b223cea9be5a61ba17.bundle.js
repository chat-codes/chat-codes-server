webpackJsonp([1],{"++eH":function(e,t,n){t.Connection=n("4khK"),t.Doc=n("Alva"),t.Error=n("gimP"),t.Query=n("9ThP"),t.types=n("VrrN")},"+G9F":function(e,t,n){var r=n("G4i9");r.api=n("/Qg6"),e.exports={type:r}},"/Qg6":function(e,t){function n(e,t){return{get:function(){return e()},getLength:function(){return e().length},insert:function(e,n,r){return t([e,n],r)},remove:function(e,n,r){return t([e,{d:n}],r)},_onOp:function(e){for(var t=0,n=0,r=0;r<e.length;r++){var i=e[r];switch(typeof i){case"number":t+=i,n+=i;break;case"string":this.onInsert&&this.onInsert(t,i),t+=i.length;break;case"object":this.onRemove&&this.onRemove(t,i.d),n+=i.d}}}}}e.exports=n,n.provides={text:!0}},0:function(e,t,n){e.exports=n("cDNt")},1:function(e,t){},"4khK":function(e,t,n){(function(t){function r(e){a.EventEmitter.call(this),this.collections={},this.nextQueryId=1,this.queries={},this.seq=1,this.id=null,this.agent=null,this.debug=!1,this.bindToSocket(e)}function i(e){return e.hasPending()}function o(e){return e.hasWritePending()}var s=n("Alva"),l=n("9ThP"),a=n("S7Ow"),u=n("gimP"),c=n("VrrN"),p=n("P8Ly");e.exports=r,a.mixin(r),r.prototype.bindToSocket=function(e){this.socket&&(this.socket.close(),this.socket.onmessage=null,this.socket.onopen=null,this.socket.onerror=null,this.socket.onclose=null),this.socket=e,this.state=0===e.readyState||1===e.readyState?"connecting":"disconnected",this.canSend=!1;var n=this;e.onmessage=function(e){try{var r="string"==typeof e.data?JSON.parse(e.data):e.data}catch(t){return void console.warn("Failed to parse message",e)}n.debug&&console.log("RECV",JSON.stringify(r));var i={data:r};if(n.emit("receive",i),i.data)try{n.handleMessage(i.data)}catch(e){t.nextTick(function(){n.emit("error",e)})}},e.onopen=function(){n._setState("connecting")},e.onerror=function(e){n.emit("connection error",e)},e.onclose=function(e){"closed"===e||"Closed"===e?n._setState("closed",e):"stopped"===e||"Stopped by server"===e?n._setState("stopped",e):n._setState("disconnected",e)}},r.prototype.handleMessage=function(e){var t=null;switch(e.error&&(t=new Error(e.error.message),t.code=e.error.code,t.data=e,delete e.error),e.a){case"init":return 1!==e.protocol?(t=new u(4019,"Invalid protocol version"),this.emit("error",t)):c.map[e.type]!==c.defaultType?(t=new u(4020,"Invalid default type"),this.emit("error",t)):"string"!=typeof e.id?(t=new u(4021,"Invalid client id"),this.emit("error",t)):(this.id=e.id,void this._setState("connected"));case"qf":var n=this.queries[e.id];return void(n&&n._handleFetch(t,e.data,e.extra));case"qs":var n=this.queries[e.id];return void(n&&n._handleSubscribe(t,e.data,e.extra));case"qu":return;case"q":var n=this.queries[e.id];if(!n)return;return t?n._handleError(t):(e.diff&&n._handleDiff(e.diff),void(e.hasOwnProperty("extra")&&n._handleExtra(e.extra)));case"bf":return this._handleBulkMessage(e,"_handleFetch");case"bs":return this._handleBulkMessage(e,"_handleSubscribe");case"bu":return this._handleBulkMessage(e,"_handleUnsubscribe");case"f":var r=this.getExisting(e.c,e.d);return void(r&&r._handleFetch(t,e.data));case"s":var r=this.getExisting(e.c,e.d);return void(r&&r._handleSubscribe(t,e.data));case"u":var r=this.getExisting(e.c,e.d);return void(r&&r._handleUnsubscribe(t));case"op":var r=this.getExisting(e.c,e.d);return void(r&&r._handleOp(t,e));default:console.warn("Ignorning unrecognized message",e)}},r.prototype._handleBulkMessage=function(e,t){if(e.data)for(var n in e.data){var r=this.getExisting(e.c,n);r&&r[t](e.error,e.data[n])}else if(Array.isArray(e.b))for(var i=0;i<e.b.length;i++){var n=e.b[i],r=this.getExisting(e.c,n);r&&r[t](e.error)}else if(e.b)for(var n in e.b){var r=this.getExisting(e.c,n);r&&r[t](e.error)}else console.error("Invalid bulk message",e)},r.prototype._reset=function(){this.seq=1,this.id=null,this.agent=null},r.prototype._setState=function(e,t){if(this.state!==e){if("connecting"===e&&"disconnected"!==this.state&&"stopped"!==this.state&&"closed"!==this.state||"connected"===e&&"connecting"!==this.state){var n=new u(5007,"Cannot transition directly from "+this.state+" to "+e);return this.emit("error",n)}this.state=e,this.canSend="connected"===e,"disconnected"!==e&&"stopped"!==e&&"closed"!==e||this._reset(),this.startBulk();for(var r in this.queries){this.queries[r]._onConnectionStateChanged()}for(var i in this.collections){var o=this.collections[i];for(var r in o)o[r]._onConnectionStateChanged()}this.endBulk(),this.emit(e,t),this.emit("state",e,t)}},r.prototype.startBulk=function(){this.bulk||(this.bulk={})},r.prototype.endBulk=function(){if(this.bulk)for(var e in this.bulk){var t=this.bulk[e];this._sendBulk("f",e,t.f),this._sendBulk("s",e,t.s),this._sendBulk("u",e,t.u)}this.bulk=null},r.prototype._sendBulk=function(e,t,n){if(n){var r,i=[],o={},s=0;for(var l in n){var a=n[l];null==a?i.push(l):(o[l]=a,r=l,s++)}if(1===i.length){var l=i[0];this.send({a:e,c:t,d:l})}else i.length&&this.send({a:"b"+e,c:t,b:i});if(1===s){var u=o[r];this.send({a:e,c:t,d:r,v:u})}else s&&this.send({a:"b"+e,c:t,b:o})}},r.prototype._sendAction=function(e,t,n){if(this._addDoc(t),this.bulk){var r=this.bulk[t.collection]||(this.bulk[t.collection]={}),i=r[e]||(r[e]={}),o=i.hasOwnProperty(t.id);return i[t.id]=n,o}var s={a:e,c:t.collection,d:t.id,v:n};this.send(s)},r.prototype.sendFetch=function(e){return this._sendAction("f",e,e.version)},r.prototype.sendSubscribe=function(e){return this._sendAction("s",e,e.version)},r.prototype.sendUnsubscribe=function(e){return this._sendAction("u",e)},r.prototype.sendOp=function(e,t){this._addDoc(e);var n={a:"op",c:e.collection,d:e.id,v:e.version,src:t.src,seq:t.seq};t.op&&(n.op=t.op),t.create&&(n.create=t.create),t.del&&(n.del=t.del),this.send(n)},r.prototype.send=function(e){this.debug&&console.log("SEND",JSON.stringify(e)),this.emit("send",e),this.socket.send(JSON.stringify(e))},r.prototype.close=function(){this.socket.close()},r.prototype.getExisting=function(e,t){if(this.collections[e])return this.collections[e][t]},r.prototype.get=function(e,t){var n=this.collections[e]||(this.collections[e]={}),r=n[t];return r||(r=n[t]=new s(this,e,t),this.emit("doc",r)),r},r.prototype._destroyDoc=function(e){var t=this.collections[e.collection];t&&(delete t[e.id],p.hasKeys(t)||delete this.collections[e.collection])},r.prototype._addDoc=function(e){var t=this.collections[e.collection];t||(t=this.collections[e.collection]={}),t[e.id]!==e&&(t[e.id]=e)},r.prototype._createQuery=function(e,t,n,r,i){var o=this.nextQueryId++,s=new l(e,this,o,t,n,r,i);return this.queries[o]=s,s.send(),s},r.prototype._destroyQuery=function(e){delete this.queries[e.id]},r.prototype.createFetchQuery=function(e,t,n,r){return this._createQuery("qf",e,t,n,r)},r.prototype.createSubscribeQuery=function(e,t,n,r){return this._createQuery("qs",e,t,n,r)},r.prototype.hasPending=function(){return!(!this._firstDoc(i)&&!this._firstQuery(i))},r.prototype.hasWritePending=function(){return!!this._firstDoc(o)},r.prototype.whenNothingPending=function(e){var n=this._firstDoc(i);if(n)return void n.once("nothing pending",this._nothingPendingRetry(e));var r=this._firstQuery(i);if(r)return void r.once("ready",this._nothingPendingRetry(e));t.nextTick(e)},r.prototype._nothingPendingRetry=function(e){var n=this;return function(){t.nextTick(function(){n.whenNothingPending(e)})}},r.prototype._firstDoc=function(e){for(var t in this.collections){var n=this.collections[t];for(var r in n){var i=n[r];if(e(i))return i}}},r.prototype._firstQuery=function(e){for(var t in this.queries){var n=this.queries[t];if(e(n))return n}}}).call(t,n("1WNV"))},"8Sw2":function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./af":"FQor","./af.js":"FQor","./ar":"EcI0","./ar-dz":"cw72","./ar-dz.js":"cw72","./ar-kw":"fu+8","./ar-kw.js":"fu+8","./ar-ly":"7CVz","./ar-ly.js":"7CVz","./ar-ma":"1dFW","./ar-ma.js":"1dFW","./ar-sa":"UxV2","./ar-sa.js":"UxV2","./ar-tn":"nm31","./ar-tn.js":"nm31","./ar.js":"EcI0","./az":"EbpX","./az.js":"EbpX","./be":"SQlX","./be.js":"SQlX","./bg":"R3V+","./bg.js":"R3V+","./bn":"cAX3","./bn.js":"cAX3","./bo":"dHgA","./bo.js":"dHgA","./br":"W7ww","./br.js":"W7ww","./bs":"lZ6K","./bs.js":"lZ6K","./ca":"udbC","./ca.js":"udbC","./cs":"oSQb","./cs.js":"oSQb","./cv":"yPEm","./cv.js":"yPEm","./cy":"PpYB","./cy.js":"PpYB","./da":"oiZG","./da.js":"oiZG","./de":"LYe6","./de-at":"KOG5","./de-at.js":"KOG5","./de-ch":"o3JY","./de-ch.js":"o3JY","./de.js":"LYe6","./dv":"OkYT","./dv.js":"OkYT","./el":"QFnp","./el.js":"QFnp","./en-au":"dBGl","./en-au.js":"dBGl","./en-ca":"vv0C","./en-ca.js":"vv0C","./en-gb":"IoCy","./en-gb.js":"IoCy","./en-ie":"qVAg","./en-ie.js":"qVAg","./en-nz":"FbT0","./en-nz.js":"FbT0","./eo":"y/6j","./eo.js":"y/6j","./es":"ivpd","./es-do":"DBbP","./es-do.js":"DBbP","./es.js":"ivpd","./et":"FrUj","./et.js":"FrUj","./eu":"LAVD","./eu.js":"LAVD","./fa":"J2cK","./fa.js":"J2cK","./fi":"5FCP","./fi.js":"5FCP","./fo":"jIZb","./fo.js":"jIZb","./fr":"Lq8I","./fr-ca":"ICRA","./fr-ca.js":"ICRA","./fr-ch":"QWmo","./fr-ch.js":"QWmo","./fr.js":"Lq8I","./fy":"Fbnp","./fy.js":"Fbnp","./gd":"zhFu","./gd.js":"zhFu","./gl":"o10m","./gl.js":"o10m","./gom-latn":"UoXv","./gom-latn.js":"UoXv","./he":"gbvS","./he.js":"gbvS","./hi":"+UQz","./hi.js":"+UQz","./hr":"qGYH","./hr.js":"qGYH","./hu":"hGGh","./hu.js":"hGGh","./hy-am":"1AR5","./hy-am.js":"1AR5","./id":"Ie9h","./id.js":"Ie9h","./is":"piS+","./is.js":"piS+","./it":"5P9/","./it.js":"5P9/","./ja":"3cRe","./ja.js":"3cRe","./jv":"vwCJ","./jv.js":"vwCJ","./ka":"R7aq","./ka.js":"R7aq","./kk":"d8hV","./kk.js":"d8hV","./km":"nCdc","./km.js":"nCdc","./kn":"5K8n","./kn.js":"5K8n","./ko":"1jN3","./ko.js":"1jN3","./ky":"74/W","./ky.js":"74/W","./lb":"XAyT","./lb.js":"XAyT","./lo":"w/Mz","./lo.js":"w/Mz","./lt":"IetG","./lt.js":"IetG","./lv":"CRPd","./lv.js":"CRPd","./me":"1mee","./me.js":"1mee","./mi":"yRr3","./mi.js":"yRr3","./mk":"bfn1","./mk.js":"bfn1","./ml":"r1ky","./ml.js":"r1ky","./mr":"+K6p","./mr.js":"+K6p","./ms":"asMk","./ms-my":"IcWU","./ms-my.js":"IcWU","./ms.js":"asMk","./my":"Isng","./my.js":"Isng","./nb":"FjNp","./nb.js":"FjNp","./ne":"P9zQ","./ne.js":"P9zQ","./nl":"pejQ","./nl-be":"c3/i","./nl-be.js":"c3/i","./nl.js":"pejQ","./nn":"ALD8","./nn.js":"ALD8","./pa-in":"1YTd","./pa-in.js":"1YTd","./pl":"Gs99","./pl.js":"Gs99","./pt":"eunO","./pt-br":"uHKL","./pt-br.js":"uHKL","./pt.js":"eunO","./ro":"1FZw","./ro.js":"1FZw","./ru":"Cy48","./ru.js":"Cy48","./sd":"+28k","./sd.js":"+28k","./se":"EiHj","./se.js":"EiHj","./si":"77bI","./si.js":"77bI","./sk":"BgyH","./sk.js":"BgyH","./sl":"K7sG","./sl.js":"K7sG","./sq":"pwQJ","./sq.js":"pwQJ","./sr":"N0T2","./sr-cyrl":"9OoP","./sr-cyrl.js":"9OoP","./sr.js":"N0T2","./ss":"Mh9L","./ss.js":"Mh9L","./sv":"YZAt","./sv.js":"YZAt","./sw":"/7jV","./sw.js":"/7jV","./ta":"VKBt","./ta.js":"VKBt","./te":"TIcV","./te.js":"TIcV","./tet":"BlC1","./tet.js":"BlC1","./th":"Zi3L","./th.js":"Zi3L","./tl-ph":"D4Y9","./tl-ph.js":"D4Y9","./tlh":"muBP","./tlh.js":"muBP","./tr":"82s3","./tr.js":"82s3","./tzl":"vjXv","./tzl.js":"vjXv","./tzm":"Vhfe","./tzm-latn":"m0Pg","./tzm-latn.js":"m0Pg","./tzm.js":"Vhfe","./uk":"Y3Ex","./uk.js":"Y3Ex","./ur":"4DIg","./ur.js":"4DIg","./uz":"wDue","./uz-latn":"Li28","./uz-latn.js":"Li28","./uz.js":"wDue","./vi":"UbP6","./vi.js":"UbP6","./x-pseudo":"fQLM","./x-pseudo.js":"fQLM","./yo":"evMD","./yo.js":"evMD","./zh-cn":"DV5H","./zh-cn.js":"DV5H","./zh-hk":"iEKH","./zh-hk.js":"iEKH","./zh-tw":"X9uL","./zh-tw.js":"X9uL"};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id="8Sw2"},"9ThP":function(e,t,n){(function(t){function r(e,t,n,r,o,s,l){i.EventEmitter.call(this),this.action=e,this.connection=t,this.id=n,this.collection=r,this.query=o,this.results=null,s&&s.results&&(this.results=s.results,delete s.results),this.extra=void 0,this.options=s,this.callback=l,this.ready=!1,this.sent=!1}var i=n("S7Ow");e.exports=r,i.mixin(r),r.prototype.hasPending=function(){return!this.ready},r.prototype.send=function(){if(this.connection.canSend){var e={a:this.action,id:this.id,c:this.collection,q:this.query};if(this.options&&(e.o=this.options),this.results){for(var t=[],n=0;n<this.results.length;n++){var r=this.results[n];t.push([r.id,r.version])}e.r=t}this.connection.send(e),this.sent=!0}},r.prototype.destroy=function(e){this.connection.canSend&&"qs"===this.action&&this.connection.send({a:"qu",id:this.id}),this.connection._destroyQuery(this),e&&t.nextTick(e)},r.prototype._onConnectionStateChanged=function(){this.connection.canSend&&!this.sent?this.send():this.sent=!1},r.prototype._handleFetch=function(e,t,n){this.connection._destroyQuery(this),this._handleResponse(e,t,n)},r.prototype._handleSubscribe=function(e,t,n){this._handleResponse(e,t,n)},r.prototype._handleResponse=function(e,t,n){var r=this.callback;if(this.callback=null,e)return this._finishResponse(e,r);if(!t)return this._finishResponse(null,r);var i=this,o=1,s=function(e){if(e)return i._finishResponse(e,r);--o||i._finishResponse(null,r)};if(Array.isArray(t))o+=t.length,this.results=this._ingestSnapshots(t,s),this.extra=n;else for(var l in t){o++;var a=t[l],u=this.connection.get(a.c||this.collection,l);u.ingestSnapshot(a,s)}s()},r.prototype._ingestSnapshots=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r],o=this.connection.get(i.c||this.collection,i.d);o.ingestSnapshot(i,t),n.push(o)}return n},r.prototype._finishResponse=function(e,t){if(this.emit("ready"),this.ready=!0,e)return this.connection._destroyQuery(this),t?t(e):this.emit("error",e);t&&t(null,this.results,this.extra)},r.prototype._handleError=function(e){this.emit("error",e)},r.prototype._handleDiff=function(e){for(var t=0;t<e.length;t++){var n=e[t];"insert"===n.type&&(n.values=this._ingestSnapshots(n.values))}for(var t=0;t<e.length;t++){var n=e[t];switch(n.type){case"insert":var r=n.values;Array.prototype.splice.apply(this.results,[n.index,0].concat(r)),this.emit("insert",r,n.index);break;case"remove":var i=n.howMany||1,o=this.results.splice(n.index,i);this.emit("remove",o,n.index);break;case"move":var i=n.howMany||1,s=this.results.splice(n.from,i);Array.prototype.splice.apply(this.results,[n.to,0].concat(s)),this.emit("move",s,n.from,n.to)}}this.emit("changed",this.results)},r.prototype._handleExtra=function(e){this.extra=e,this.emit("extra",e)}}).call(t,n("1WNV"))},ATzb:function(e,t){function n(e,t,n,r){var i=function(e,n,r,i){t(r,e,n,"left"),t(i,n,e,"right")},o=e.transformX=function(e,t){n(e),n(t);for(var s=[],l=0;l<t.length;l++){for(var a=t[l],u=[],c=0;c<e.length;){var p=[];if(i(e[c],a,u,p),c++,1!==p.length){if(0===p.length){for(var h=c;h<e.length;h++)r(u,e[h]);a=null;break}for(var d=o(e.slice(c),p),f=0;f<d[0].length;f++)r(u,d[0][f]);for(var g=0;g<d[1].length;g++)r(s,d[1][g]);a=null;break}a=p[0]}null!=a&&r(s,a),e=u}return[e,s]};e.transform=function(e,n,r){if("left"!==r&&"right"!==r)throw new Error("type must be 'left' or 'right'");return 0===n.length?e:1===e.length&&1===n.length?t([],e[0],n[0],r):"left"===r?o(e,n)[0]:o(n,e)[1]}}e.exports=n},Alva:function(e,t,n){(function(t){function r(e,t,n){a.EventEmitter.call(this),this.connection=e,this.collection=t,this.id=n,this.version=null,this.type=null,this.data=void 0,this.inflightFetch=[],this.inflightSubscribe=[],this.inflightUnsubscribe=[],this.pendingFetch=[],this.subscribed=!1,this.wantSubscribe=!1,this.inflightOp=null,this.pendingOps=[],this.type=null,this.applyStack=null,this.preventCompose=!1}function i(e,t,n){if(t){var r=e.pop();e.push(function(e){r&&r(e),n&&n(e)})}else e.push(n)}function o(e){delete e.op,delete e.create,delete e.del}function s(e,t){if(e.del)return o(t);if(t.del)return new u(4017,"Document was deleted");if(t.create)return new u(4018,"Document alredy created");if(t.op){if(e.create)return new u(4018,"Document already created");if(e.type.transformX){var n=e.type.transformX(e.op,t.op);e.op=n[0],t.op=n[1]}else{var r=e.type.transform(e.op,t.op,"left"),i=e.type.transform(t.op,e.op,"right");e.op=r,t.op=i}}}function l(e,t){for(var n=!1,r=0;r<e.length;r++){var i=e[r];i&&(i(t),n=!0)}return n}var a=n("S7Ow"),u=n("gimP"),c=n("VrrN");e.exports=r,a.mixin(r),r.prototype.destroy=function(e){var t=this;t.whenNothingPending(function(){if(t.connection._destroyDoc(t),t.wantSubscribe)return t.unsubscribe(e);e&&e()})},r.prototype._setType=function(e){if("string"==typeof e&&(e=c.map[e]),e)this.type=e;else{if(null!==e){var t=new u(4008,"Missing type "+e);return this.emit("error",t)}this.type=e,this.data=void 0}},r.prototype.ingestSnapshot=function(e,t){if(!e)return t&&t();if("number"!=typeof e.v){var n=new u(5008,"Missing version in ingested snapshot. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}if(this.type||this.hasWritePending()){if(null==this.version){if(this.hasWritePending())return t&&this.once("no write pending",t);var n=new u(5009,"Cannot ingest snapshot in doc with null version. "+this.collection+"."+this.id);return t?t(n):this.emit("error",n)}return e.v>this.version?this.fetch(t):t&&t()}if(this.version>e.v)return t&&t();this.version=e.v;var r=void 0===e.type?c.defaultType:e.type;this._setType(r),this.data=this.type&&this.type.deserialize?this.type.deserialize(e.data):e.data,this.emit("load"),t&&t()},r.prototype.whenNothingPending=function(e){if(this.hasPending())return void this.once("nothing pending",e);e()},r.prototype.hasPending=function(){return!!(this.inflightOp||this.pendingOps.length||this.inflightFetch.length||this.inflightSubscribe.length||this.inflightUnsubscribe.length||this.pendingFetch.length)},r.prototype.hasWritePending=function(){return!(!this.inflightOp&&!this.pendingOps.length)},r.prototype._emitNothingPending=function(){this.hasWritePending()||(this.emit("no write pending"),this.hasPending()||this.emit("nothing pending"))},r.prototype._emitResponseError=function(e,t){if(t)return t(e),void this._emitNothingPending();this._emitNothingPending(),this.emit("error",e)},r.prototype._handleFetch=function(e,t){var n=this.inflightFetch.shift();if(e)return this._emitResponseError(e,n);this.ingestSnapshot(t,n),this._emitNothingPending()},r.prototype._handleSubscribe=function(e,t){var n=this.inflightSubscribe.shift();if(e)return this._emitResponseError(e,n);this.wantSubscribe&&(this.subscribed=!0),this.ingestSnapshot(t,n),this._emitNothingPending()},r.prototype._handleUnsubscribe=function(e){var t=this.inflightUnsubscribe.shift();if(e)return this._emitResponseError(e,t);t&&t(),this._emitNothingPending()},r.prototype._handleOp=function(e,t){if(e)return this.inflightOp?(4002===e.code&&(e=null),this._rollback(e)):this.emit("error",e);if(this.inflightOp&&t.src===this.inflightOp.src&&t.seq===this.inflightOp.seq)return void this._opAcknowledged(t);if(null==this.version||t.v>this.version)return void this.fetch();if(!(t.v<this.version)){if(this.inflightOp){var n=s(this.inflightOp,t);if(n)return this._hardRollback(n)}for(var r=0;r<this.pendingOps.length;r++){var n=s(this.pendingOps[r],t);if(n)return this._hardRollback(n)}this.version++,this._otApply(t,!1)}},r.prototype._onConnectionStateChanged=function(){if(this.connection.canSend)this.flush(),this._resubscribe();else if(this.inflightOp&&(this.pendingOps.unshift(this.inflightOp),this.inflightOp=null),this.subscribed=!1,(this.inflightFetch.length||this.inflightSubscribe.length)&&(this.pendingFetch=this.pendingFetch.concat(this.inflightFetch,this.inflightSubscribe),this.inflightFetch.length=0,this.inflightSubscribe.length=0),this.inflightUnsubscribe.length){var e=this.inflightUnsubscribe;this.inflightUnsubscribe=[],l(e)}},r.prototype._resubscribe=function(){var e=this.pendingFetch;if(this.pendingFetch=[],this.wantSubscribe)return e.length?void this.subscribe(function(t){l(e,t)}):void this.subscribe();e.length&&this.fetch(function(t){l(e,t)})},r.prototype.fetch=function(e){if(this.connection.canSend){var t=this.connection.sendFetch(this);return void i(this.inflightFetch,t,e)}this.pendingFetch.push(e)},r.prototype.subscribe=function(e){if(this.wantSubscribe=!0,this.connection.canSend){var t=this.connection.sendSubscribe(this);return void i(this.inflightSubscribe,t,e)}this.pendingFetch.push(e)},r.prototype.unsubscribe=function(e){if(this.wantSubscribe=!1,this.subscribed=!1,this.connection.canSend){var n=this.connection.sendUnsubscribe(this);return void i(this.inflightUnsubscribe,n,e)}e&&t.nextTick(e)},r.prototype.flush=function(){this.connection.canSend&&!this.inflightOp&&!this.paused&&this.pendingOps.length&&this._sendOp()},r.prototype._otApply=function(e,t){if(e.op){if(!this.type){var n=new u(4015,"Cannot apply op to uncreated document. "+this.collection+"."+this.id);return this.emit("error",n)}if(!t&&this.type===c.defaultType&&e.op.length>1){this.applyStack||(this.applyStack=[]);for(var r=this.applyStack.length,i=0;i<e.op.length;i++){for(var o=e.op[i],l={op:[o]},a=r;a<this.applyStack.length;a++){var p=s(this.applyStack[a],l);if(p)return this._hardRollback(p)}this.emit("before op",l.op,t),this.data=this.type.apply(this.data,l.op),this.emit("op",l.op,t)}return void this._popApplyStack(r)}return this.emit("before op",e.op,t),this.data=this.type.apply(this.data,e.op),void this.emit("op",e.op,t)}if(e.create)return this._setType(e.create.type),this.data=this.type.deserialize?this.type.createDeserialized?this.type.createDeserialized(e.create.data):this.type.deserialize(this.type.create(e.create.data)):this.type.create(e.create.data),void this.emit("create",t);if(e.del){var h=this.data;return this._setType(null),void this.emit("del",h,t)}},r.prototype._sendOp=function(){var e=this.connection.id;if(e){this.inflightOp||(this.inflightOp=this.pendingOps.shift());var t=this.inflightOp;if(!t){var n=new u(5010,"No op to send on call to _sendOp");return this.emit("error",n)}t.sentAt=Date.now(),t.retries=null==t.retries?0:t.retries+1,null==t.seq&&(t.seq=this.connection.seq++),this.connection.sendOp(this,t),null==t.src&&(t.src=e)}},r.prototype._submit=function(e,n,r){if(n||(n=!0),e.op){if(!this.type){var i=new u(4015,"Cannot submit op. Document has not been created. "+this.collection+"."+this.id);return r?r(i):this.emit("error",i)}this.type.normalize&&(e.op=this.type.normalize(e.op))}this._pushOp(e,r),this._otApply(e,n);var o=this;t.nextTick(function(){o.flush()})},r.prototype._pushOp=function(e,t){if(this.applyStack)this.applyStack.push(e);else{var n=this._tryCompose(e);if(n)return void n.callbacks.push(t)}e.type=this.type,e.callbacks=[t],this.pendingOps.push(e)},r.prototype._popApplyStack=function(e){if(e>0)return void(this.applyStack.length=e);var t=this.applyStack[0];if(this.applyStack=null,t){var n=this.pendingOps.indexOf(t);if(-1!==n)for(var r=this.pendingOps.splice(n),n=0;n<r.length;n++){var t=r[n],i=this._tryCompose(t);i?i.callbacks=i.callbacks.concat(t.callbacks):this.pendingOps.push(t)}}},r.prototype._tryCompose=function(e){if(!this.preventCompose){var t=this.pendingOps[this.pendingOps.length-1];if(t)return t.create&&e.op?(t.create.data=this.type.apply(t.create.data,e.op),t):t.op&&e.op&&this.type.compose?(t.op=this.type.compose(t.op,e.op),t):void 0}},r.prototype.submitOp=function(e,t,n){"function"==typeof t&&(n=t,t=null);var r={op:e},i=t&&t.source;this._submit(r,i,n)},r.prototype.create=function(e,t,n,r){if("function"==typeof t?(r=t,n=null,t=null):"function"==typeof n&&(r=n,n=null),t||(t=c.defaultType.uri),this.type){var i=new u(4016,"Document already exists");return r?r(i):this.emit("error",i)}var o={create:{type:t,data:e}},s=n&&n.source;this._submit(o,s,r)},r.prototype.del=function(e,t){if("function"==typeof e&&(t=e,e=null),!this.type){var n=new u(4015,"Document does not exist");return t?t(n):this.emit("error",n)}var r={del:!0},i=e&&e.source;this._submit(r,i,t)},r.prototype.pause=function(){this.paused=!0},r.prototype.resume=function(){this.paused=!1,this.flush()},r.prototype._opAcknowledged=function(e){if(this.inflightOp.create)this.version=e.v;else if(e.v!==this.version)return console.warn("Invalid version from server. Expected: "+this.version+" Received: "+e.v,e),this.fetch();this.version++,this._clearInflightOp()},r.prototype._rollback=function(e){var t=this.inflightOp;if(t.op&&t.type.invert){t.op=t.type.invert(t.op);for(var n=0;n<this.pendingOps.length;n++){var r=s(this.pendingOps[n],t);if(r)return this._hardRollback(r)}return this._otApply(t,!1),void this._clearInflightOp(e)}this._hardRollback(e)},r.prototype._hardRollback=function(e){var t=this.inflightOp,n=this.pendingOps;this._setType(null),this.version=null,this.inflightOp=null,this.pendingOps=[];var r=this;this.fetch(function(){for(var i=t&&l(t.callbacks,e),o=0;o<n.length;o++)l(n[o].callbacks,e);if(e&&!i)return r.emit("error",e)})},r.prototype._clearInflightOp=function(e){var t=l(this.inflightOp.callbacks,e);if(this.inflightOp=null,this.flush(),this._emitNothingPending(),e&&!t)return this.emit("error",e)}}).call(t,n("1WNV"))},G4i9:function(e,t){t.name="text",t.uri="http://sharejs.org/types/textv1",t.create=function(e){if(null!=e&&"string"!=typeof e)throw Error("Initial data must be a string");return e||""};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=function(e){if(!n(e))throw Error("Op must be an array of components");for(var t=null,r=0;r<e.length;r++){var i=e[r];switch(typeof i){case"object":if(!("number"==typeof i.d&&i.d>0))throw Error("Object components must be deletes of size > 0");break;case"string":if(!(i.length>0))throw Error("Inserts cannot be empty");break;case"number":if(!(i>0))throw Error("Skip components must be >0");if("number"==typeof t)throw Error("Adjacent skip components should be combined")}t=i}if("number"==typeof t)throw Error("Op has a trailing skip")},i=function(e){return function(t){if(t&&0!==t.d)return 0===e.length?e.push(t):typeof t==typeof e[e.length-1]?"object"==typeof t?e[e.length-1].d+=t.d:e[e.length-1]+=t:e.push(t)}},o=function(e){var t=0,n=0;return[function(r,i){if(t===e.length)return-1===r?null:r;var o,s=e[t];return"number"==typeof s?-1===r||s-n<=r?(o=s-n,++t,n=0,o):(n+=r,r):"string"==typeof s?-1===r||"i"===i||s.length-n<=r?(o=s.slice(n),++t,n=0,o):(o=s.slice(n,n+r),n+=r,o):-1===r||"d"===i||s.d-n<=r?(o={d:s.d-n},++t,n=0,o):(n+=r,{d:r})},function(){return e[t]}]},s=function(e){return"number"==typeof e?e:e.length||e.d},l=function(e){return e.length>0&&"number"==typeof e[e.length-1]&&e.pop(),e};t.normalize=function(e){for(var t=[],n=i(t),r=0;r<e.length;r++)n(e[r]);return l(t)},t.apply=function(e,t){if("string"!=typeof e)throw Error("Snapshot should be a string");r(t);for(var n=[],i=0;i<t.length;i++){var o=t[i];switch(typeof o){case"number":if(o>e.length)throw Error("The op is too long for this document");n.push(e.slice(0,o)),e=e.slice(o);break;case"string":n.push(o);break;case"object":e=e.slice(o.d)}}return n.join("")+e},t.transform=function(e,t,n){if("left"!=n&&"right"!=n)throw Error("side ("+n+") must be 'left' or 'right'");r(e),r(t);for(var a=[],u=i(a),c=o(e),p=c[0],h=c[1],d=0;d<t.length;d++){var f,g,m=t[d];switch(typeof m){case"number":for(f=m;f>0;)g=p(f,"i"),u(g),"string"!=typeof g&&(f-=s(g));break;case"string":"left"===n&&"string"==typeof h()&&u(p(-1)),u(m.length);break;case"object":for(f=m.d;f>0;)switch(typeof(g=p(f,"i"))){case"number":f-=g;break;case"string":u(g);break;case"object":f-=g.d}}}for(;m=p(-1);)u(m);return l(a)},t.compose=function(e,t){r(e),r(t);for(var n=[],a=i(n),u=o(e)[0],c=0;c<t.length;c++){var p,h,d=t[c];switch(typeof d){case"number":for(p=d;p>0;)h=u(p,"d"),a(h),"object"!=typeof h&&(p-=s(h));break;case"string":a(d);break;case"object":for(p=d.d;p>0;)switch(typeof(h=u(p,"d"))){case"number":a({d:h}),p-=h;break;case"string":p-=h.length;break;case"object":a(h)}}}for(;d=u(-1);)a(d);return l(n)};var a=function(e,t){for(var n=0,r=0;r<t.length;r++){var i=t[r];if(e<=n)break;switch(typeof i){case"number":if(e<=n+i)return e;n+=i;break;case"string":n+=i.length,e+=i.length;break;case"object":e-=Math.min(i.d,e-n)}}return e};t.transformSelection=function(e,t,n){var r=0;if(n){for(var i=0;i<t.length;i++){var o=t[i];switch(typeof o){case"number":r+=o;break;case"string":r+=o.length}}return r}return"number"==typeof e?a(e,t):[a(e[0],t),a(e[1],t)]},t.selectionEq=function(e,t){return null!=e[0]&&e[0]===e[1]&&(e=e[0]),null!=t[0]&&t[0]===t[1]&&(t=t[0]),e===t||null!=e[0]&&null!=t[0]&&e[0]===t[0]&&e[1]==t[1]}},HfCu:function(e,t,n){var r;(function(){function i(e){"use strict";var t={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Add a prefix to the generated header ids. Passing a string will prefix that string to the header id. Setting to true will add a generic 'section-' prefix",type:"string"},rawPrefixHeaderId:{defaultValue:!1,describe:'Setting this option to true will prevent showdown from modifying the prefix. This might result in malformed IDs (if, for instance, the " char is used in the prefix)',type:"boolean"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},rawHeaderId:{defaultValue:!1,describe:"Remove only spaces, ' and \" from generated header ids (including prefixes), replacing them with dashes (-). WARNING: This might result in malformed ids",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},literalMidWordAsterisks:{defaultValue:!1,describe:"Parse midword asterisks as literal asterisks",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,description:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,description:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,description:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,description:"Enables github @mentions",type:"boolean"},ghMentionsLink:{defaultValue:"https://github.com/{u}",description:"Changes the link generated by @mentions. Only applies if ghMentions option is enabled.",type:"string"},encodeEmails:{defaultValue:!0,description:"Encode e-mail addresses through the use of Character Entities, transforming ASCII e-mail addresses into its equivalent decimal entities",type:"boolean"},openLinksInNewWindow:{defaultValue:!1,description:"Open all links in new windows",type:"boolean"},backslashEscapesHTMLTags:{defaultValue:!1,description:"Support for HTML Tag escaping. ex: <div>foo</div>",type:"boolean"}};if(!1===e)return JSON.parse(JSON.stringify(t));var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r].defaultValue);return n}function o(e,t){"use strict";var n=t?"Error in "+t+" extension->":"Error in unnamed extension",r={valid:!0,error:""};l.helper.isArray(e)||(e=[e]);for(var i=0;i<e.length;++i){var o=n+" sub-extension "+i+": ",s=e[i];if("object"!=typeof s)return r.valid=!1,r.error=o+"must be an object, but "+typeof s+" given",r;if(!l.helper.isString(s.type))return r.valid=!1,r.error=o+'property "type" must be a string, but '+typeof s.type+" given",r;var a=s.type=s.type.toLowerCase();if("language"===a&&(a=s.type="lang"),"html"===a&&(a=s.type="output"),"lang"!==a&&"output"!==a&&"listener"!==a)return r.valid=!1,r.error=o+"type "+a+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',r;if("listener"===a){if(l.helper.isUndefined(s.listeners))return r.valid=!1,r.error=o+'. Extensions of type "listener" must have a property called "listeners"',r}else if(l.helper.isUndefined(s.filter)&&l.helper.isUndefined(s.regex))return r.valid=!1,r.error=o+a+' extensions must define either a "regex" property or a "filter" method',r;if(s.listeners){if("object"!=typeof s.listeners)return r.valid=!1,r.error=o+'"listeners" property must be an object but '+typeof s.listeners+" given",r;for(var u in s.listeners)if(s.listeners.hasOwnProperty(u)&&"function"!=typeof s.listeners[u])return r.valid=!1,r.error=o+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+u+" must be a function but "+typeof s.listeners[u]+" given",r}if(s.filter){if("function"!=typeof s.filter)return r.valid=!1,r.error=o+'"filter" must be a function, but '+typeof s.filter+" given",r}else if(s.regex){if(l.helper.isString(s.regex)&&(s.regex=new RegExp(s.regex,"g")),!(s.regex instanceof RegExp))return r.valid=!1,r.error=o+'"regex" property must either be a string or a RegExp object, but '+typeof s.regex+" given",r;if(l.helper.isUndefined(s.replace))return r.valid=!1,r.error=o+'"regex" extensions must implement a replace string or function',r}}return r}function s(e,t){"use strict";return"\xa8E"+t.charCodeAt(0)+"E"}var l={},a={},u={},c=i(!0),p="vanilla",h={github:{omitExtraWLInCodeBlocks:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0,backslashEscapesHTMLTags:!0},original:{noHeaderId:!0,ghCodeBlocks:!1},ghost:{omitExtraWLInCodeBlocks:!0,parseImgDimensions:!0,simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,smoothLivePreview:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghMentions:!1,encodeEmails:!0},vanilla:i(!0),allOn:function(){"use strict";var e=i(!0),t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=!0);return t}()};l.helper={},l.extensions={},l.setOption=function(e,t){"use strict";return c[e]=t,this},l.getOption=function(e){"use strict";return c[e]},l.getOptions=function(){"use strict";return c},l.resetOptions=function(){"use strict";c=i(!0)},l.setFlavor=function(e){"use strict";if(!h.hasOwnProperty(e))throw Error(e+" flavor was not found");l.resetOptions();var t=h[e];p=e;for(var n in t)t.hasOwnProperty(n)&&(c[n]=t[n])},l.getFlavor=function(){"use strict";return p},l.getFlavorOptions=function(e){"use strict";if(h.hasOwnProperty(e))return h[e]},l.getDefaultOptions=function(e){"use strict";return i(e)},l.subParser=function(e,t){"use strict";if(l.helper.isString(e)){if(void 0===t){if(a.hasOwnProperty(e))return a[e];throw Error("SubParser named "+e+" not registered!")}a[e]=t}},l.extension=function(e,t){"use strict";if(!l.helper.isString(e))throw Error("Extension 'name' must be a string");if(e=l.helper.stdExtName(e),l.helper.isUndefined(t)){if(!u.hasOwnProperty(e))throw Error("Extension named "+e+" is not registered!");return u[e]}"function"==typeof t&&(t=t()),l.helper.isArray(t)||(t=[t]);var n=o(t,e);if(!n.valid)throw Error(n.error);u[e]=t},l.getAllExtensions=function(){"use strict";return u},l.removeExtension=function(e){"use strict";delete u[e]},l.resetExtensions=function(){"use strict";u={}},l.validateExtension=function(e){"use strict";var t=o(e,null);return!!t.valid||(console.warn(t.error),!1)},l.hasOwnProperty("helper")||(l.helper={}),l.helper.isString=function(e){"use strict";return"string"==typeof e||e instanceof String},l.helper.isFunction=function(e){"use strict";var t={};return e&&"[object Function]"===t.toString.call(e)},l.helper.isArray=function(e){"use strict";return Array.isArray(e)},l.helper.isUndefined=function(e){"use strict";return void 0===e},l.helper.forEach=function(e,t){"use strict";if(l.helper.isUndefined(e))throw new Error("obj param is required");if(l.helper.isUndefined(t))throw new Error("callback param is required");if(!l.helper.isFunction(t))throw new Error("callback param must be a function/closure");if("function"==typeof e.forEach)e.forEach(t);else if(l.helper.isArray(e))for(var n=0;n<e.length;n++)t(e[n],n,e);else{if("object"!=typeof e)throw new Error("obj does not seem to be an array or an iterable object");for(var r in e)e.hasOwnProperty(r)&&t(e[r],r,e)}},l.helper.stdExtName=function(e){"use strict";return e.replace(/[_?*+\/\\.^-]/g,"").replace(/\s/g,"").toLowerCase()},l.helper.escapeCharactersCallback=s,l.helper.escapeCharacters=function(e,t,n){"use strict";var r="(["+t.replace(/([\[\]\\])/g,"\\$1")+"])";n&&(r="\\\\"+r);var i=new RegExp(r,"g");return e=e.replace(i,s)};var d=function(e,t,n,r){"use strict";var i,o,s,l,a,u=r||"",c=u.indexOf("g")>-1,p=new RegExp(t+"|"+n,"g"+u.replace(/g/g,"")),h=new RegExp(t,u.replace(/g/g,"")),d=[];do{for(i=0;s=p.exec(e);)if(h.test(s[0]))i++||(o=p.lastIndex,l=o-s[0].length);else if(i&&!--i){a=s.index+s[0].length;var f={left:{start:l,end:o},match:{start:o,end:s.index},right:{start:s.index,end:a},wholeMatch:{start:l,end:a}};if(d.push(f),!c)return d}}while(i&&(p.lastIndex=o));return d};l.helper.matchRecursiveRegExp=function(e,t,n,r){"use strict";for(var i=d(e,t,n,r),o=[],s=0;s<i.length;++s)o.push([e.slice(i[s].wholeMatch.start,i[s].wholeMatch.end),e.slice(i[s].match.start,i[s].match.end),e.slice(i[s].left.start,i[s].left.end),e.slice(i[s].right.start,i[s].right.end)]);return o},l.helper.replaceRecursiveRegExp=function(e,t,n,r,i){"use strict";if(!l.helper.isFunction(t)){var o=t;t=function(){return o}}var s=d(e,n,r,i),a=e,u=s.length;if(u>0){var c=[];0!==s[0].wholeMatch.start&&c.push(e.slice(0,s[0].wholeMatch.start));for(var p=0;p<u;++p)c.push(t(e.slice(s[p].wholeMatch.start,s[p].wholeMatch.end),e.slice(s[p].match.start,s[p].match.end),e.slice(s[p].left.start,s[p].left.end),e.slice(s[p].right.start,s[p].right.end))),p<u-1&&c.push(e.slice(s[p].wholeMatch.end,s[p+1].wholeMatch.start));s[u-1].wholeMatch.end<e.length&&c.push(e.slice(s[u-1].wholeMatch.end)),a=c.join("")}return a},l.helper.regexIndexOf=function(e,t,n){"use strict";if(!l.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";if(t instanceof RegExp==!1)throw"InvalidArgumentError: second parameter of showdown.helper.regexIndexOf function must be an instance of RegExp";var r=e.substring(n||0).search(t);return r>=0?r+(n||0):r},l.helper.splitAtIndex=function(e,t){"use strict";if(!l.helper.isString(e))throw"InvalidArgumentError: first parameter of showdown.helper.regexIndexOf function must be a string";return[e.substring(0,t),e.substring(t)]},l.helper.encodeEmailAddress=function(e){"use strict";var t=[function(e){return"&#"+e.charCodeAt(0)+";"},function(e){return"&#x"+e.charCodeAt(0).toString(16)+";"},function(e){return e}];return e=e.replace(/./g,function(e){if("@"===e)e=t[Math.floor(2*Math.random())](e);else{var n=Math.random();e=n>.9?t[2](e):n>.45?t[1](e):t[0](e)}return e})},"undefined"==typeof console&&(console={warn:function(e){"use strict";alert(e)},log:function(e){"use strict";alert(e)},error:function(e){"use strict";throw e}}),l.helper.regexes={asteriskAndDash:/([*_])/g},l.Converter=function(e){"use strict";function t(e,t){if(t=t||null,l.helper.isString(e)){if(e=l.helper.stdExtName(e),t=e,l.extensions[e])return console.warn("DEPRECATION WARNING: "+e+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void n(l.extensions[e],e);if(l.helper.isUndefined(u[e]))throw Error('Extension "'+e+'" could not be loaded. It was either not found or is not a valid extension.');e=u[e]}"function"==typeof e&&(e=e()),l.helper.isArray(e)||(e=[e]);var i=o(e,t);if(!i.valid)throw Error(i.error);for(var s=0;s<e.length;++s){switch(e[s].type){case"lang":a.push(e[s]);break;case"output":d.push(e[s])}if(e[s].hasOwnProperty("listeners"))for(var c in e[s].listeners)e[s].listeners.hasOwnProperty(c)&&r(c,e[s].listeners[c])}}function n(e,t){"function"==typeof e&&(e=e(new l.Converter)),l.helper.isArray(e)||(e=[e]);var n=o(e,t);if(!n.valid)throw Error(n.error);for(var r=0;r<e.length;++r)switch(e[r].type){case"lang":a.push(e[r]);break;case"output":d.push(e[r]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function r(e,t){if(!l.helper.isString(e))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof e+" given");if("function"!=typeof t)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof t+" given");f.hasOwnProperty(e)||(f[e]=[]),f[e].push(t)}function i(e){var t=e.match(/^\s*/)[0].length,n=new RegExp("^\\s{0,"+t+"}","gm");return e.replace(n,"")}var s={},a=[],d=[],f={},g=p;!function(){e=e||{};for(var n in c)c.hasOwnProperty(n)&&(s[n]=c[n]);if("object"!=typeof e)throw Error("Converter expects the passed parameter to be an object, but "+typeof e+" was passed instead.");for(var r in e)e.hasOwnProperty(r)&&(s[r]=e[r]);s.extensions&&l.helper.forEach(s.extensions,t)}(),this._dispatch=function(e,t,n,r){if(f.hasOwnProperty(e))for(var i=0;i<f[e].length;++i){var o=f[e][i](e,t,this,n,r);o&&void 0!==o&&(t=o)}return t},this.listen=function(e,t){return r(e,t),this},this.makeHtml=function(e){if(!e)return e;var t={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:a,outputModifiers:d,converter:this,ghCodeBlocks:[]};return e=e.replace(/\xa8/g,"\xa8T"),e=e.replace(/\$/g,"\xa8D"),e=e.replace(/\r\n/g,"\n"),e=e.replace(/\r/g,"\n"),e=e.replace(/\u00A0/g," "),s.smartIndentationFix&&(e=i(e)),e="\n\n"+e+"\n\n",e=l.subParser("detab")(e,s,t),e=e.replace(/^[ \t]+$/gm,""),l.helper.forEach(a,function(n){e=l.subParser("runExtension")(n,e,s,t)}),e=l.subParser("hashPreCodeTags")(e,s,t),e=l.subParser("githubCodeBlocks")(e,s,t),e=l.subParser("hashHTMLBlocks")(e,s,t),e=l.subParser("hashCodeTags")(e,s,t),e=l.subParser("stripLinkDefinitions")(e,s,t),e=l.subParser("blockGamut")(e,s,t),e=l.subParser("unhashHTMLSpans")(e,s,t),e=l.subParser("unescapeSpecialChars")(e,s,t),e=e.replace(/\xa8D/g,"$$"),e=e.replace(/\xa8T/g,"\xa8"),l.helper.forEach(d,function(n){e=l.subParser("runExtension")(n,e,s,t)}),e},this.setOption=function(e,t){s[e]=t},this.getOption=function(e){return s[e]},this.getOptions=function(){return s},this.addExtension=function(e,n){n=n||null,t(e,n)},this.useExtension=function(e){t(e)},this.setFlavor=function(e){if(!h.hasOwnProperty(e))throw Error(e+" flavor was not found");var t=h[e];g=e;for(var n in t)t.hasOwnProperty(n)&&(s[n]=t[n])},this.getFlavor=function(){return g},this.removeExtension=function(e){l.helper.isArray(e)||(e=[e]);for(var t=0;t<e.length;++t){for(var n=e[t],r=0;r<a.length;++r)a[r]===n&&a[r].splice(r,1);for(;0<d.length;++r)d[0]===n&&d[0].splice(r,1)}},this.getAllExtensions=function(){return{language:a,output:d}}},l.subParser("anchors",function(e,t,n){"use strict";e=n.converter._dispatch("anchors.before",e,t,n);var r=function(e,r,i,o,s,a,u){if(l.helper.isUndefined(u)&&(u=""),i=i.toLowerCase(),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)o="";else if(!o){if(i||(i=r.toLowerCase().replace(/ ?\n/g," ")),o="#"+i,l.helper.isUndefined(n.gUrls[i]))return e;o=n.gUrls[i],l.helper.isUndefined(n.gTitles[i])||(u=n.gTitles[i])}o=o.replace(l.helper.regexes.asteriskAndDash,l.helper.escapeCharactersCallback);var c='<a href="'+o+'"';return""!==u&&null!==u&&(u=u.replace(/"/g,"&quot;"),u=u.replace(l.helper.regexes.asteriskAndDash,l.helper.escapeCharactersCallback),c+=' title="'+u+'"'),t.openLinksInNewWindow&&(c+=' target="\xa8E95Eblank"'),c+=">"+r+"</a>"};return e=e.replace(/\[((?:\[[^\]]*]|[^\[\]])*)] ?(?:\n *)?\[(.*?)]()()()()/g,r),e=e.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<([^>]*)>(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,r),e=e.replace(/\[((?:\[[^\]]*]|[^\[\]])*)]()[ \t]*\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?:[ \t]*((["'])([^"]*?)\5))?[ \t]?\)/g,r),e=e.replace(/\[([^\[\]]+)]()()()()()/g,r),t.ghMentions&&(e=e.replace(/(^|\s)(\\)?(@([a-z\d\-]+))(?=[.!?;,[\]()]|\s|$)/gim,function(e,n,r,i,o){if("\\"===r)return n+i;if(!l.helper.isString(t.ghMentionsLink))throw new Error("ghMentionsLink option must be a string");var s=t.ghMentionsLink.replace(/\{u}/g,o),a="";return t.openLinksInNewWindow&&(a=' target="\xa8E95Eblank"'),n+'<a href="'+s+'"'+a+">"+i+"</a>"})),e=n.converter._dispatch("anchors.after",e,t,n)});var f=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)()(?=\s|$)(?!["<>])/gi,g=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?,()\[\]]?)(?=\s|$)(?!["<>])/gi,m=/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)()>/gi,v=/(^|\s)(?:mailto:)?([A-Za-z0-9!#$%&'*+-\/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?=$|\s)/gim,y=/<()(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi,b=function(e){"use strict";return function(t,n,r,i,o){var s=n,l="",a="";return/^www\./i.test(n)&&(n=n.replace(/^www\./i,"http://www.")),e.excludeTrailingPunctuationFromURLs&&o&&(l=o),e.openLinksInNewWindow&&(a=' target="\xa8E95Eblank"'),'<a href="'+n+'"'+a+">"+s+"</a>"+l}},w=function(e,t){"use strict";return function(n,r,i){var o="mailto:";return r=r||"",i=l.subParser("unescapeSpecialChars")(i,e,t),e.encodeEmails?(o=l.helper.encodeEmailAddress(o+i),i=l.helper.encodeEmailAddress(i)):o+=i,r+'<a href="'+o+'">'+i+"</a>"}};l.subParser("autoLinks",function(e,t,n){"use strict";return e=n.converter._dispatch("autoLinks.before",e,t,n),e=e.replace(m,b(t)),e=e.replace(y,w(t,n)),e=n.converter._dispatch("autoLinks.after",e,t,n)}),l.subParser("simplifiedAutoLinks",function(e,t,n){"use strict";return t.simplifiedAutoLink?(e=n.converter._dispatch("simplifiedAutoLinks.before",e,t,n),e=t.excludeTrailingPunctuationFromURLs?e.replace(g,b(t)):e.replace(f,b(t)),e=e.replace(v,w(t,n)),e=n.converter._dispatch("simplifiedAutoLinks.after",e,t,n)):e}),l.subParser("blockGamut",function(e,t,n){"use strict";return e=n.converter._dispatch("blockGamut.before",e,t,n),e=l.subParser("blockQuotes")(e,t,n),e=l.subParser("headers")(e,t,n),e=l.subParser("horizontalRule")(e,t,n),e=l.subParser("lists")(e,t,n),e=l.subParser("codeBlocks")(e,t,n),e=l.subParser("tables")(e,t,n),e=l.subParser("hashHTMLBlocks")(e,t,n),e=l.subParser("paragraphs")(e,t,n),e=n.converter._dispatch("blockGamut.after",e,t,n)}),l.subParser("blockQuotes",function(e,t,n){"use strict";return e=n.converter._dispatch("blockQuotes.before",e,t,n),e=e.replace(/((^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(e,r){var i=r;return i=i.replace(/^[ \t]*>[ \t]?/gm,"\xa80"),i=i.replace(/\xa80/g,""),i=i.replace(/^[ \t]+$/gm,""),i=l.subParser("githubCodeBlocks")(i,t,n),i=l.subParser("blockGamut")(i,t,n),i=i.replace(/(^|\n)/g,"$1  "),i=i.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(e,t){var n=t;return n=n.replace(/^  /gm,"\xa80"),n=n.replace(/\xa80/g,"")}),l.subParser("hashBlock")("<blockquote>\n"+i+"\n</blockquote>",t,n)}),e=n.converter._dispatch("blockQuotes.after",e,t,n)}),l.subParser("codeBlocks",function(e,t,n){"use strict";e=n.converter._dispatch("codeBlocks.before",e,t,n),e+="\xa80";var r=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=\xa80))/g;return e=e.replace(r,function(e,r,i){var o=r,s=i,a="\n";return o=l.subParser("outdent")(o,t,n),o=l.subParser("encodeCode")(o,t,n),o=l.subParser("detab")(o,t,n),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,""),t.omitExtraWLInCodeBlocks&&(a=""),o="<pre><code>"+o+a+"</code></pre>",l.subParser("hashBlock")(o,t,n)+s}),e=e.replace(/\xa80/,""),e=n.converter._dispatch("codeBlocks.after",e,t,n)}),l.subParser("codeSpans",function(e,t,n){"use strict";return e=n.converter._dispatch("codeSpans.before",e,t,n),void 0===e&&(e=""),e=e.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(e,r,i,o){var s=o;return s=s.replace(/^([ \t]*)/g,""),s=s.replace(/[ \t]*$/g,""),s=l.subParser("encodeCode")(s,t,n),r+"<code>"+s+"</code>"}),e=n.converter._dispatch("codeSpans.after",e,t,n)}),l.subParser("detab",function(e,t,n){"use strict";return e=n.converter._dispatch("detab.before",e,t,n),e=e.replace(/\t(?=\t)/g,"    "),e=e.replace(/\t/g,"\xa8A\xa8B"),e=e.replace(/\xa8B(.+?)\xa8A/g,function(e,t){for(var n=t,r=4-n.length%4,i=0;i<r;i++)n+=" ";return n}),e=e.replace(/\xa8A/g,"    "),e=e.replace(/\xa8B/g,""),e=n.converter._dispatch("detab.after",e,t,n)}),l.subParser("encodeAmpsAndAngles",function(e,t,n){"use strict";return e=n.converter._dispatch("encodeAmpsAndAngles.before",e,t,n),e=e.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),e=e.replace(/<(?![a-z\/?$!])/gi,"&lt;"),e=e.replace(/</g,"&lt;"),e=e.replace(/>/g,"&gt;"),e=n.converter._dispatch("encodeAmpsAndAngles.after",e,t,n)}),l.subParser("encodeBackslashEscapes",function(e,t,n){"use strict";return e=n.converter._dispatch("encodeBackslashEscapes.before",e,t,n),e=e.replace(/\\(\\)/g,l.helper.escapeCharactersCallback),e=e.replace(/\\([`*_{}\[\]()>#+.!~=|-])/g,l.helper.escapeCharactersCallback),e=n.converter._dispatch("encodeBackslashEscapes.after",e,t,n)}),l.subParser("encodeCode",function(e,t,n){"use strict";return e=n.converter._dispatch("encodeCode.before",e,t,n),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/([*_{}\[\]\\=~-])/g,l.helper.escapeCharactersCallback),e=n.converter._dispatch("encodeCode.after",e,t,n)}),l.subParser("escapeSpecialCharsWithinTagAttributes",function(e,t,n){"use strict";e=n.converter._dispatch("escapeSpecialCharsWithinTagAttributes.before",e,t,n);var r=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return e=e.replace(r,function(e){return e.replace(/(.)<\/?code>(?=.)/g,"$1`").replace(/([\\`*_~=|])/g,l.helper.escapeCharactersCallback)}),e=n.converter._dispatch("escapeSpecialCharsWithinTagAttributes.after",e,t,n)}),l.subParser("githubCodeBlocks",function(e,t,n){"use strict";return t.ghCodeBlocks?(e=n.converter._dispatch("githubCodeBlocks.before",e,t,n),e+="\xa80",e=e.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(e,r,i){var o=t.omitExtraWLInCodeBlocks?"":"\n";return i=l.subParser("encodeCode")(i,t,n),i=l.subParser("detab")(i,t,n),i=i.replace(/^\n+/g,""),i=i.replace(/\n+$/g,""),i="<pre><code"+(r?' class="'+r+" language-"+r+'"':"")+">"+i+o+"</code></pre>",i=l.subParser("hashBlock")(i,t,n),"\n\n\xa8G"+(n.ghCodeBlocks.push({text:e,codeblock:i})-1)+"G\n\n"}),e=e.replace(/\xa80/,""),n.converter._dispatch("githubCodeBlocks.after",e,t,n)):e}),l.subParser("hashBlock",function(e,t,n){"use strict";return e=n.converter._dispatch("hashBlock.before",e,t,n),e=e.replace(/(^\n+|\n+$)/g,""),e="\n\n\xa8K"+(n.gHtmlBlocks.push(e)-1)+"K\n\n",e=n.converter._dispatch("hashBlock.after",e,t,n)}),l.subParser("hashCodeTags",function(e,t,n){"use strict";e=n.converter._dispatch("hashCodeTags.before",e,t,n);var r=function(e,r,i,o){var s=i+l.subParser("encodeCode")(r,t,n)+o;return"\xa8C"+(n.gHtmlSpans.push(s)-1)+"C"};return e=l.helper.replaceRecursiveRegExp(e,r,"<code\\b[^>]*>","</code>","gim"),e=n.converter._dispatch("hashCodeTags.after",e,t,n)}),l.subParser("hashElement",function(e,t,n){"use strict";return function(e,t){var r=t;return r=r.replace(/\n\n/g,"\n"),r=r.replace(/^\n/,""),r=r.replace(/\n+$/g,""),r="\n\n\xa8K"+(n.gHtmlBlocks.push(r)-1)+"K\n\n"}}),l.subParser("hashHTMLBlocks",function(e,t,n){"use strict";e=n.converter._dispatch("hashHTMLBlocks.before",e,t,n);var r=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],i=function(e,t,r,i){var o=e;return-1!==r.search(/\bmarkdown\b/)&&(o=r+n.converter.makeHtml(t)+i),"\n\n\xa8K"+(n.gHtmlBlocks.push(o)-1)+"K\n\n"};t.backslashEscapesHTMLTags&&(e=e.replace(/\\<(\/?[^>]+?)>/g,function(e,t){return"&lt;"+t+"&gt;"}));for(var o=0;o<r.length;++o)for(var s,a=new RegExp("^ {0,3}(<"+r[o]+"\\b[^>]*>)","im"),u="<"+r[o]+"\\b[^>]*>",c="</"+r[o]+">";-1!==(s=l.helper.regexIndexOf(e,a));){var p=l.helper.splitAtIndex(e,s),h=l.helper.replaceRecursiveRegExp(p[1],i,u,c,"im");if(h===p[1])break;e=p[0].concat(h)}return e=e.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,l.subParser("hashElement")(e,t,n)),e=l.helper.replaceRecursiveRegExp(e,function(e){return"\n\n\xa8K"+(n.gHtmlBlocks.push(e)-1)+"K\n\n"},"^ {0,3}\x3c!--","--\x3e","gm"),e=e.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,l.subParser("hashElement")(e,t,n)),e=n.converter._dispatch("hashHTMLBlocks.after",e,t,n)}),l.subParser("hashHTMLSpans",function(e,t,n){"use strict";function r(e){return"\xa8C"+(n.gHtmlSpans.push(e)-1)+"C"}return e=n.converter._dispatch("hashHTMLSpans.before",e,t,n),e=e.replace(/<[^>]+?\/>/gi,function(e){return r(e)}),e=e.replace(/<([^>]+?)>[\s\S]*?<\/\1>/g,function(e){return r(e)}),e=e.replace(/<([^>]+?)\s[^>]+?>[\s\S]*?<\/\1>/g,function(e){return r(e)}),e=e.replace(/<[^>]+?>/gi,function(e){return r(e)}),e=n.converter._dispatch("hashHTMLSpans.after",e,t,n)}),l.subParser("unhashHTMLSpans",function(e,t,n){"use strict";e=n.converter._dispatch("unhashHTMLSpans.before",e,t,n);for(var r=0;r<n.gHtmlSpans.length;++r){for(var i=n.gHtmlSpans[r],o=0;/\xa8C(\d+)C/.test(i);){var s=RegExp.$1;if(i=i.replace("\xa8C"+s+"C",n.gHtmlSpans[s]),10===o)break;++o}e=e.replace("\xa8C"+r+"C",i)}return e=n.converter._dispatch("unhashHTMLSpans.after",e,t,n)}),l.subParser("hashPreCodeTags",function(e,t,n){"use strict";e=n.converter._dispatch("hashPreCodeTags.before",e,t,n);var r=function(e,r,i,o){var s=i+l.subParser("encodeCode")(r,t,n)+o;return"\n\n\xa8G"+(n.ghCodeBlocks.push({text:e,codeblock:s})-1)+"G\n\n"};return e=l.helper.replaceRecursiveRegExp(e,r,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim"),e=n.converter._dispatch("hashPreCodeTags.after",e,t,n)}),l.subParser("headers",function(e,t,n){"use strict";function r(e){var r,i;if(t.customizedHeaderId){var o=e.match(/\{([^{]+?)}\s*$/);o&&o[1]&&(e=o[1])}return r=e,i=l.helper.isString(t.prefixHeaderId)?t.prefixHeaderId:!0===t.prefixHeaderId?"section-":"",t.rawPrefixHeaderId||(r=i+r),r=t.ghCompatibleHeaderId?r.replace(/ /g,"-").replace(/&amp;/g,"").replace(/\xa8T/g,"").replace(/\xa8D/g,"").replace(/[&+$,\/:;=?@"#{}|^\xa8~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():t.rawHeaderId?r.replace(/ /g,"-").replace(/&amp;/g,"&").replace(/\xa8T/g,"\xa8").replace(/\xa8D/g,"$").replace(/["']/g,"-").toLowerCase():r.replace(/[^\w]/g,"").toLowerCase(),t.rawPrefixHeaderId&&(r=i+r),n.hashLinkCounts[r]?r=r+"-"+n.hashLinkCounts[r]++:n.hashLinkCounts[r]=1,r}e=n.converter._dispatch("headers.before",e,t,n);var i=isNaN(parseInt(t.headerLevelStart))?1:parseInt(t.headerLevelStart),o=t.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,s=t.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;e=e.replace(o,function(e,o){var s=l.subParser("spanGamut")(o,t,n),a=t.noHeaderId?"":' id="'+r(o)+'"',u=i,c="<h"+u+a+">"+s+"</h"+u+">";return l.subParser("hashBlock")(c,t,n)}),e=e.replace(s,function(e,o){var s=l.subParser("spanGamut")(o,t,n),a=t.noHeaderId?"":' id="'+r(o)+'"',u=i+1,c="<h"+u+a+">"+s+"</h"+u+">";return l.subParser("hashBlock")(c,t,n)});var a=t.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;return e=e.replace(a,function(e,o,s){var a=s;t.customizedHeaderId&&(a=s.replace(/\s?\{([^{]+?)}\s*$/,""));var u=l.subParser("spanGamut")(a,t,n),c=t.noHeaderId?"":' id="'+r(s)+'"',p=i-1+o.length,h="<h"+p+c+">"+u+"</h"+p+">";return l.subParser("hashBlock")(h,t,n)}),e=n.converter._dispatch("headers.after",e,t,n)}),l.subParser("horizontalRule",function(e,t,n){"use strict";e=n.converter._dispatch("horizontalRule.before",e,t,n);var r=l.subParser("hashBlock")("<hr />",t,n);return e=e.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,r),e=e.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,r),e=e.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,r),e=n.converter._dispatch("horizontalRule.after",e,t,n)}),l.subParser("images",function(e,t,n){"use strict";function r(e,t,n,r,o,s,l,a){return r=r.replace(/\s/g,""),i(e,t,n,r,o,s,l,a)}function i(e,t,r,i,o,s,a,u){var c=n.gUrls,p=n.gTitles,h=n.gDimensions;if(r=r.toLowerCase(),u||(u=""),e.search(/\(<?\s*>? ?(['"].*['"])?\)$/m)>-1)i="";else if(""===i||null===i){if(""!==r&&null!==r||(r=t.toLowerCase().replace(/ ?\n/g," ")),i="#"+r,l.helper.isUndefined(c[r]))return e;i=c[r],l.helper.isUndefined(p[r])||(u=p[r]),l.helper.isUndefined(h[r])||(o=h[r].width,s=h[r].height)}t=t.replace(/"/g,"&quot;").replace(l.helper.regexes.asteriskAndDash,l.helper.escapeCharactersCallback),i=i.replace(l.helper.regexes.asteriskAndDash,l.helper.escapeCharactersCallback);var d='<img src="'+i+'" alt="'+t+'"';return u&&(u=u.replace(/"/g,"&quot;").replace(l.helper.regexes.asteriskAndDash,l.helper.escapeCharactersCallback),d+=' title="'+u+'"'),o&&s&&(o="*"===o?"auto":o,s="*"===s?"auto":s,d+=' width="'+o+'"',d+=' height="'+s+'"'),d+=" />"}e=n.converter._dispatch("images.before",e,t,n);var o=/!\[([^\]]*?)][ \t]*()\([ \t]?<?([\S]+?(?:\([\S]*?\)[\S]*?)?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,s=/!\[([^\]]*?)][ \t]*()\([ \t]?<([^>]*)>(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(?:(["'])([^"]*?)\6))?[ \t]?\)/g,a=/!\[([^\]]*?)][ \t]*()\([ \t]?<?(data:.+?\/.+?;base64,[A-Za-z0-9+\/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(["'])([^"]*?)\6)?[ \t]?\)/g,u=/!\[([^\]]*?)] ?(?:\n *)?\[([\s\S]*?)]()()()()()/g,c=/!\[([^\[\]]+)]()()()()()/g;return e=e.replace(u,i),e=e.replace(a,r),e=e.replace(s,i),e=e.replace(o,i),e=e.replace(c,i),e=n.converter._dispatch("images.after",e,t,n)}),l.subParser("italicsAndBold",function(e,t,n){"use strict";function r(e,r,i){return t.simplifiedAutoLink&&(e=l.subParser("simplifiedAutoLinks")(e,t,n)),r+e+i}return e=n.converter._dispatch("italicsAndBold.before",e,t,n),t.literalMidWordUnderscores?(e=e.replace(/\b___(\S[\s\S]*)___\b/g,function(e,t){return r(t,"<strong><em>","</em></strong>")}),e=e.replace(/\b__(\S[\s\S]*)__\b/g,function(e,t){return r(t,"<strong>","</strong>")}),e=e.replace(/\b_(\S[\s\S]*?)_\b/g,function(e,t){return r(t,"<em>","</em>")})):(e=e.replace(/___(\S[\s\S]*?)___/g,function(e,t){return/\S$/.test(t)?r(t,"<strong><em>","</em></strong>"):e}),e=e.replace(/__(\S[\s\S]*?)__/g,function(e,t){return/\S$/.test(t)?r(t,"<strong>","</strong>"):e}),e=e.replace(/_([^\s_][\s\S]*?)_/g,function(e,t){return/\S$/.test(t)?r(t,"<em>","</em>"):e})),t.literalMidWordAsterisks?(e=e.trim().replace(/(^| )\*{3}(\S[\s\S]*?)\*{3}([ ,;!?.]|$)/g,function(e,t,n,i){return r(n,t+"<strong><em>","</em></strong>"+i)}),e=e.trim().replace(/(^| )\*{2}(\S[\s\S]*?)\*{2}([ ,;!?.]|$)/g,function(e,t,n,i){return r(n,t+"<strong>","</strong>"+i)}),e=e.trim().replace(/(^| )\*(\S[\s\S]*?)\*([ ,;!?.]|$)/g,function(e,t,n,i){return r(n,t+"<em>","</em>"+i)})):(e=e.replace(/\*\*\*(\S[\s\S]*?)\*\*\*/g,function(e,t){return/\S$/.test(t)?r(t,"<strong><em>","</em></strong>"):e}),e=e.replace(/\*\*(\S[\s\S]*?)\*\*/g,function(e,t){return/\S$/.test(t)?r(t,"<strong>","</strong>"):e}),e=e.replace(/\*([^\s*][\s\S]*?)\*/g,function(e,t){return/\S$/.test(t)?r(t,"<em>","</em>"):e})),e=n.converter._dispatch("italicsAndBold.after",e,t,n)}),l.subParser("lists",function(e,t,n){"use strict";function r(e,r){n.gListLevel++,e=e.replace(/\n{2,}$/,"\n"),e+="\xa80";var i=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(\xa80| {0,3}([*+-]|\d+[.])[ \t]+))/gm,o=/\n[ \t]*\n(?!\xa80)/.test(e);return t.disableForced4SpacesIndentedSublists&&(i=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(\xa80|\2([*+-]|\d+[.])[ \t]+))/gm),e=e.replace(i,function(e,r,i,s,a,u,c){c=c&&""!==c.trim();var p=l.subParser("outdent")(a,t,n),h="";return u&&t.tasklists&&(h=' class="task-list-item" style="list-style-type: none;"',p=p.replace(/^[ \t]*\[(x|X| )?]/m,function(){var e='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return c&&(e+=" checked"),e+=">"})),p=p.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(e){return"\xa8A"+e}),r||p.search(/\n{2,}/)>-1?(p=l.subParser("githubCodeBlocks")(p,t,n),p=l.subParser("blockGamut")(p,t,n)):(p=l.subParser("lists")(p,t,n),p=p.replace(/\n$/,""),p=l.subParser("hashHTMLBlocks")(p,t,n),p=p.replace(/\n\n+/g,"\n\n"),p=o?l.subParser("paragraphs")(p,t,n):l.subParser("spanGamut")(p,t,n)),p=p.replace("\xa8A",""),p="<li"+h+">"+p+"</li>\n"}),e=e.replace(/\xa80/g,""),n.gListLevel--,r&&(e=e.replace(/\s+$/,"")),e}function i(e,n,i){var o=t.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,s=t.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,l="ul"===n?o:s,a="";return-1!==e.search(l)?function e(t){var u=t.search(l);-1!==u?(a+="\n<"+n+">\n"+r(t.slice(0,u),!!i)+"</"+n+">\n",n="ul"===n?"ol":"ul",l="ul"===n?o:s,e(t.slice(u))):a+="\n<"+n+">\n"+r(t,!!i)+"</"+n+">\n"}(e):a="\n<"+n+">\n"+r(e,!!i)+"</"+n+">\n",a}return e=n.converter._dispatch("lists.before",e,t,n),e+="\xa80",e=n.gListLevel?e.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(\xa80|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(e,t,n){return i(t,n.search(/[*+-]/g)>-1?"ul":"ol",!0)}):e.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(\xa80|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(e,t,n,r){return i(n,r.search(/[*+-]/g)>-1?"ul":"ol",!1)}),e=e.replace(/\xa80/,""),e=n.converter._dispatch("lists.after",e,t,n)}),l.subParser("outdent",function(e,t,n){"use strict";return e=n.converter._dispatch("outdent.before",e,t,n),e=e.replace(/^(\t|[ ]{1,4})/gm,"\xa80"),e=e.replace(/\xa80/g,""),e=n.converter._dispatch("outdent.after",e,t,n)}),l.subParser("paragraphs",function(e,t,n){"use strict";e=n.converter._dispatch("paragraphs.before",e,t,n),e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,"");for(var r=e.split(/\n{2,}/g),i=[],o=r.length,s=0;s<o;s++){var a=r[s];a.search(/\xa8(K|G)(\d+)\1/g)>=0?i.push(a):a.search(/\S/)>=0&&(a=l.subParser("spanGamut")(a,t,n),a=a.replace(/^([ \t]*)/g,"<p>"),a+="</p>",i.push(a))}for(o=i.length,s=0;s<o;s++){for(var u="",c=i[s],p=!1;/\xa8(K|G)(\d+)\1/.test(c);){var h=RegExp.$1,d=RegExp.$2;u="K"===h?n.gHtmlBlocks[d]:p?l.subParser("encodeCode")(n.ghCodeBlocks[d].text,t,n):n.ghCodeBlocks[d].codeblock,u=u.replace(/\$/g,"$$$$"),c=c.replace(/(\n\n)?\xa8(K|G)\d+\2(\n\n)?/,u),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(c)&&(p=!0)}i[s]=c}return e=i.join("\n"),e=e.replace(/^\n+/g,""),e=e.replace(/\n+$/g,""),n.converter._dispatch("paragraphs.after",e,t,n)}),l.subParser("runExtension",function(e,t,n,r){"use strict";if(e.filter)t=e.filter(t,r.converter,n);else if(e.regex){var i=e.regex;i instanceof RegExp||(i=new RegExp(i,"g")),t=t.replace(i,e.replace)}return t}),l.subParser("spanGamut",function(e,t,n){"use strict";return e=n.converter._dispatch("spanGamut.before",e,t,n),e=l.subParser("codeSpans")(e,t,n),e=l.subParser("escapeSpecialCharsWithinTagAttributes")(e,t,n),e=l.subParser("encodeBackslashEscapes")(e,t,n),e=l.subParser("images")(e,t,n),e=l.subParser("anchors")(e,t,n),e=l.subParser("autoLinks")(e,t,n),e=l.subParser("italicsAndBold")(e,t,n),e=l.subParser("strikethrough")(e,t,n),e=l.subParser("simplifiedAutoLinks")(e,t,n),e=l.subParser("hashHTMLSpans")(e,t,n),e=l.subParser("encodeAmpsAndAngles")(e,t,n),t.simpleLineBreaks?/\n\n\xa8K/.test(e)||(e=e.replace(/\n+/g,"<br />\n")):e=e.replace(/  +\n/g,"<br />\n"),e=n.converter._dispatch("spanGamut.after",e,t,n)}),l.subParser("strikethrough",function(e,t,n){"use strict";function r(e){return t.simplifiedAutoLink&&(e=l.subParser("simplifiedAutoLinks")(e,t,n)),"<del>"+e+"</del>"}return t.strikethrough&&(e=n.converter._dispatch("strikethrough.before",e,t,n),e=e.replace(/(?:~){2}([\s\S]+?)(?:~){2}/g,function(e,t){return r(t)}),e=n.converter._dispatch("strikethrough.after",e,t,n)),e}),l.subParser("stripLinkDefinitions",function(e,t,n){"use strict";var r=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?([^>\s]+)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=\xa80))/gm,i=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(data:.+?\/.+?;base64,[A-Za-z0-9+\/=\n]+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n\n|(?=\xa80)|(?=\n\[))/gm;e+="\xa80";var o=function(e,r,i,o,s,a,u){return r=r.toLowerCase(),i.match(/^data:.+?\/.+?;base64,/)?n.gUrls[r]=i.replace(/\s/g,""):n.gUrls[r]=l.subParser("encodeAmpsAndAngles")(i,t,n),a?a+u:(u&&(n.gTitles[r]=u.replace(/"|'/g,"&quot;")),t.parseImgDimensions&&o&&s&&(n.gDimensions[r]={width:o,height:s}),"")};return e=e.replace(i,o),e=e.replace(r,o),e=e.replace(/\xa80/,"")}),l.subParser("tables",function(e,t,n){"use strict";function r(e){return/^:[ \t]*--*$/.test(e)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(e)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(e)?' style="text-align:center;"':""}function i(e,r){var i="";return e=e.trim(),(t.tablesHeaderId||t.tableHeaderId)&&(i=' id="'+e.replace(/ /g,"_").toLowerCase()+'"'),e=l.subParser("spanGamut")(e,t,n),"<th"+i+r+">"+e+"</th>\n"}function o(e,r){return"<td"+r+">"+l.subParser("spanGamut")(e,t,n)+"</td>\n"}function s(e,t){for(var n="<table>\n<thead>\n<tr>\n",r=e.length,i=0;i<r;++i)n+=e[i];for(n+="</tr>\n</thead>\n<tbody>\n",i=0;i<t.length;++i){n+="<tr>\n";for(var o=0;o<r;++o)n+=t[i][o];n+="</tr>\n"}return n+="</tbody>\n</table>\n"}function a(e){var t,n=e.split("\n");for(t=0;t<n.length;++t)/^ {0,3}\|/.test(n[t])&&(n[t]=n[t].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(n[t])&&(n[t]=n[t].replace(/\|[ \t]*$/,""));var a=n[0].split("|").map(function(e){return e.trim()}),u=n[1].split("|").map(function(e){return e.trim()}),c=[],p=[],h=[],d=[];for(n.shift(),n.shift(),t=0;t<n.length;++t)""!==n[t].trim()&&c.push(n[t].split("|").map(function(e){return e.trim()}));if(a.length<u.length)return e;for(t=0;t<u.length;++t)h.push(r(u[t]));for(t=0;t<a.length;++t)l.helper.isUndefined(h[t])&&(h[t]=""),p.push(i(a[t],h[t]));for(t=0;t<c.length;++t){for(var f=[],g=0;g<p.length;++g)l.helper.isUndefined(c[t][g]),f.push(o(c[t][g],h[g]));d.push(f)}return s(p,d)}if(!t.tables)return e;var u=/^ {0,3}\|?.+\|.+\n {0,3}\|?[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:[-=]){2,}[\s\S]+?(?:\n\n|\xa80)/gm,c=/^ {0,3}\|.+\|\n {0,3}\|[ \t]*:?[ \t]*(?:[-=]){2,}[ \t]*:?[ \t]*\|\n( {0,3}\|.+\|\n)*(?:\n|\xa80)/gm;return e=n.converter._dispatch("tables.before",e,t,n),e=e.replace(/\\(\|)/g,l.helper.escapeCharactersCallback),e=e.replace(u,a),e=e.replace(c,a),e=n.converter._dispatch("tables.after",e,t,n)}),l.subParser("unescapeSpecialChars",function(e,t,n){"use strict";return e=n.converter._dispatch("unescapeSpecialChars.before",e,t,n),e=e.replace(/\xa8E(\d+)E/g,function(e,t){var n=parseInt(t);return String.fromCharCode(n)}),e=n.converter._dispatch("unescapeSpecialChars.after",e,t,n)});void 0!==(r=function(){"use strict";return l}.call(t,n,t,e))&&(e.exports=r)}).call(this)},P8Ly:function(e,t){function n(){}t.doNothing=n,t.hasKeys=function(e){for(var t in e)return!0;return!1}},PrP8:function(e,t,n){e.exports={type:n("U+WS")}},S7Ow:function(e,t,n){function r(e){for(var t in i.prototype)e.prototype[t]=i.prototype[t]}var i=n("rOzH").EventEmitter;t.EventEmitter=i,t.mixin=r},"U+WS":function(e,t,n){function r(e){e.t="text0";var t={p:e.p.pop()};null!=e.si&&(t.i=e.si),null!=e.sd&&(t.d=e.sd),e.o=[t]}function i(e){e.p.push(e.o[0].p),null!=e.o[0].i&&(e.si=e.o[0].i),null!=e.o[0].d&&(e.sd=e.o[0].d),delete e.t,delete e.o}var o=function(e){return"[object Array]"==Object.prototype.toString.call(e)},s=function(e){return!!e&&e.constructor===Object},l=function(e){return JSON.parse(JSON.stringify(e))},a={name:"json0",uri:"http://sharejs.org/types/JSONv0"},u={};a.registerSubtype=function(e){u[e.name]=e},a.create=function(e){return void 0===e?null:l(e)},a.invertComponent=function(e){var t={p:e.p};return e.t&&u[e.t]&&(t.t=e.t,t.o=u[e.t].invert(e.o)),void 0!==e.si&&(t.sd=e.si),void 0!==e.sd&&(t.si=e.sd),void 0!==e.oi&&(t.od=e.oi),void 0!==e.od&&(t.oi=e.od),void 0!==e.li&&(t.ld=e.li),void 0!==e.ld&&(t.li=e.ld),void 0!==e.na&&(t.na=-e.na),void 0!==e.lm&&(t.lm=e.p[e.p.length-1],t.p=e.p.slice(0,e.p.length-1).concat([e.lm])),t},a.invert=function(e){for(var t=e.slice().reverse(),n=[],r=0;r<t.length;r++)n.push(a.invertComponent(t[r]));return n},a.checkValidOp=function(e){for(var t=0;t<e.length;t++)if(!o(e[t].p))throw new Error("Missing path")},a.checkList=function(e){if(!o(e))throw new Error("Referenced element not a list")},a.checkObj=function(e){if(!s(e))throw new Error("Referenced element not an object (it was "+JSON.stringify(e)+")")},a.apply=function(e,t){a.checkValidOp(t),t=l(t);for(var n={data:e},i=0;i<t.length;i++){var o=t[i];null==o.si&&null==o.sd||r(o);for(var s=null,c=n,p="data",h=0;h<o.p.length;h++){var d=o.p[h];if(s=c,p,c=c[p],p=d,null==s)throw new Error("Path invalid")}if(o.t&&void 0!==o.o&&u[o.t])c[p]=u[o.t].apply(c[p],o.o);else if(void 0!==o.na){if("number"!=typeof c[p])throw new Error("Referenced element not a number");c[p]+=o.na}else if(void 0!==o.li&&void 0!==o.ld)a.checkList(c),c[p]=o.li;else if(void 0!==o.li)a.checkList(c),c.splice(p,0,o.li);else if(void 0!==o.ld)a.checkList(c),c.splice(p,1);else if(void 0!==o.lm){if(a.checkList(c),o.lm!=p){var f=c[p];c.splice(p,1),c.splice(o.lm,0,f)}}else if(void 0!==o.oi)a.checkObj(c),c[p]=o.oi;else{if(void 0===o.od)throw new Error("invalid / missing instruction in op");a.checkObj(c),delete c[p]}}return n.data},a.shatter=function(e){for(var t=[],n=0;n<e.length;n++)t.push([e[n]]);return t},a.incrementalApply=function(e,t,n){for(var r=0;r<t.length;r++){var i=[t[r]];e=a.apply(e,i),n(i,e)}return e};var c=a.pathMatches=function(e,t,n){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r]&&(!n||r!==e.length-1))return!1;return!0};a.append=function(e,t){if(t=l(t),0===e.length)return void e.push(t);var n=e[e.length-1];if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(r(t),r(n)),c(t.p,n.p))if(t.t&&n.t&&t.t===n.t&&u[t.t]){if(n.o=u[t.t].compose(n.o,t.o),null!=t.si||null!=t.sd){for(var o=t.p,s=0;s<n.o.length-1;s++)t.o=[n.o.pop()],t.p=o.slice(),i(t),e.push(t);i(n)}}else null!=n.na&&null!=t.na?e[e.length-1]={p:n.p,na:n.na+t.na}:void 0!==n.li&&void 0===t.li&&t.ld===n.li?void 0!==n.ld?delete n.li:e.pop():void 0!==n.od&&void 0===n.oi&&void 0!==t.oi&&void 0===t.od?n.oi=t.oi:void 0!==n.oi&&void 0!==t.od?void 0!==t.oi?n.oi=t.oi:void 0!==n.od?delete n.oi:e.pop():void 0!==t.lm&&t.p[t.p.length-1]===t.lm||e.push(t);else null==t.si&&null==t.sd||null==n.si&&null==n.sd||(i(t),i(n)),e.push(t)},a.compose=function(e,t){a.checkValidOp(e),a.checkValidOp(t);for(var n=l(e),r=0;r<t.length;r++)a.append(n,t[r]);return n},a.normalize=function(e){var t=[];e=o(e)?e:[e];for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=[]),a.append(t,r)}return t},a.commonLengthForOps=function(e,t){var n=e.p.length,r=t.p.length;if((null!=e.na||e.t)&&n++,(null!=t.na||t.t)&&r++,0===n)return-1;if(0===r)return null;n--,r--;for(var i=0;i<n;i++){var o=e.p[i];if(i>=r||o!==t.p[i])return null}return n},a.canOpAffectPath=function(e,t){return null!=a.commonLengthForOps({p:t},e)},a.transformComponent=function(e,t,n,o){t=l(t);var s=a.commonLengthForOps(n,t),c=a.commonLengthForOps(t,n),p=t.p.length,h=n.p.length;if((null!=t.na||t.t)&&p++,(null!=n.na||n.t)&&h++,null!=c&&h>p&&t.p[c]==n.p[c])if(void 0!==t.ld){var d=l(n);d.p=d.p.slice(p),t.ld=a.apply(l(t.ld),[d])}else if(void 0!==t.od){var d=l(n);d.p=d.p.slice(p),t.od=a.apply(l(t.od),[d])}if(null!=s){var f=p==h,d=n;if(null==t.si&&null==t.sd||null==n.si&&null==n.sd||(r(t),d=l(n),r(d)),d.t&&u[d.t]){if(t.t&&t.t===d.t){var g=u[t.t].transform(t.o,d.o,o);if(g.length>0)if(null!=t.si||null!=t.sd)for(var m=t.p,v=0;v<g.length;v++)t.o=[g[v]],t.p=m.slice(),i(t),a.append(e,t);else t.o=g,a.append(e,t);return e}}else if(void 0!==n.na);else if(void 0!==n.li&&void 0!==n.ld){if(n.p[s]===t.p[s]){if(!f)return e;if(void 0!==t.ld){if(void 0===t.li||"left"!==o)return e;t.ld=l(n.li)}}}else if(void 0!==n.li)void 0!==t.li&&void 0===t.ld&&f&&t.p[s]===n.p[s]?"right"===o&&t.p[s]++:n.p[s]<=t.p[s]&&t.p[s]++,void 0!==t.lm&&f&&n.p[s]<=t.lm&&t.lm++;else if(void 0!==n.ld){if(void 0!==t.lm&&f){if(n.p[s]===t.p[s])return e;var m=n.p[s],y=t.p[s],b=t.lm;(m<b||m===b&&y<b)&&t.lm--}if(n.p[s]<t.p[s])t.p[s]--;else if(n.p[s]===t.p[s]){if(h<p)return e;if(void 0!==t.ld){if(void 0===t.li)return e;delete t.ld}}}else if(void 0!==n.lm)if(void 0!==t.lm&&p===h){var y=t.p[s],b=t.lm,w=n.p[s],S=n.lm;if(w!==S)if(y===w){if("left"!==o)return e;t.p[s]=S,y===b&&(t.lm=S)}else y>w&&t.p[s]--,y>S?t.p[s]++:y===S&&w>S&&(t.p[s]++,y===b&&t.lm++),b>w?t.lm--:b===w&&b>y&&t.lm--,b>S?t.lm++:b===S&&(S>w&&b>y||S<w&&b<y?"right"===o&&t.lm++:b>y?t.lm++:b===w&&t.lm--)}else if(void 0!==t.li&&void 0===t.ld&&f){var y=n.p[s],b=n.lm;m=t.p[s],m>y&&t.p[s]--,m>b&&t.p[s]++}else{var y=n.p[s],b=n.lm;m=t.p[s],m===y?t.p[s]=b:(m>y&&t.p[s]--,m>b?t.p[s]++:m===b&&y>b&&t.p[s]++)}else if(void 0!==n.oi&&void 0!==n.od){if(t.p[s]===n.p[s]){if(void 0===t.oi||!f)return e;if("right"===o)return e;t.od=n.oi}}else if(void 0!==n.oi){if(void 0!==t.oi&&t.p[s]===n.p[s]){if("left"!==o)return e;a.append(e,{p:t.p,od:n.oi})}}else if(void 0!==n.od&&t.p[s]==n.p[s]){if(!f)return e;if(void 0===t.oi)return e;delete t.od}}return a.append(e,t),e},n("ATzb")(a,a.transformComponent,a.checkValidOp,a.append);var p=n("frgR");a.registerSubtype(p),e.exports=a},VrrN:function(e,t,n){t.defaultType=n("PrP8").type,t.map={},t.register=function(e){e.name&&(t.map[e.name]=e),e.uri&&(t.map[e.uri]=e)},t.register(t.defaultType)},XakC:function(e,t,n){e.exports=n("s/MU")},ZkSD:function(e,t,n){(function(){var e,r,i,o,s,l,a,u,c,p,h,d,f,g,m,v,y,b,w,S,k,C=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};u=Math.floor,p=Math.max,h=Math.min,r=n("XakC"),l=n("iw1t"),y=function(e,t){return t?2*e/t:1},v=function(e,t){var n,r,i,o,s,l;for(s=[e.length,t.length],r=s[0],i=s[1],n=o=0,l=h(r,i);0<=l?o<l:o>l;n=0<=l?++o:--o){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return r-i},k=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},m=function(e){var t,n;for(t=0,n=e.length;t<n;t++)if(e[t])return!0;return!1},s=function(){function e(e,t,n,r){this.isjunk=e,null==t&&(t=""),null==n&&(n=""),this.autojunk=null==r||r,this.a=this.b=null,this.setSeqs(t,n)}return e.name="SequenceMatcher",e.prototype.setSeqs=function(e,t){return this.setSeq1(e),this.setSeq2(t)},e.prototype.setSeq1=function(e){if(e!==this.a)return this.a=e,this.matchingBlocks=this.opcodes=null},e.prototype.setSeq2=function(e){if(e!==this.b)return this.b=e,this.matchingBlocks=this.opcodes=null,this.fullbcount=null,this._chainB()},e.prototype._chainB=function(){var e,t,n,r,i,o,s,l,a,c,p,h,d,f,g,m;for(e=this.b,this.b2j=t={},r=h=0,f=e.length;h<f;r=++h)n=e[r],o=k(t,n)?t[n]:t[n]=[],o.push(r);if(l={},s=this.isjunk)for(m=Object.keys(t),d=0,g=m.length;d<g;d++)n=m[d],s(n)&&(l[n]=!0,delete t[n]);if(p={},a=e.length,this.autojunk&&a>=200){c=u(a/100)+1;for(n in t)i=t[n],i.length>c&&(p[n]=!0,delete t[n])}return this.isbjunk=function(e){return k(l,e)},this.isbpopular=function(e){return k(p,e)}},e.prototype.findLongestMatch=function(e,t,n,r){var i,o,s,l,a,u,c,p,h,d,f,g,m,v,y,b,w,S,C,E,x;for(b=[this.a,this.b,this.b2j,this.isbjunk],i=b[0],o=b[1],s=b[2],p=b[3],w=[e,n,0],l=w[0],a=w[1],u=w[2],d={},c=m=e;e<=t?m<t:m>t;c=e<=t?++m:--m){for(g={},S=k(s,i[c])?s[i[c]]:[],v=0,y=S.length;v<y;v++)if(!((h=S[v])<n)){if(h>=r)break;f=g[h]=(d[h-1]||0)+1,f>u&&(C=[c-f+1,h-f+1,f],l=C[0],a=C[1],u=C[2])}d=g}for(;l>e&&a>n&&!p(o[a-1])&&i[l-1]===o[a-1];)E=[l-1,a-1,u+1],l=E[0],a=E[1],u=E[2];for(;l+u<t&&a+u<r&&!p(o[a+u])&&i[l+u]===o[a+u];)u++;for(;l>e&&a>n&&p(o[a-1])&&i[l-1]===o[a-1];)x=[l-1,a-1,u+1],l=x[0],a=x[1],u=x[2];for(;l+u<t&&a+u<r&&p(o[a+u])&&i[l+u]===o[a+u];)u++;return[l,a,u]},e.prototype.getMatchingBlocks=function(){var e,t,n,r,i,o,s,l,a,u,c,p,h,d,f,g,m,y,b,w,S,k,C,E,x,_;if(this.matchingBlocks)return this.matchingBlocks;for(k=[this.a.length,this.b.length],d=k[0],f=k[1],y=[[0,d,0,f]],g=[];y.length;)C=y.pop(),t=C[0],e=C[1],r=C[2],n=C[3],E=b=this.findLongestMatch(t,e,r,n),i=E[0],l=E[1],c=E[2],c&&(g.push(b),t<i&&r<l&&y.push([t,i,r,l]),i+c<e&&l+c<n&&y.push([i+c,e,l+c,n]));for(g.sort(v),o=a=p=0,m=[],w=0,S=g.length;w<S;w++)x=g[w],s=x[0],u=x[1],h=x[2],o+p===s&&a+p===u?p+=h:(p&&m.push([o,a,p]),_=[s,u,h],o=_[0],a=_[1],p=_[2]);return p&&m.push([o,a,p]),m.push([d,f,0]),this.matchingBlocks=m},e.prototype.getOpcodes=function(){var e,t,n,r,i,o,s,l,a,u,c,p;if(this.opcodes)return this.opcodes;for(r=i=0,this.opcodes=t=[],u=this.getMatchingBlocks(),l=0,a=u.length;l<a;l++)c=u[l],e=c[0],n=c[1],o=c[2],s="",r<e&&i<n?s="replace":r<e?s="delete":i<n&&(s="insert"),s&&t.push([s,r,e,i,n]),p=[e+o,n+o],r=p[0],i=p[1],o&&t.push(["equal",e,r,n,i]);return t},e.prototype.getGroupedOpcodes=function(e){var t,n,r,i,o,s,l,a,u,c,d,f,g,m,v;for(null==e&&(e=3),t=this.getOpcodes(),t.length||(t=[["equal",0,1,0,1]]),"equal"===t[0][0]&&(f=t[0],u=f[0],i=f[1],o=f[2],s=f[3],l=f[4],t[0]=[u,p(i,o-e),o,p(s,l-e),l]),"equal"===t[t.length-1][0]&&(g=t[t.length-1],u=g[0],i=g[1],o=g[2],s=g[3],l=g[4],t[t.length-1]=[u,i,h(o,i+e),s,h(l,s+e)]),a=e+e,r=[],n=[],c=0,d=t.length;c<d;c++)m=t[c],u=m[0],i=m[1],o=m[2],s=m[3],l=m[4],"equal"===u&&o-i>a&&(n.push([u,i,h(o,i+e),s,h(l,s+e)]),r.push(n),n=[],v=[p(i,o-e),p(s,l-e)],i=v[0],s=v[1]),n.push([u,i,o,s,l]);return!n.length||1===n.length&&"equal"===n[0][0]||r.push(n),r},e.prototype.ratio=function(){var e,t,n,r,i;for(t=0,i=this.getMatchingBlocks(),n=0,r=i.length;n<r;n++)e=i[n],t+=e[2];return y(t,this.a.length+this.b.length)},e.prototype.quickRatio=function(){var e,t,n,r,i,o,s,l,a,u,c;if(!this.fullbcount)for(this.fullbcount=n={},u=this.b,o=0,l=u.length;o<l;o++)t=u[o],n[t]=(n[t]||0)+1;for(n=this.fullbcount,e={},r=0,c=this.a,s=0,a=c.length;s<a;s++)t=c[s],i=k(e,t)?e[t]:n[t]||0,e[t]=i-1,i>0&&r++;return y(r,this.a.length+this.b.length)},e.prototype.realQuickRatio=function(){var e,t,n;return n=[this.a.length,this.b.length],e=n[0],t=n[1],y(h(e,t),e+t)},e}(),c=function(e,t,n,i){var o,l,a,u,c,p,h,d,f;if(null==n&&(n=3),null==i&&(i=.6),!(n>0))throw new Error("n must be > 0: ("+n+")");if(!(0<=i&&i<=1))throw new Error("cutoff must be in [0.0, 1.0]: ("+i+")");for(o=[],l=new s,l.setSeq2(e),u=0,p=t.length;u<p;u++)a=t[u],l.setSeq1(a),l.realQuickRatio()>=i&&l.quickRatio()>=i&&l.ratio()>=i&&o.push([l.ratio(),a]);for(o=r.nlargest(o,n,v),f=[],c=0,h=o.length;c<h;c++)d=o[c],d[0],a=d[1],f.push(a);return f},b=function(e,t){var n,r,i;for(i=[0,e.length],n=i[0],r=i[1];n<r&&e[n]===t;)n++;return n},e=function(){function e(e,t){this.linejunk=e,this.charjunk=t}return e.name="Differ",e.prototype.compare=function(e,t){var n,r,i,o,l,a,u,c,p,h,d,f,g,m,v;for(l=new s(this.linejunk,e,t),c=[],m=l.getOpcodes(),h=0,f=m.length;h<f;h++){switch(v=m[h],p=v[0],r=v[1],n=v[2],o=v[3],i=v[4],p){case"replace":a=this._fancyReplace(e,r,n,t,o,i);break;case"delete":a=this._dump("-",e,r,n);break;case"insert":a=this._dump("+",t,o,i);break;case"equal":a=this._dump(" ",e,r,n);break;default:throw new Error("unknow tag ("+p+")")}for(d=0,g=a.length;d<g;d++)u=a[d],c.push(u)}return c},e.prototype._dump=function(e,t,n,r){var i,o,s;for(s=[],i=o=n;n<=r?o<r:o>r;i=n<=r?++o:--o)s.push(e+" "+t[i]);return s},e.prototype._plainReplace=function(e,t,n,r,i,o){var s,a,u,c,p,h,d,f,g,m;for(l(t<n&&i<o),o-i<n-t?(s=this._dump("+",r,i,o),p=this._dump("-",e,t,n)):(s=this._dump("-",e,t,n),p=this._dump("+",r,i,o)),c=[],m=[s,p],h=0,f=m.length;h<f;h++)for(a=m[h],d=0,g=a.length;d<g;d++)u=a[d],c.push(u);return c},e.prototype._fancyReplace=function(e,t,n,r,i,o){var l,a,u,c,p,h,d,f,g,m,v,y,b,w,S,k,C,E,x,_,T,I,P,O,L,A,R,j,M,D,V,B,F,N,z,H,U,G,q,$,W,K,Q,J,Z,Y,X,ee,te;for(U=[.74,.75],d=U[0],S=U[1],w=new s(this.charjunk),G=[null,null],k=G[0],C=G[1],P=[],x=L=i;i<=o?L<o:L>o;x=i<=o?++L:--L)for(m=r[x],w.setSeq2(m),E=A=t;t<=n?A<n:A>n;E=t<=n?++A:--A)a=e[E],a!==m?(w.setSeq1(a),w.realQuickRatio()>d&&w.quickRatio()>d&&w.ratio()>d&&(Q=[w.ratio(),E,x],d=Q[0],f=Q[1],g=Q[2])):null===k&&(K=[E,x],k=K[0],C=K[1]);if(d<S){if(null===k){for(J=this._plainReplace(e,t,n,r,i,o),R=0,M=J.length;R<M;R++)I=J[R],P.push(I);return P}Z=[k,C,1],f=Z[0],g=Z[1],d=Z[2]}else k=null;for(Y=this._fancyHelper(e,t,f,r,i,g),j=0,D=Y.length;j<D;j++)I=Y[j],P.push(I);if(X=[e[f],r[g]],l=X[0],h=X[1],null===k){for(p=b="",w.setSeqs(l,h),ee=w.getOpcodes(),N=0,V=ee.length;N<V;N++)switch(te=ee[N],O=te[0],u=te[1],c=te[2],v=te[3],y=te[4],q=[c-u,y-v],_=q[0],T=q[1],O){case"replace":p+=Array(_+1).join("^"),b+=Array(T+1).join("^");break;case"delete":p+=Array(_+1).join("-");break;case"insert":b+=Array(T+1).join("+");break;case"equal":p+=Array(_+1).join(" "),b+=Array(T+1).join(" ");break;default:throw new Error("unknow tag ("+O+")")}for($=this._qformat(l,h,p,b),z=0,B=$.length;z<B;z++)I=$[z],P.push(I)}else P.push("  "+l);for(W=this._fancyHelper(e,f+1,n,r,g+1,o),H=0,F=W.length;H<F;H++)I=W[H],P.push(I);return P},e.prototype._fancyHelper=function(e,t,n,r,i,o){var s;return s=[],t<n?s=i<o?this._fancyReplace(e,t,n,r,i,o):this._dump("-",e,t,n):i<o&&(s=this._dump("+",r,i,o)),s},e.prototype._qformat=function(e,t,n,r){var i,o;return o=[],i=h(b(e,"\t"),b(t,"\t")),i=h(i,b(n.slice(0,i)," ")),i=h(i,b(r.slice(0,i)," ")),n=n.slice(i).replace(/\s+$/,""),r=r.slice(i).replace(/\s+$/,""),o.push("- "+e),n.length&&o.push("? "+Array(i+1).join("\t")+n+"\n"),o.push("+ "+t),r.length&&o.push("? "+Array(i+1).join("\t")+r+"\n"),o},e}(),o=function(e,t){return null==t&&(t=/^\s*#?\s*$/),t.test(e)},i=function(e,t){return null==t&&(t=" \t"),C.call(t,e)>=0},S=function(e,t){var n,r;return n=e+1,1===(r=t-e)?""+n:(r||n--,n+","+r)},g=function(e,t,n){var r,i,o,l,a,u,c,p,h,d,f,g,m,v,y,b,w,k,C,E,x,_,T,I,P,O,L,A,R,j,M,D,V,B,F,N,z,H;for(D=null!=n?n:{},a=D.fromfile,E=D.tofile,u=D.fromfiledate,x=D.tofiledate,b=D.n,y=D.lineterm,null==a&&(a=""),null==E&&(E=""),null==u&&(u=""),null==x&&(x=""),null==b&&(b=3),null==y&&(y="\n"),v=[],w=!1,V=new s(null,e,t).getGroupedOpcodes(),_=0,O=V.length;_<O;_++)for(c=V[_],w||(w=!0,l=u?"\t"+u:"",C=x?"\t"+x:"",v.push("--- "+a+l+y),v.push("+++ "+E+C+y)),B=[c[0],c[c.length-1]],o=B[0],g=B[1],r=S(o[1],g[2]),i=S(o[3],g[4]),v.push("@@ -"+r+" +"+i+" @@"+y),T=0,L=c.length;T<L;T++)if(F=c[T],k=F[0],p=F[1],h=F[2],d=F[3],f=F[4],"equal"!==k){if("replace"===k||"delete"===k)for(z=e.slice(p,h),P=0,R=z.length;P<R;P++)m=z[P],v.push("-"+m);if("replace"===k||"insert"===k)for(H=t.slice(d,f),M=0,j=H.length;M<j;M++)m=H[M],v.push("+"+m)}else for(N=e.slice(p,h),I=0,A=N.length;I<A;I++)m=N[I],v.push(" "+m);return v},w=function(e,t){var n,r;return n=e+1,r=t-e,r||n--,r<=1?""+n:n+","+(n+r-1)},a=function(e,t,n){var r,i,o,l,a,u,c,p,h,d,f,g,v,y,b,S,k,C,E,x,_,T,I,P,O,L,A,R,j,M,D,V,B,F,N,z,H,U,G,q;for(F=null!=n?n:{},a=F.fromfile,_=F.tofile,u=F.fromfiledate,T=F.tofiledate,S=F.n,b=F.lineterm,null==a&&(a=""),null==_&&(_=""),null==u&&(u=""),null==T&&(T=""),null==S&&(S=3),null==b&&(b="\n"),k={insert:"+ ",delete:"- ",replace:"! ",equal:"  "},C=!1,y=[],N=new s(null,e,t).getGroupedOpcodes(),P=0,R=N.length;P<R;P++)if(c=N[P],!C){if(C=!0,l=u?"\t"+u:"",x=T?"\t"+T:"",y.push("*** "+a+l+b),y.push("--- "+_+x+b),z=[c[0],c[c.length-1]],o=z[0],g=z[1],y.push("***************"+b),r=w(o[1],g[2]),y.push("*** "+r+" ****"+b),m(function(){var e,t,n,r;for(r=[],e=0,t=c.length;e<t;e++)n=c[e],E=n[0],I=n[1],I=n[2],I=n[3],I=n[4],r.push("replace"===E||"delete"===E);return r}()))for(O=0,j=c.length;O<j;O++)if(H=c[O],E=H[0],p=H[1],h=H[2],I=H[3],I=H[4],"insert"!==E)for(U=e.slice(p,h),L=0,M=U.length;L<M;L++)v=U[L],y.push(k[E]+v);if(i=w(o[3],g[4]),y.push("--- "+i+" ----"+b),m(function(){var e,t,n,r;for(r=[],e=0,t=c.length;e<t;e++)n=c[e],E=n[0],I=n[1],I=n[2],I=n[3],I=n[4],r.push("replace"===E||"insert"===E);return r}()))for(A=0,D=c.length;A<D;A++)if(G=c[A],E=G[0],I=G[1],I=G[2],d=G[3],f=G[4],"delete"!==E)for(q=t.slice(d,f),B=0,V=q.length;B<V;B++)v=q[B],y.push(k[E]+v)}return y},d=function(t,n,r,o){return null==o&&(o=i),new e(r,o).compare(t,n)},f=function(e,t){var n,r,i,o,s,l,a;if(!(o={1:"- ",2:"+ "}[t]))throw new Error("unknow delta choice (must be 1 or 2): "+t);for(i=["  ",o],r=[],s=0,l=e.length;s<l;s++)n=e[s],a=n.slice(0,2),C.call(i,a)>=0&&r.push(n.slice(2));return r},t._arrayCmp=v,t.SequenceMatcher=s,t.getCloseMatches=c,t._countLeading=b,t.Differ=e,t.IS_LINE_JUNK=o,t.IS_CHARACTER_JUNK=i,t._formatRangeUnified=S,t.unifiedDiff=g,t._formatRangeContext=w,t.contextDiff=a,t.ndiff=d,t.restore=f}).call(this)},aOk2:function(e,t,n){function r(e){return n(i(e))}function i(e){var t=o[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var o={"./attach/attach":"e4Is","./attach/attach.js":"e4Is","./attach/package.json":"AP+1","./fit/fit":"OvIn","./fit/fit.js":"OvIn","./fit/package.json":"xrd2","./fullscreen/fullscreen":"EsT8","./fullscreen/fullscreen.css":"AVaf","./fullscreen/fullscreen.js":"EsT8","./fullscreen/package.json":"YJ4y","./search/SearchHelper":"u2sn","./search/SearchHelper.js":"u2sn","./search/SearchHelper.js.map":"42sv","./search/search":"ehvo","./search/search.js":"ehvo","./search/search.js.map":"0VnT","./terminado/package.json":"yKdp","./terminado/terminado":"jQbx","./terminado/terminado.js":"jQbx"};r.keys=function(){return Object.keys(o)},r.resolve=i,e.exports=r,r.id="aOk2"},cDNt:function(e,t,n){"use strict";function r(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function i(e){return"number"==typeof e?e:e.getTimestamp()}function o(e,t){return i(e)<i(t)}function s(e,t){return i(e)>i(t)}function l(e,t){return i(e)<=i(t)}function a(e,t){return i(e)>=i(t)}function u(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function c(e){return pe["\u0275vid"](0,[pe["\u0275qud"](402653184,1,{inp:0}),(e()(),pe["\u0275eld"](0,null,null,38,"div",[["class","container-fluid"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275eld"](0,null,null,7,"div",[["class","name-label row"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275eld"](0,null,null,4,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275eld"](0,null,null,1,"label",[["for","uname"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["Username:"])),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275eld"](0,null,null,20,"div",[["class","name-entry row"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275eld"](0,null,null,17,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275eld"](0,null,null,14,"div",[["class","input-group input-group-lg"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275eld"](0,[[1,0],["inp",1]],null,5,"input",[["class","form-control"],["id","uname"],["placeholder","Your name"],["type","text"]],[[8,"className",0],[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"keydown"],[null,"input"],[null,"blur"],[null,"compositionstart"],[null,"compositionend"]],function(e,t,n){var r=!0,i=e.component;if("input"===t){r=!1!==pe["\u0275nov"](e,19)._handleInput(n.target.value)&&r}if("blur"===t){r=!1!==pe["\u0275nov"](e,19).onTouched()&&r}if("compositionstart"===t){r=!1!==pe["\u0275nov"](e,19)._compositionStart()&&r}if("compositionend"===t){r=!1!==pe["\u0275nov"](e,19)._compositionEnd(n.target.value)&&r}if("ngModelChange"===t){r=!1!==i.valueChange(n)&&r}if("ngModelChange"===t){r=!1!==(i.value=n)&&r}if("keydown"===t){r=!1!==i.onKeydown(n)&&r}return r},null,null)),pe["\u0275did"](16384,null,0,nt.b,[pe.Renderer2,pe.ElementRef,[2,nt.a]],null,null),pe["\u0275prd"](1024,null,nt.d,function(e){return[e]},[nt.b]),pe["\u0275did"](671744,null,0,nt.g,[[8,null],[8,null],[8,null],[2,nt.d]],{model:[0,"model"]},{update:"ngModelChange"}),pe["\u0275prd"](2048,null,nt.e,null,[nt.g]),pe["\u0275did"](16384,null,0,nt.f,[nt.e],null,null),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275eld"](0,null,null,4,"span",[["class","input-group-btn"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                    "])),(e()(),pe["\u0275eld"](0,null,null,1,"button",[["class","btn btn-primary"],["type","button"]],null,[[null,"click"]],function(e,t,n){var r=!0,i=e.component;if("click"===t){r=!1!==i.doSubmit()&&r}return r},null,null)),(e()(),pe["\u0275ted"](null,["Go"])),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275eld"](0,null,null,4,"div",[["class","feedback row"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275eld"](0,null,null,1,"div",[["class","col-12"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n            ","\n        "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275ted"](null,["\n"])),(e()(),pe["\u0275ted"](null,["\n"]))],function(e,t){e(t,21,0,t.component.value)},function(e,t){var n=t.component;e(t,18,0,n.feedbackClass,pe["\u0275nov"](t,23).ngClassUntouched,pe["\u0275nov"](t,23).ngClassTouched,pe["\u0275nov"](t,23).ngClassPristine,pe["\u0275nov"](t,23).ngClassDirty,pe["\u0275nov"](t,23).ngClassValid,pe["\u0275nov"](t,23).ngClassInvalid,pe["\u0275nov"](t,23).ngClassPending),e(t,37,0,n.feedback)})}function p(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"name-entry",[],null,null,null,c,it)),pe["\u0275did"](114688,null,0,tt,[],null,null)],function(e,t){e(t,1,0)},null)}function h(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,2,"span",[["class","user badge badge-default"]],[[2,"typing",null],[2,"typed",null],[2,"isme",null]],null,null,null,null)),pe["\u0275did"](278528,null,0,Ge.d,[pe.IterableDiffers,pe.KeyValueDiffers,pe.ElementRef,pe.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),pe["\u0275ted"](null,["\n    ","\n"]))],function(e,t){e(t,1,0,"user badge badge-default","user-"+t.component.user.getColorIndex())},function(e,t){var n=t.component;e(t,0,0,"ACTIVE_TYPING"==n.typingStatus,"IDLE_TYPED"==n.typingStatus,n.user.getIsMe()),e(t,2,0,n.user.getName())})}function d(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"user-display",[],null,null,null,h,at)),pe["\u0275did"](114688,null,0,st,[],null,null)],function(e,t){e(t,1,0)},null)}function f(e){return pe["\u0275vid"](0,[pe["\u0275qud"](402653184,1,{terminalElement:0}),(e()(),pe["\u0275eld"](0,null,null,1,"button",[["class","run btn-sm btn btn-success"]],null,[[null,"click"]],function(e,t,n){var r=!0,i=e.component;if("click"===t){r=!1!==i.run()&&r}return r},null,null)),(e()(),pe["\u0275ted"](null,["Run"])),(e()(),pe["\u0275ted"](null,["\n"])),(e()(),pe["\u0275eld"](0,[[1,0],["terminal",1]],null,0,"div",[["class","terminalContainer"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n"]))],null,null)}function g(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"python-output",[],null,null,null,f,ft)),pe["\u0275did"](114688,null,0,ht,[],null,null)],function(e,t){e(t,1,0)},null)}function m(e,t){return e.length>t?e.substring(0,t-3)+"...":e}function v(e){return pe["\u0275vid"](0,[pe["\u0275qud"](402653184,1,{editor:0}),(e()(),pe["\u0275eld"](0,null,null,2,"ace-editor",[["class","form-control"],["id","chat-input-editor"],["placeholder","Say something"]],null,[[null,"keydown"],[null,"textChanged"]],function(e,t,n){var r=!0,i=e.component;if("keydown"===t){r=!1!==i.onTextareaKeydown(n)&&r}if("textChanged"===t){r=!1!==i.onTextareaChange(n)&&r}return r},yt.b,yt.a)),pe["\u0275prd"](5120,null,nt.d,function(e){return[e]},[bt.a]),pe["\u0275did"](114688,[[1,4],["editor",4]],0,bt.a,[pe.ElementRef],{theme:[0,"theme"]},{textChanged:"textChanged"}),(e()(),pe["\u0275ted"](null,["\n"]))],function(e,t){e(t,3,0,"chrome")},null)}function y(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"chat-input",[],null,null,null,v,St)),pe["\u0275did"](114688,null,0,vt,[],null,null)],function(e,t){e(t,1,0)},null)}function b(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,2,"span",[["class","time"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["","","",""])),pe["\u0275pid"](131072,Ct.TimeAgoPipe,[pe.ChangeDetectorRef,pe.NgZone]),(e()(),pe["\u0275ted"](null,["\n"]))],null,function(e,t){var n=t.component;e(t,1,0,n.parens?"(":"",pe["\u0275unv"](t,1,1,pe["\u0275nov"](t,2).transform(n.t)),n.parens?")":"")})}function w(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"timestamp",[],null,null,null,b,_t)),pe["\u0275did"](49152,null,0,Et,[],null,null)],null,null)}function S(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,5,"div",[["class","message"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["Showing code from "])),(e()(),pe["\u0275eld"](0,null,null,1,"timestamp",[],null,null,null,b,_t)),pe["\u0275did"](49152,null,0,Et,[],{t:[0,"t"]},null),(e()(),pe["\u0275eld"](0,null,null,1,"button",[["class","btn btn-sm btn-primary"]],null,[[null,"click"]],function(e,t,n){var r=!0,i=e.component;if("click"===t){r=!1!==i.toLatest()&&r}return r},null,null)),(e()(),pe["\u0275ted"](null,["Show current code"]))],function(e,t){e(t,3,0,t.component.editorStateTracker.getCurrentTimestamp())},null)}function k(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"div",[["class","no-editor-open"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n    (no file is open)\n"]))],null,null)}function C(e){return pe["\u0275vid"](0,[pe["\u0275qud"](402653184,1,{editor:0}),(e()(),pe["\u0275and"](16777216,null,null,1,null,S)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n"])),(e()(),pe["\u0275eld"](0,null,null,4,"ace-editor",[],[[8,"hidden",0]],null,null,yt.b,yt.a)),pe["\u0275prd"](5120,null,nt.d,function(e){return[e]},[bt.a]),pe["\u0275did"](278528,null,0,Ge.d,[pe.IterableDiffers,pe.KeyValueDiffers,pe.ElementRef,pe.Renderer],{ngClass:[0,"ngClass"]},null),pe["\u0275pod"]({locked:0}),pe["\u0275did"](114688,[[1,4],["editor",4]],0,bt.a,[pe.ElementRef],{theme:[0,"theme"]},null),(e()(),pe["\u0275ted"](null,["\n"])),(e()(),pe["\u0275and"](16777216,null,null,1,null,k)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n"]))],function(e,t){var n=t.component;e(t,2,0,!n.editorStateTracker.isAtLatest()),e(t,6,0,e(t,7,0,!n.editorStateTracker.isAtLatest()));e(t,8,0,"chrome"),e(t,11,0,!1===n.selectedEditor)},function(e,t){e(t,4,0,0==t.component.selectedEditor)})}function E(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"code-editor",[],null,null,null,C,Pt)),pe["\u0275did"](114688,null,0,Tt,[],null,null)],function(e,t){e(t,1,0)},null)}function x(e){return pe["\u0275vid"](0,[pe["\u0275qud"](402653184,1,{elem:0}),(e()(),pe["\u0275eld"](0,[[1,0],["elem",1]],null,1,"div",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["",""]))],null,function(e,t){e(t,2,0,t.component.message.getMessage())})}function _(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"chat-message",[],null,null,null,x,Mt)),pe["\u0275did"](114688,null,0,Rt,[],null,null)],function(e,t){e(t,1,0)},null)}function T(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,[", "]))],null,null)}function I(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,[", and"]))],null,null)}function P(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,[" and"]))],null,null)}function O(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,11,"span",[["class","authors"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t\t\t"])),(e()(),pe["\u0275eld"](0,null,null,2,"span",[],null,null,null,null,null)),pe["\u0275did"](278528,null,0,Ge.d,[pe.IterableDiffers,pe.KeyValueDiffers,pe.ElementRef,pe.Renderer],{ngClass:[0,"ngClass"]},null),(e()(),pe["\u0275ted"](null,["",""])),(e()(),pe["\u0275and"](16777216,null,null,1,null,T)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275and"](16777216,null,null,1,null,I)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275and"](16777216,null,null,1,null,P)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n\t\t"]))],function(e,t){var n=t.component;e(t,3,0,"user-"+t.context.$implicit.getColorIndex()),e(t,6,0,n.numAuthors>2&&t.context.index<n.numAuthors-2),e(t,8,0,n.numAuthors>2&&t.context.index===n.numAuthors-2),e(t,10,0,2==n.numAuthors&&0==t.context.index)},function(e,t){e(t,4,0,t.context.$implicit.getName())})}function L(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,[", "]))],null,null)}function A(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,[", and"]))],null,null)}function R(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,[" and"]))],null,null)}function j(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,11,"span",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t\t\t"])),(e()(),pe["\u0275eld"](0,null,null,2,"span",[],null,null,null,null,null)),(e()(),pe["\u0275eld"](0,null,null,1,"a",[["href","javascript:void(0)"]],null,[[null,"click"]],function(e,t,n){var r=!0,i=e.component;if("click"===t){r=!1!==i.openFile(e.context.$implicit)&&r}return r},null,null)),(e()(),pe["\u0275ted"](null,["",""])),(e()(),pe["\u0275and"](16777216,null,null,1,null,L)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275and"](16777216,null,null,1,null,A)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275and"](16777216,null,null,1,null,R)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n\t\t"]))],function(e,t){var n=t.component;e(t,6,0,n.numEditorStates>2&&t.context.index<n.numEditorStates-2),e(t,8,0,n.numEditorStates>2&&t.context.index===n.numEditorStates-2),e(t,10,0,2==n.numEditorStates&&0==t.context.index)},function(e,t){e(t,4,0,t.context.$implicit.getTitle())})}function M(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,4,"div",[["class","file_diff"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t\t\t"])),(e()(),pe["\u0275eld"](0,null,null,1,"div",[],[[8,"innerHTML",1]],null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t\t\t"])),(e()(),pe["\u0275ted"](null,["\n\t\t"]))],null,function(e,t){e(t,2,0,t.context.$implicit)})}function D(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,4,"div",[["class","diff"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t\t"])),(e()(),pe["\u0275and"](16777216,null,null,1,null,M)),pe["\u0275did"](802816,null,0,Ge.e,[pe.ViewContainerRef,pe.TemplateRef,pe.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),pe["\u0275ted"](null,["\n\t"]))],function(e,t){e(t,3,0,t.component.diffHTMLs)},null)}function V(e){return pe["\u0275vid"](0,[pe["\u0275qud"](402653184,1,{elem:0}),(e()(),pe["\u0275eld"](0,null,null,26,"div",[["class","full_edit_message"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t"])),(e()(),pe["\u0275ted"](null,["\n\t\t\t"])),(e()(),pe["\u0275ted"](null,["\n\t\t"])),(e()(),pe["\u0275ted"](null,["\n\t"])),(e()(),pe["\u0275eld"](0,null,null,16,"div",[["class","edit_message"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t\t"])),(e()(),pe["\u0275and"](16777216,null,null,1,null,O)),pe["\u0275did"](802816,null,0,Ge.e,[pe.ViewContainerRef,pe.TemplateRef,pe.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),pe["\u0275ted"](null,["\n\t\t"])),(e()(),pe["\u0275eld"](0,null,null,1,"span",[["class","action"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["edited"])),(e()(),pe["\u0275ted"](null,["\n\t\t"])),(e()(),pe["\u0275and"](16777216,null,null,1,null,j)),pe["\u0275did"](802816,null,0,Ge.e,[pe.ViewContainerRef,pe.TemplateRef,pe.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),pe["\u0275ted"](null,["\n\t\t"])),(e()(),pe["\u0275eld"](0,null,null,1,"timestamp",[],null,null,null,b,_t)),pe["\u0275did"](49152,null,0,Et,[],{t:[0,"t"],parens:[1,"parens"]},null),(e()(),pe["\u0275ted"](null,["\n\t\t"])),(e()(),pe["\u0275eld"](0,null,null,1,"a",[["href","javascript:void(0)"]],null,[[null,"click"]],function(e,t,n){var r=!0,i=e.component;if("click"===t){r=!1!==i.toggleDetails()&&r}return r},null,null)),(e()(),pe["\u0275ted"](null,["",""])),(e()(),pe["\u0275ted"](null,["\n\t"])),(e()(),pe["\u0275ted"](null,["\n\t"])),(e()(),pe["\u0275ted"](null,["\n\t"])),(e()(),pe["\u0275and"](16777216,null,null,1,null,D)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n"])),(e()(),pe["\u0275ted"](null,["\n"]))],function(e,t){var n=t.component;e(t,9,0,n.authors),e(t,15,0,n.editorStates);e(t,18,0,n.messageGroup.getLatestTimestamp(),!0),e(t,26,0,n.showingChanges&&n.showingDetails)},function(e,t){e(t,21,0,t.component.showingDetails?"(less)":"(more)")})}function B(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"edit-message-group",[],null,null,null,V,Nt)),pe["\u0275did"](114688,null,0,Bt,[],null,null)],function(e,t){e(t,1,0)},null)}function F(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,[", "]))],null,null)}function N(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,[", and"]))],null,null)}function z(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"span",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,[" and"]))],null,null)}function H(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,11,"span",[["class","users"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t\t\t"])),(e()(),pe["\u0275eld"](0,null,null,2,"span",[],null,null,null,null,null)),pe["\u0275did"](278528,null,0,Ge.d,[pe.IterableDiffers,pe.KeyValueDiffers,pe.ElementRef,pe.Renderer],{ngClass:[0,"ngClass"]},null),(e()(),pe["\u0275ted"](null,["",""])),(e()(),pe["\u0275and"](16777216,null,null,1,null,F)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275and"](16777216,null,null,1,null,N)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275and"](16777216,null,null,1,null,z)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n\t\t"]))],function(e,t){var n=t.component;e(t,3,0,"user-"+t.context.$implicit.getColorIndex()),e(t,6,0,n.numUsers>2&&t.context.index<n.numUsers-2),e(t,8,0,n.numUsers>2&&t.context.index===n.numUsers-2),e(t,10,0,2==n.numUsers&&0==t.context.index)},function(e,t){e(t,4,0,t.context.$implicit.getName())})}function U(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,13,"div",[["class","full_connection_message"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t"])),(e()(),pe["\u0275eld"](0,null,null,10,"div",[["class","connection_message"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t\t"])),(e()(),pe["\u0275and"](16777216,null,null,1,null,H)),pe["\u0275did"](802816,null,0,Ge.e,[pe.ViewContainerRef,pe.TemplateRef,pe.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),pe["\u0275ted"](null,["\n\t\t"])),(e()(),pe["\u0275eld"](0,null,null,1,"span",[["class","action"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n\t\t\t","\n\t\t"])),(e()(),pe["\u0275ted"](null,["\n\t\t"])),(e()(),pe["\u0275eld"](0,null,null,1,"timestamp",[],null,null,null,b,_t)),pe["\u0275did"](49152,null,0,Et,[],{t:[0,"t"],parens:[1,"parens"]},null),(e()(),pe["\u0275ted"](null,["\n\t"])),(e()(),pe["\u0275ted"](null,["\n"])),(e()(),pe["\u0275ted"](null,["\n"]))],function(e,t){var n=t.component;e(t,5,0,n.users);e(t,11,0,n.messageGroup.getLatestTimestamp(),!0)},function(e,t){e(t,8,0,t.component.action)})}function G(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"connection-message-group",[],null,null,null,U,Gt)),pe["\u0275did"](114688,null,0,Ht,[],null,null)],function(e,t){e(t,1,0)},null)}function q(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"div",[["class","no-messages"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n        (no messages)\n    "]))],null,null)}function $(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,4,"li",[["class","message list-group-item"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                    "])),(e()(),pe["\u0275eld"](0,null,null,1,"chat-message",[],null,null,null,x,Mt)),pe["\u0275did"](114688,null,0,Rt,[],{editorStateTracker:[0,"editorStateTracker"],message:[1,"message"],editor:[2,"editor"]},null),(e()(),pe["\u0275ted"](null,["\n                "]))],function(e,t){var n=t.component;e(t,3,0,n.commLayer.getEditorStateTracker(),t.context.$implicit,n.editor)},null)}function W(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,16,"ul",[["class","text-messages list-group"]],null,[[null,"click"]],function(e,t,n){var r=!0,i=e.component;if("click"===t){r=!1!==i.revert(e.parent.context.$implicit)&&r}return r},null,null)),pe["\u0275did"](278528,null,0,Ge.d,[pe.IterableDiffers,pe.KeyValueDiffers,pe.ElementRef,pe.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275eld"](0,null,null,9,"li",[["class","header list-group-item"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                    "])),(e()(),pe["\u0275eld"](0,null,null,1,"span",[["class","sender"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["",""])),(e()(),pe["\u0275ted"](null,["\xa0"])),(e()(),pe["\u0275eld"](0,null,null,1,"timestamp",[],null,null,null,b,_t)),pe["\u0275did"](49152,null,0,Et,[],{t:[0,"t"],parens:[1,"parens"]},null),(e()(),pe["\u0275ted"](null,["\n                    "])),(e()(),pe["\u0275ted"](null,["\n                    "])),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,$)),pe["\u0275did"](802816,null,0,Ge.e,[pe.ViewContainerRef,pe.TemplateRef,pe.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),pe["\u0275ted"](null,["\n            "]))],function(e,t){var n=t.component;e(t,1,0,"text-messages list-group","user-"+t.parent.context.$implicit.getSender().getColorIndex()+(n.editorStateTracker.getCurrentVersion()===t.parent.context.$implicit.getEditorVersion()?" isCurrentTimestamp":""));e(t,9,0,t.parent.context.$implicit.getLatestTimestamp(),!0),e(t,15,0,t.parent.context.$implicit.getItems())},function(e,t){e(t,6,0,t.parent.context.$implicit.getSender().getName())})}function K(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,4,"ul",[["class","edit-messages list-group"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275eld"](0,null,null,1,"edit-message-group",[],null,[[null,"willExpand"],[null,"expanded"]],function(e,t,n){var r=!0,i=e.component;if("willExpand"===t){r=!1!==i.willChangeSize.emit(n)&&r}if("expanded"===t){r=!1!==i.changedSize.emit(n)&&r}return r},V,Nt)),pe["\u0275did"](114688,null,0,Bt,[],{editorStateTracker:[0,"editorStateTracker"],messageGroup:[1,"messageGroup"],editor:[2,"editor"]},{willExpand:"willExpand",expanded:"expanded"}),(e()(),pe["\u0275ted"](null,["\n            "]))],function(e,t){var n=t.component;e(t,3,0,n.commLayer.getEditorStateTracker(),t.parent.context.$implicit,n.editor)},null)}function Q(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,4,"ul",[["class","connect-messages list-group"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275eld"](0,null,null,1,"connection-message-group",[],null,null,null,U,Gt)),pe["\u0275did"](114688,null,0,Ht,[],{messageGroup:[0,"messageGroup"]},null),(e()(),pe["\u0275ted"](null,["\n            "]))],function(e,t){e(t,3,0,t.parent.context.$implicit)},null)}function J(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,12,"li",[["class","messageGroup"]],null,null,null,null,null)),pe["\u0275did"](278528,null,0,Ge.d,[pe.IterableDiffers,pe.KeyValueDiffers,pe.ElementRef,pe.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),pe["\u0275pod"]({cameAfterTimestamp:0}),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,W)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,K)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,Q)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n        "]))],function(e,t){var n=t.component;e(t,1,0,"messageGroup",e(t,2,0,!n.editorStateTracker.isAtLatest()&&n.isChatMessage(t.context.$implicit)&&t.context.$implicit.getEditorVersion()>n.editorStateTracker.getCurrentVersion())),e(t,5,0,n.isChatMessage(t.context.$implicit)),e(t,8,0,n.isEditMessage(t.context.$implicit)),e(t,11,0,n.isConnectMessage(t.context.$implicit))},null)}function Z(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"div",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                "," is typing...\n            "]))],null,function(e,t){e(t,1,0,t.parent.context.$implicit.name)})}function Y(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,4,"div",[],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,Z)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n        "]))],function(e,t){e(t,3,0,"ACTIVE_TYPING"==t.context.$implicit.typingStatus&&!t.context.$implicit.getIsMe())},null)}function X(e){return pe["\u0275vid"](0,[pe["\u0275qud"](402653184,1,{messageDisplay:0}),(e()(),pe["\u0275eld"](0,[[1,0],["messageDisplay",1]],null,17,"div",[["class","message-display"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,q)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275eld"](0,null,null,5,"ul",[["class","messageGroups"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,J)),pe["\u0275did"](802816,null,0,Ge.e,[pe.ViewContainerRef,pe.TemplateRef,pe.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275eld"](0,null,null,4,"div",[["class","typing"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,Y)),pe["\u0275did"](802816,null,0,Ge.e,[pe.ViewContainerRef,pe.TemplateRef,pe.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275ted"](null,["\n"])),(e()(),pe["\u0275ted"](null,["\n"]))],function(e,t){var n=t.component;e(t,4,0,n.commLayer.getMessageGroups().isEmpty()),e(t,9,0,n.commLayer.getMessageGroups().getMessageGroups()),e(t,16,0,n.commLayer.getUserList().getActiveUsers())},null)}function ee(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"chat-messages",[],null,null,null,X,Wt)),pe["\u0275did"](114688,null,0,qt,[],null,null)],function(e,t){e(t,1,0)},null)}function te(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"name-entry",[],null,[[null,"onEnter"]],function(e,t,n){var r=!0,i=e.component;if("onEnter"===t){r=!1!==i.setName(n)&&r}return r},c,it)),pe["\u0275did"](114688,null,0,tt,[],null,{onEnter:"onEnter"})],function(e,t){e(t,1,0)},null)}function ne(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,7,"div",[["class","container"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275eld"](0,null,null,4,"div",[["class","row"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275eld"](0,null,null,1,"div",[["class","col"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["Connecting..."])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275ted"](null,["\n"]))],null,null)}function re(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,10,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                    "])),(e()(),pe["\u0275eld"](0,null,null,7,"a",[["class","nav-link"],["href","javascript:void(0);"]],null,[[null,"click"]],function(e,t,n){var r=!0;if("click"===t){r=!1!==pe["\u0275nov"](e.parent,33).selectFile(e.context.$implicit)&&r}return r},null,null)),pe["\u0275did"](278528,null,0,Ge.d,[pe.IterableDiffers,pe.KeyValueDiffers,pe.ElementRef,pe.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),pe["\u0275pod"]({active:0}),(e()(),pe["\u0275ted"](null,["\n                        ","\n                        "])),(e()(),pe["\u0275eld"](0,null,null,2,"span",[["class","modifiedFlag"]],null,null,null,null,null)),pe["\u0275did"](278528,null,0,Ge.d,[pe.IterableDiffers,pe.KeyValueDiffers,pe.ElementRef,pe.Renderer],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),pe["\u0275pod"]({modified:0}),(e()(),pe["\u0275ted"](null,["\n                    "])),(e()(),pe["\u0275ted"](null,["\n                "]))],function(e,t){e(t,3,0,"nav-link",e(t,4,0,t.context.$implicit.selected));e(t,7,0,"modifiedFlag",e(t,8,0,t.context.$implicit.getIsModified()))},function(e,t){e(t,5,0,t.context.$implicit.getTitle())})}function ie(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,4,"li",[["class","nav-item"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                    "])),(e()(),pe["\u0275eld"](0,null,null,1,"a",[["class","nav-link"],["href","javascript:void(0);"]],null,[[null,"click"]],function(e,t,n){var r=!0,i=e.component;if("click"===t){r=!1!==i.createNewFile()&&r}return r},null,null)),(e()(),pe["\u0275ted"](null,["\n                        +\n                    "])),(e()(),pe["\u0275ted"](null,["\n                "]))],null,null)}function oe(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,4,"li",[["class","member"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                    "])),(e()(),pe["\u0275eld"](0,null,null,1,"user-display",[],null,null,null,h,at)),pe["\u0275did"](114688,null,0,st,[],{user:[0,"user"]},null),(e()(),pe["\u0275ted"](null,["\n                "]))],function(e,t){e(t,3,0,t.context.$implicit)},null)}function se(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,15,"div",[["class","row"],["id","input_row"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275eld"](0,null,null,5,"div",[["class","col-8"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275eld"](0,null,null,1,"python-output",[],null,null,null,f,ft)),pe["\u0275did"](114688,null,0,ht,[],{commLayer:[0,"commLayer"],editor:[1,"editor"]},null),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275eld"](0,null,null,4,"div",[["class","col-4"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275eld"](0,null,null,1,"chat-input",[],null,[[null,"send"],[null,"typing"]],function(e,t,n){var r=!0,i=e.component;if("send"===t){r=!1!==i.sendTextMessage(n)&&r}if("typing"===t){r=!1!==i.updateTypingStatus(n)&&r}return r},v,St)),pe["\u0275did"](114688,[[1,4],["chatinput",4]],0,vt,[],null,{send:"send",typing:"typing"}),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n    "]))],function(e,t){e(t,6,0,t.component.channelCommLayer,pe["\u0275nov"](t.parent,33)),e(t,13,0)},null)}function le(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,46,"div",[["class","container-fluid"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275eld"](0,null,null,23,"div",[["class","row"],["id","list_row"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275eld"](0,null,null,10,"div",[["class","col-8"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275eld"](0,null,null,7,"ul",[["class","files nav nav-tabs"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,re)),pe["\u0275did"](802816,null,0,Ge.e,[pe.ViewContainerRef,pe.TemplateRef,pe.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,ie)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275eld"](0,null,null,7,"div",[["class","col-4"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n            Here now:\n            "])),(e()(),pe["\u0275eld"](0,null,null,4,"ul",[["class","members"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n                "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,oe)),pe["\u0275did"](802816,null,0,Ge.e,[pe.ViewContainerRef,pe.TemplateRef,pe.IterableDiffers],{ngForOf:[0,"ngForOf"]},null),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275eld"](0,null,null,14,"div",[["class","row"],["id","content_row"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275eld"](0,null,null,4,"div",[["class","col-8"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275eld"](0,null,null,1,"code-editor",[],null,[[null,"cursorSelectionChanged"]],function(e,t,n){var r=!0,i=e.component;if("cursorSelectionChanged"===t){r=!1!==i.editorCursorSelectionChanged(n)&&r}return r},C,Pt)),pe["\u0275did"](114688,[[2,4],["codeEditor",4]],0,Tt,[],{commLayer:[0,"commLayer"],isObserver:[1,"isObserver"]},{cursorSelectionChanged:"cursorSelectionChanged"}),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275eld"](0,null,null,4,"div",[["class","col-4"]],null,null,null,null,null)),(e()(),pe["\u0275ted"](null,["\n            "])),(e()(),pe["\u0275eld"](0,null,null,1,"chat-messages",[],null,null,null,X,Wt)),pe["\u0275did"](114688,null,0,qt,[],{commLayer:[0,"commLayer"],editorStateTracker:[1,"editorStateTracker"],editor:[2,"editor"]},null),(e()(),pe["\u0275ted"](null,["\n        "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275ted"](null,["\n    "])),(e()(),pe["\u0275and"](16777216,null,null,1,null,se)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n"]))],function(e,t){var n=t.component;e(t,10,0,n.getActiveEditors()),e(t,13,0,!n.isObserver),e(t,23,0,n.channelCommLayer.getUserList().getActiveUsers()),e(t,33,0,n.channelCommLayer,n.isObserver),e(t,40,0,n.channelCommLayer,n.editorStateTracker,pe["\u0275nov"](t,33)),e(t,45,0,!n.isObserver)},null)}function ae(e){return pe["\u0275vid"](0,[pe["\u0275qud"](671088640,1,{chatinput:0}),pe["\u0275qud"](671088640,2,{codeEditor:0}),(e()(),pe["\u0275and"](16777216,null,null,1,null,te)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n\n"])),(e()(),pe["\u0275and"](16777216,null,null,1,null,ne)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n"])),(e()(),pe["\u0275and"](16777216,null,null,1,null,le)),pe["\u0275did"](16384,null,0,Ge.f,[pe.ViewContainerRef,pe.TemplateRef],{ngIf:[0,"ngIf"]},null),(e()(),pe["\u0275ted"](null,["\n"]))],function(e,t){var n=t.component;e(t,3,0,!n.hasName),e(t,6,0,n.hasName&&!n.connected),e(t,9,0,n.hasName&&n.connected)},null)}function ue(e){return pe["\u0275vid"](0,[(e()(),pe["\u0275eld"](0,null,null,1,"app-root",[],null,null,null,ae,Qt)),pe["\u0275did"](114688,null,0,Je,[],null,null)],function(e,t){e(t,1,0)},null)}Object.defineProperty(t,"__esModule",{value:!0});var ce,pe=n("/oeL"),he={production:!0},de=function(){function e(){}return e}(),fe=n("fnsC"),ge=function(){function e(){this.eventListeners=new Map}return e.prototype.on=function(e,t){return this.eventListeners.has(e)?this.eventListeners.get(e).push(t):this.eventListeners.set(e,[t]),new me(this,e,t)},e.prototype.addListener=function(e,t){return this.on(e,t)},e.prototype.removeListener=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0==e.length)this.eventListeners.clear();else if(1==e.length&&"object"==typeof e[0]){var n=e[0].id;this.removeListener(n.event,n.listener)}else if(arguments.length>=1){var r=e[0],i=e[1];if(this.eventListeners.has(r))for(var o=this.eventListeners.get(r),s=void 0;!i||-1!=(s=o.indexOf(i));)o.splice(s,1)}},e.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(this.eventListeners.has(e))for(var r=0,i=this.eventListeners.get(e);r<i.length;r++){var o=i[r];o.apply(void 0,t)}},e.prototype.registerEvent=function(){var e=this,t=function(n){return e.addListener(t,n)};return t},e}(),me=function(){function e(e,t,n){this.owner=e,this.event=t,this.listener=n}return e.prototype.unbind=function(){this.owner.removeListener(this)},e}(),ve=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ye=function(e){function t(t,n,r,i,o,s,l){var a=e.call(this)||this;return a.isMe=t,a.id=n,a.name=r,a.joined=i,a.left=o,a.colorIndex=s,a.channelService=l,a.typingStatus="IDLE",a.chatDocPromise=a.channelService.getShareDBChat(),a}return ve(t,e),t.prototype.getIsMe=function(){return this.isMe},t.prototype.getID=function(){return this.id},t.prototype.getName=function(){return this.name},t.prototype.getColorIndex=function(){return this.colorIndex},t.prototype.getTypingStatus=function(){return this.typingStatus},t.prototype.setLeft=function(e){this.left=e},t.prototype.getLeft=function(){return this.left},t.prototype.getJoined=function(){return this.joined},t.prototype.setTypingStatus=function(e){this.typingStatus=e,this.emit("typingStatus",{status:e})},t}(ge),be=function(e){function t(t,n){var r=e.call(this)||this;return r.myIDPromise=t,r.channelService=n,r.activeUsers=new Map,r.allUsers=new Map,r.chatDocPromise=r.channelService.getShareDBChat(),r.ready=Promise.all([r.chatDocPromise,r.myIDPromise]).then(function(e){var t=e[0],n=e[1];fe.each(t.data.allUsers,function(e){r.allUsers.set(e.id,r.createUser(e,n))}),fe.each(t.data.activeUsers,function(e){r.activeUsers.set(e.id,r.createUser(e,n))}),t.on("op",function(e,t){e.forEach(function(e){var t=e.p,i=t[0];if("activeUsers"!==i&&"allUsers"!==i||2!==t.length){if("typingStatus"===fe.last(t)&&fe.has(e,"oi")){var o=e.oi,s=t[1],l=r.getUser(s);l.setTypingStatus(o)}}else{var a="activeUsers"===i?r.activeUsers:r.allUsers;if(fe.has(e,"od")&&fe.has(e,"oi")){var u=e.od,o=e.oi;if(u.id!==o.id){var c=r.createUser(o,n);a.delete(u.id),r.emit("userRemoved",{id:u.id}),a.set(o.id,c),r.emit("userAdded",{user:c})}}else if(fe.has(e,"od")){var u=e.od,p=u.id;a.delete(p),r.emit("userRemoved",{id:p})}else if(fe.has(e,"oi")){var o=e.oi,c=r.createUser(o,n);a.set(o.id,c),r.emit("userAdded",{user:c})}}})})}).then(function(){return!0}),r}return ve(t,e),t.prototype.createUser=function(e,t){var n=e.id,r=e.joined,i=e.left,o=e.info;if(this.allUsers.has(n)){var s=this.allUsers.get(n);return s}var l=o.name,a=o.colorIndex,u=n===t,s=new ye(u,n,l,r,i,a,this.channelService);return this.allUsers.set(n,s),s},t.prototype.getUser=function(e){return this.allUsers.get(e)},t.prototype.getMe=function(){for(var e=this.getActiveUsers(),t=0;t<e.length;t++){var n=e[t];if(n.getIsMe())return n}return null},t.prototype.getActiveUsers=function(){return Array.from(this.activeUsers.values())},t}(ge),we=n("++eH"),Se=function(){function e(e,t,n,i,o){var s=this;this.channelName=e,this.channelID=t,this.username=n,this.ws=i,this.sdbp=o,this.responseCallbacks=new Map,this.typeCallbacks=new Map,this.id="/"+this.getChannelName()+"#"+r(),this.wsPromise=new Promise(function(e,t){s.ws.readyState===WebSocket.OPEN?e(s.ws):s.ws.addEventListener("open",function(t){e(s.ws)})}),this.readyPromise=this.wsPromise.then(function(){return i.addEventListener("message",function(e){var t=e.data;try{var n=JSON.parse(t);if(2===n.cc&&n.ns==s.getShareDBNamespace())if(s.responseCallbacks.has(n.messageID)){var r=s.responseCallbacks.get(n.messageID);r(null,n.payload),s.responseCallbacks.delete(n.messageID)}else if(s.typeCallbacks.has(n.type)){var i=s.typeCallbacks.get(n.type);i.forEach(function(e){e(null,n.payload)})}}catch(e){console.error(e)}}),!s.getChannelName()||s.pemit("request-join-room",{channel:s.getChannelName(),channelID:s.channelID,username:s.username,id:s.getID()})}).then(function(e){var t=e.id,n=e.ns;return s.channelID=t,s.shareDBNamespace=n,s})}return e.prototype.emit=function(e,t,n){var i=this,o=null;n&&(o=r(),this.responseCallbacks.set(o,n));var s={messageID:o,type:e,ns:this.getShareDBNamespace(),payload:t,cc:1};this.wsPromise.then(function(e){try{e.send(JSON.stringify(s))}catch(e){n&&(n(e),i.responseCallbacks.delete(o)),console.error(e)}})},e.prototype.pemit=function(e,t){var n=this;return new Promise(function(r,i){var o=function(e,t){e?i(e):r(t)};n.emit(e,t,o)})},e.prototype.bind=function(e,t){this.typeCallbacks.has(e)?this.typeCallbacks.get(e).push(t):this.typeCallbacks.set(e,[t])},e.prototype.unbind=function(e,t){if(this.typeCallbacks.has(e)){for(var n=this.typeCallbacks.get(e),r=0;r<n.length;r++){n[r]===t&&(n.splice(r,1),r--)}0===n.length&&this.typeCallbacks.delete(e)}},e.prototype.ready=function(){return this.readyPromise},e.prototype.getID=function(){return this.id},e.prototype.getChannelName=function(){return this.channelName},e.prototype.getChannelID=function(){return this.channelID},e.prototype.getShareDBNamespace=function(){return this.shareDBNamespace},e.prototype.getShareDBObject=function(e){var t=this;return this.sdbp.then(function(n){return n.get(t.getShareDBNamespace(),e)})},e.prototype.destroy=function(){},e.prototype.trigger=function(e,t,n,r){r?this.emit(t,n,r):this.emit(t,n)},e}(),ke=function(){function e(e){var t=this;this.authInfo=e,this.namespaces=new Map,this.disconnectListeners=[],this.username=e.username,this.wsPromise=new Promise(function(n,r){var i="https:"===window.location.protocol?"wss":"ws",o=new WebSocket(i+"://"+e.host);o.addEventListener("open",function(e){n(o)}),o.addEventListener("close",function(e){t.disconnectListeners.forEach(function(e){return e()})})}),this.mainSocket=this.wsPromise.then(function(e){return new Se(null,null,t.username,e,t.shareDBConnectionPromise).ready()}),this.shareDBConnectionPromise=this.wsPromise.then(function(e){return new we.Connection(e)})}return e.prototype.onDisconnect=function(e){return this.disconnectListeners.push(e),this},e.prototype.getShareDBConnection=function(){return this.shareDBConnectionPromise},e.prototype.getNamespace=function(e,t){var n=this;if(this.namespaces.has(e))return this.namespaces.get(e);var r=this.wsPromise.then(function(r){return new Se(e,t,n.username,r,n.shareDBConnectionPromise).ready()});return this.namespaces.set(e,r),r},e.prototype.getMembers=function(e){return this.getNamespace(e).then(function(e){return new Promise(function(t,n){e.emit("get-members",function(e){t(e)})})})},e.prototype.channelNameAvailable=function(e){return this.mainSocket.then(function(t){return new Promise(function(n,r){t.emit("channel-available",e,function(e){n(e)})})})},e.prototype.destroy=function(){},e}(),Ce=n("HfCu"),Ee=n("gvk/"),xe=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();!function(e){e[e.connect=1]="connect",e[e.disconnect=2]="disconnect"}(ce||(ce={}));var _e=function(){function e(e,t,n){this.user=e,this.timestamp=t,this.action=n}return e.prototype.getUser=function(){return this.user},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.isConnect=function(){return this.action===ce.connect},e.prototype.isDisconnect=function(){return this.action!==ce.connect},e}(),Te=function(){function e(e,t,n,r){this.users=e,this.editors=t,this.timestamp=n,this.contents=r}return e.prototype.getUsers=function(){return this.users},e.prototype.getEditors=function(){return this.editors},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.getContents=function(){return this.contents},e}(),Ie=function(){function e(e,t,n,r,i){var o=this;this.sender=e,this.timestamp=t,this.message=n,this.editorsVersion=r,this.converter=new Ce.Converter({simplifiedAutoLink:!0}),this.fileLinkRegexp=new RegExp("^(.+):s*L(\\d+)(\\s*,\\s*(\\d+))?(s*-s*L(\\d+)(\\s*,\\s*(\\d+))?)?$");var s=document.createElement("li");s.innerHTML=this.converter.makeHtml(this.message),fe.each(s.querySelectorAll("a"),function(e){var t=o.matchFileLinkAttributes(e.getAttribute("href"));if(t){var n=t.fileName,r=t.start,s=t.end;isNaN(r.column)&&(r.column=-1),isNaN(s.row)&&(s.row=r.row),isNaN(s.column)&&(s.column=-1);var l=i.fuzzyMatch(n),a=l?l.getEditorID():n;e.setAttribute("href","javascript:void(0)"),e.setAttribute("class","line_ref"),e.setAttribute("data-file",a),e.setAttribute("data-start",[r.row,r.column].join(",")),e.setAttribute("data-end",[s.row,s.column].join(","))}}),this.html=s.innerHTML}return e.prototype.getSender=function(){return this.sender},e.prototype.getTimestamp=function(){return this.timestamp},e.prototype.getMessage=function(){return this.message},e.prototype.getHTML=function(){return this.html},e.prototype.getEditorVersion=function(){return this.editorsVersion},e.prototype.matchFileLinkAttributes=function(e){var t=e.match(this.fileLinkRegexp);return!!t&&{fileName:t[1],start:{row:parseInt(t[2]),column:parseInt(t[4])},end:{row:parseInt(t[6]),column:parseInt(t[8])}}},e}(),Pe=function(e){function t(t){var n=e.call(this)||this;return n.items=[],t.forEach(function(e){n.doAddItem(e)}),n}return xe(t,e),t.prototype.getItems=function(){return this.items},t.prototype.getEarliestItem=function(){return fe.first(this.getItems())},t.prototype.getLatestItem=function(){return fe.last(this.getItems())},t.prototype.getEarliestTimestamp=function(){return this.getEarliestItem().getTimestamp()},t.prototype.getLatestTimestamp=function(){return this.getLatestItem().getTimestamp()},t.prototype.includesTimestamp=function(e){return a(e,this.getEarliestTimestamp())&&l(e,this.getLatestTimestamp())},t.prototype.occuredBefore=function(e){return o(this.getLatestTimestamp(),e)},t.prototype.occuredBeforeEQ=function(e){return l(this.getLatestTimestamp(),e)},t.prototype.occuredAfter=function(e){return s(this.getLatestTimestamp(),e)},t.prototype.occuredAfterEQ=function(e){return a(this.getLatestTimestamp(),e)},t.prototype.getInsertionIndex=function(e){for(var t=this.getItems(),n=t.length-1;n>=0;n--)if(o(this.items[n],e))return n+1;return n},t.prototype.split=function(e){var t=this.getInsertionIndex(e);return[this.constructNew(this.items.slice(0,t)),this.constructNew(this.items.slice(t))]},t.prototype.doAddItem=function(e){var t=this.getInsertionIndex(e.getTimestamp());return this.items.splice(t,0,e),{insertionIndex:t,item:e}},t.prototype.addItem=function(e){this.emit("item-will-be-added",{group:this,item:e});var t=this.doAddItem(e),n=t.insertionIndex;t.item;return this.emit("item-added",{group:this,item:e,insertionIndex:n}),n},t.prototype.compatibleWith=function(e){return!0},t.prototype.constructNew=function(e){return new t(e)},t.prototype.clearItems=function(){for(var e=0;e<this.items.length;e++)this.removeItem(e),e--},t.prototype.removeItem=function(e){var t=this.items[e];this.emit("item-will-be-removed",{group:this,item:t}),this.items.splice(e,1),this.emit("item-removed",{group:this,item:t})},t}(ge),Oe=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xe(t,e),t.prototype.getDiffSummary=function(){var e=new Map;this.getItems().forEach(function(t){var n=t.getContents();fe.each(n,function(t,n){e.set(n,t)})});var t=this.getEditorStates(),n=new Map;t.forEach(function(e){n.set(e.getEditorID(),e)});var r=[];return e.forEach(function(e,t){var i=n.get(t),o=i.getTitle(),s=e.valueBefore,l=e.valueAfter,a=Ee.unifiedDiff(s.split("\n"),l.split("\n"),{fromfile:o,tofile:o});a.length>0&&(a[0]=a[0].trim()),a.length>1&&(a[1]=a[1].trim()),a=a.join("\n"),r.push({editorState:i,valueBefore:s,valueAfter:l,diff:a})}),r},t.prototype.getEditorStates=function(){return fe.chain(this.getItems()).map(function(e){return e.getEditors()}).flatten().compact().unique().value()},t.prototype.getAuthors=function(){return fe.chain(this.getItems()).map(function(e){return e.getUsers()}).flatten().compact().unique().value()},t.prototype.compatibleWith=function(e){return e instanceof Te},t.prototype.constructNew=function(e){return new t(e)},t}(Pe),Le=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xe(t,e),t.prototype.getSender=function(){return this.getEarliestItem().getSender()},t.prototype.compatibleWith=function(e){return e instanceof Ie&&e.getSender()===this.getSender()},t.prototype.constructNew=function(e){return new t(e)},t.prototype.getEditorVersion=function(){return this.getLatestItem().getEditorVersion()},t}(Pe),Ae=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return xe(t,e),t.prototype.isConnect=function(){return this.getEarliestItem().isConnect()},t.prototype.isDisconnect=function(){return this.getEarliestItem().isDisconnect()},t.prototype.compatibleWith=function(e){return e instanceof _e&&(this.isConnect()&&e.isConnect()||this.isDisconnect()&&e.isDisconnect())},t.prototype.constructNew=function(e){return new t(e)},t.prototype.getUsers=function(){var e=this.getItems().map(function(e){return e.getUser()});return fe.unique(e)},t}(Pe),Re=function(e){function t(t,n,r){var i=e.call(this)||this;return i.channelService=t,i.chatUserList=n,i.editorStateTracker=r,i.messageGroupingTimeThreshold=3e5,i.messageGroups=[],i.chatDocPromise=i.channelService.getShareDBChat(),i.ready=Promise.all([i.chatDocPromise,i.chatUserList.ready,r.ready]).then(function(e){var t=e[0];t.data.messages.forEach(function(e){i.addFromSerializedMessage(e)}),t.on("op",function(e,t){e.forEach(function(e){var t=e.p,n=e.li,r=e.ld;if("messages"===t[0]){var o=i.getMessageGroups(),s=fe.last(o);r&&!fe.isEmpty(r)&&s instanceof Oe?(s.addItem(i.createMessage(n)),s.removeItem(0)):n&&i.addFromSerializedMessage(n)}})})}),i}return xe(t,e),t.prototype.createMessage=function(e){var t=this;if(!fe.has(e,"type"))return null;var n=e.type;if("text"===n){var r=this.chatUserList.getUser(e.uid);return new Ie(r,e.timestamp,e.message,e.editorsVersion,this.editorStateTracker)}if("join"===n){var i=this.chatUserList.getUser(e.uid);return new _e(i,e.timestamp,ce.connect)}if("left"===n){var i=this.chatUserList.getUser(e.uid);return new _e(i,e.timestamp,ce.disconnect)}if("edit"===n){var o=e.users.map(function(e){return t.chatUserList.getUser(e)}),s=e.files.map(function(e){return t.editorStateTracker.getEditorState(e)});return new Te(o,s,e.endTimestamp,e.fileContents)}return console.error(n),null},t.prototype.addFromSerializedMessage=function(e){var t=this.createMessage(e);if(t)return this.addItem(t)},t.prototype.typeMatches=function(e,t){return t instanceof Oe&&e instanceof Te||t instanceof Le&&e instanceof Ie||t instanceof Ae&&e instanceof _e},t.prototype.addItem=function(e){for(var t=this,n=e.getTimestamp(),r=!1,i=this.messageGroups.length-1;i>=0;i--){var o=this.messageGroups[i];if(o.includesTimestamp(n)){if(o.compatibleWith(e)){o.addItem(e),r=!0;break}this.emit("group-will-be-removed",{messageGroup:o,insertionIndex:i}),this.messageGroups.splice(i,1),this.emit("group-removed",{messageGroup:o,insertionIndex:i});var s=o.split(n);s.forEach(function(e,n){t.addGroup(e,i+n)}),i+=s.length}else if(o.occuredBefore(n)){o.compatibleWith(e)&&n<=o.getEarliestTimestamp()+this.messageGroupingTimeThreshold&&(o.addItem(e),r=!0);break}}if(!r){var l=i+1,a=void 0;a=e instanceof Ie?new Le([e]):e instanceof _e?new Ae([e]):new Oe([e]),this.addGroup(a,l)}},t.prototype.addGroup=function(e,t){var n=this;this.emit("group-will-be-added",{messageGroup:e,insertionIndex:t}),this.messageGroups.splice(t,0,e),this.emit("group-added",{messageGroup:e,insertionIndex:t}),e.on("item-will-be-added",function(e){n.emit("item-will-be-added",e)}),e.on("item-added",function(e){n.emit("item-added",e)}),e.on("item-will-be-removed",function(e){n.emit("item-will-be-removed",e)}),e.on("item-removed",function(e){n.emit("item-removed",e)})},t.prototype.getMessageGroups=function(){return this.messageGroups},t.prototype.isEmpty=function(){return 0===this.messageGroups.length},t}(ge),je=n("pXmw"),Me=n("+G9F"),De=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();we.types.map.json0.registerSubtype(Me.type);var Ve=-1,Be=function(e){function t(t){var n=e.call(this)||this;return n.editorState=t,n.cursors=new Map,n}return De(t,e),t.prototype.updateCursor=function(e,t,n){if(!t.getIsMe()){var r=void 0;this.cursors.has(e)?r=this.cursors.get(e):(r={id:e,user:t},this.cursors.set(e,r),this.editorState.getEditorWrapper().addRemoteCursor(r,this));var i=r.pos;r.pos=n,i?this.editorState.getEditorWrapper().updateRemoteCursorPosition(r,this):this.editorState.getEditorWrapper().addRemoteCursorPosition(r,this)}},t.prototype.updateSelection=function(e,t,n){if(!t.getIsMe()){var r=void 0;this.cursors.has(e)?r=this.cursors.get(e):(r={id:e,user:t},this.cursors.set(e,{id:e,user:t}),this.editorState.getEditorWrapper().addRemoteCursor(r,this));var i=r.range;r.range=n,i?this.editorState.getEditorWrapper().updateRemoteCursorSelection(r,this):this.editorState.getEditorWrapper().addRemoteCursorSelection(r,this)}},t.prototype.removeCursor=function(e,t){this.cursors.has(e)&&(this.editorState.getEditorWrapper().removeRemoteCursor(this.cursors.get(e),this),this.cursors.delete(e))},t.prototype.getCursors=function(){return Array.from(this.cursors.values())},t.prototype.serialize=function(){return{cursors:this.cursors}},t.prototype.removeUserCursors=function(e){var t=this;this.cursors.forEach(function(n,r){n.user.id===e.id&&t.removeCursor(r,e)})},t.prototype.hideCursors=function(){this.editorState.getEditorWrapper().hideRemoteCursors()},t.prototype.showCursors=function(){this.editorState.getEditorWrapper().showRemoteCursors(this)},t}(ge),Fe=function(){function e(e,t,n,r){var i=this;this.editorWrapper=t,this.userList=n,this.isObserver=r,this.selections={},this.remoteCursors=new Be(this),this.deltaPointer=-1,this.currentVersion=Ve;var o=fe.extend({isOpen:!0,deltas:[],cursors:[]},e);this.isOpen=o.isOpen,this.title=o.title,this.editorWrapper.setEditorState(this),setTimeout(function(){i.editorWrapper.setGrammar(o.grammarName)},100),this.editorID=o.id,o.cursors.forEach(function(e){})}return e.prototype.setTitle=function(e){this.title=e},e.prototype.setIsOpen=function(e){this.isOpen=e},e.prototype.setIsModified=function(e){this.modified=e},e.prototype.getEditorWrapper=function(){return this.editorWrapper},e.prototype.getTitle=function(){return this.title},e.prototype.getIsOpen=function(){return this.isOpen},e.prototype.getRemoteCursors=function(){return this.remoteCursors},e.prototype.getEditorID=function(){return this.editorID},e.prototype.getIsModified=function(){return this.modified},e.prototype.getIsObserver=function(){return this.isObserver},e.prototype.setText=function(e){this.editorWrapper.setText(e)},e.prototype.addHighlight=function(e,t){return this.getEditorWrapper().addHighlight(e,t)},e.prototype.removeHighlight=function(e,t){return this.getEditorWrapper().removeHighlight(e,t)},e.prototype.focus=function(e,t){return this.getEditorWrapper().focus(e,t)},e.prototype.removeUserCursors=function(e){this.remoteCursors.removeUserCursors(e)},e.prototype.getCurrentVersion=function(){return this.currentVersion},e.prototype.setVersion=function(e,t){this.currentVersion=e;var n=this.getEditorWrapper();this.isLatestVersion()?(console.log(this.isObserver),this.isObserver?n.setReadOnly(!0,t):(n.resumeEditorBinding(),n.setReadOnly(!1,t),this.remoteCursors.showCursors())):(n.suspendEditorBinding(),n.setReadOnly(!0,t),this.remoteCursors.hideCursors())},e.prototype.isLatestVersion=function(){return this.getCurrentVersion()===Ve},e}(),Ne=function(e){function t(t,n,r,i){var o=e.call(this)||this;o.EditorWrapperClass=t,o.channelCommunicationService=n,o.userList=r,o.isObserver=i,o.editorStates=new Map,o.currentVersion=Ve,o.currentTimestamp=Ve;var s=o.channelCommunicationService.getShareDBEditors().then(function(e){e.data.forEach(function(e){o.onEditorOpened(e,!0)}),e.on("op",function(e){e.forEach(function(e){if(1===e.p.length&&fe.has(e,"li")){var t=e.li;o.onEditorOpened(t,!0)}})})}),l=o.channelCommunicationService.getShareDBCursors().then(function(e){fe.each(e.data,function(e,t){var n=o.getEditorState(t);if(n){var r=n.getRemoteCursors();fe.each(e.userCursors,function(e,t){var n=e.newBufferPosition,i=o.userList.getUser(t);i&&r.updateCursor(i.getID(),i,n)}),fe.each(e.userSelections,function(e,t){var n=e.newRange,i=o.userList.getUser(t);i&&r.updateSelection(i.getID(),i,n)})}}),e.on("op",function(t){t.forEach(function(t){var n=t.p,r=t.oi,i=t.od,s=n[0],l=o.getEditorState(s);if(l){var a=l.getRemoteCursors();if(3===n.length){var u="userCursors"===n[1],c="userSelections"===n[1],p=n[2],h=o.userList.getUser(p);r?u?a.updateCursor(h.getID(),h,r.newBufferPosition):c&&a.updateSelection(h.getID(),h,r.newRange):i&&a.removeUserCursors(h)}else 1===n.length&&(fe.each(e.data[s].userCursors,function(e,t){var n=e.newBufferPosition,r=o.userList.getUser(t);a.updateCursor(r.getID(),r,n)}),fe.each(e.data[s].userSelections,function(e,t){var n=e.newRange,r=o.userList.getUser(t);a.updateSelection(r.getID(),r,n)}))}else console.error("Could not find editor "+s)})})});return o.ready=Promise.all([s,l]).then(function(){return!0}),o}return De(t,e),t.prototype.createEditor=function(e,t,n,r,i){var o=this;return this.channelCommunicationService.getShareDBEditors().then(function(o){var s={title:t,id:e,contents:n,grammarName:r,modified:i,userCursors:{},userSelections:{}};return new Promise(function(e,t){o.submitOp({p:[o.data.length],li:s},function(n){n&&t(n),e(s)})})}).then(function(e){return o.onEditorOpened(e,!0)})},t.prototype.getAllEditors=function(){return Array.from(this.editorStates.values())},t.prototype.getEditorState=function(e){return this.editorStates.has(e)?this.editorStates.get(e):null},t.prototype.getActiveEditors=function(){return fe.filter(this.getAllEditors(),function(e){return e.getIsOpen()})},t.prototype.onEditorOpened=function(e,t){var n=e.id;if(this.editorStates.has(n))return this.editorStates.get(n);var r=new Fe(e,new this.EditorWrapperClass(e,this.channelCommunicationService),this.userList,this.isObserver);return this.editorStates.set(n,r),r},t.prototype.removeUserCursors=function(e){this.editorStates.forEach(function(t){t.removeUserCursors(e)})},t.prototype.addHighlight=function(e,t,n,r,i){void 0===i&&(i={});var o=this.getEditorState(e);return this.setVersion(n,r,i),o?o.addHighlight(t,i):-1},t.prototype.removeHighlight=function(e,t,n){void 0===n&&(n={});var r=this.getEditorState(e);return!!r&&r.removeHighlight(t,n)},t.prototype.focus=function(e,t,n,r,i){void 0===i&&(i={});var o=this.getEditorState(e);return this.setVersion(n,r,i),!!o&&o.focus(t,i)},t.prototype.fuzzyMatch=function(e){var t=this.getAllEditors(),n=new je(fe.map(t,function(e){return e.getTitle()})),r=n.get(e);if(r){var i=r[0][1],o=fe.filter(this.getAllEditors(),function(e){return e.getTitle()===i});if(o.length>0)return o[0]}return null},t.prototype.getCurrentTimestamp=function(){return this.currentTimestamp},t.prototype.getCurrentVersion=function(){return this.currentVersion},t.prototype.isAtLatest=function(){return this.getCurrentVersion()===Ve},t.prototype.setVersion=function(e,t,n){var r=this;e===Ve?(this.currentVersion=e,this.currentTimestamp=t,fe.each(this.getAllEditors(),function(e){e.setVersion(r.currentVersion,n)}),this.emit("timestampChanged",{version:this.currentVersion})):this.channelCommunicationService.getEditorVersion(e).then(function(i){r.currentVersion=e,r.currentTimestamp=t,fe.each(r.getAllEditors(),function(e){var t=i.get(e.getEditorID()),o=t?t.contents:"";e.setVersion(r.currentVersion,n),e.setText(o)}),r.emit("timestampChanged",{version:r.currentVersion})})},t.prototype.toLatestVersion=function(e){this.setVersion(Ve,Ve,e)},t}(ge),ze=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),He=function(e){function t(t,n,r,i,o){var s=e.call(this)||this;return s.commService=t,s.channelName=n,s.channelID=r,s.isObserver=i,s._isRoot=!1,s.cachedEditorVersions=new Map,s.commLayer=t.commLayer,s.channelCommLayer=s.commLayer.getNamespace(s.getChannelName(),s.channelID),s.chatDoc=s.createDocSubscription("chat"),s.editorsDoc=s.createDocSubscription("editors"),s.cursorsDoc=s.createDocSubscription("cursors"),s.userList=new be(s.getMyID(),s),s.editorStateTracker=new Ne(o,s,s.userList,s.isObserver),s.messageGroups=new Re(s,s.userList,s.editorStateTracker),s}return ze(t,e),t.prototype.getUserList=function(){return this.userList},t.prototype.getEditorStateTracker=function(){return this.editorStateTracker},t.prototype.getMessageGroups=function(){return this.messageGroups},t.prototype.createDocSubscription=function(e){return this.channelCommLayer.then(function(t){return t.getShareDBObject(e)}).then(function(e){return new Promise(function(t,n){e.subscribe(function(r){r?n(r):t(e)})})})},t.prototype.getMyID=function(){return this.channelCommLayer.then(function(e){return e.getID()})},t.prototype.getShareDBChat=function(){return this.chatDoc},t.prototype.getShareDBEditors=function(){return this.editorsDoc},t.prototype.getShareDBCursors=function(){return this.cursorsDoc},t.prototype.getEditorVersion=function(e){if(this.cachedEditorVersions.has(e))return this.cachedEditorVersions.get(e);var t=this.channelCommLayer.then(function(t){return t.pemit("get-editors-values",e)}).then(function(e){var t=new Map;return fe.each(e,function(e){t.set(e.id,e)}),t});return this.cachedEditorVersions.set(e,t),t},t.prototype.ready=function(){return Promise.all([this.channelCommLayer,this.editorStateTracker.ready,this.userList.ready,this.messageGroups.ready])},t.prototype.emitSave=function(e){this.emit("save",fe.extend({sender:this.userList.getMe(),timestamp:this.getTimestamp()},e))},t.prototype.emitEditorOpened=function(e){this.editorStateTracker.onEditorOpened(e,!0);this.emit("editor-opened",e)},t.prototype.sendTextMessage=function(e){var t=this;this.isObserver||Promise.all([this.getMyID(),this.getShareDBChat(),this.getShareDBEditors()]).then(function(n){var r=n[0],i=n[1],o=n[2],s={uid:r,type:"text",message:e,timestamp:t.getTimestamp(),editorsVersion:o.version};i.submitOp([{p:["messages",i.data.messages.length],li:s}])})},t.prototype.sendTypingStatus=function(e){this.isObserver||Promise.all([this.getMyID(),this.getShareDBChat()]).then(function(t){var n=t[0],r=t[1],i=r.data.activeUsers[n].info.typingStatus;r.submitOp([{p:["activeUsers",n,"info","typingStatus"],od:i,oi:e}])})},t.prototype.emitEditorChanged=function(e,t){var n=this;void 0===t&&(t=!0),this.channelCommLayer.then(function(r){var i=r.getID();return fe.extend(e,{timestamp:n.getTimestamp(),uid:i,remote:t}),r.pemit("editor-event",e)})},t.prototype.onCursorPositionChanged=function(e){this.isObserver||Promise.all([this.getMyID(),this.getShareDBCursors()]).then(function(t){var n=t[0],r=t[1],i=e.editorID;if(fe.has(r.data,i))r.submitOp({p:[i,"userCursors",n],oi:e,od:r.data[i].userCursors[n]});else{var o={userCursors:{},userSelections:{}};o.userCursors[n]=e,r.submitOp({p:[i],oi:o})}})},t.prototype.onCursorSelectionChanged=function(e){this.isObserver||Promise.all([this.getMyID(),this.getShareDBCursors()]).then(function(t){var n=t[0],r=t[1],i=e.editorID;if(fe.has(r.data,i))r.submitOp({p:[i,"userSelections",n],oi:e,od:r.data[i].userSelections[n]});else{var o={userCursors:{},userSelections:{}};o.userSelections[n]=e,r.submitOp({p:[i],oi:o})}})},t.prototype.emitTerminalData=function(e,t){var n=this;void 0===t&&(t=!1),this.channelCommLayer.then(function(r){return r.pemit("terminal-data",{timestamp:n.getTimestamp(),data:e,remote:t})})},t.prototype.writeToTerminal=function(e){var t=this;this.channelCommLayer.then(function(n){return n.pemit("write-to-terminal",{timestamp:t.getTimestamp(),uid:t.myID,remote:!0,contents:e})})},t.prototype.getURL=function(){return"https://chat.codes/"+this.getChannelName()},t.prototype.destroy=function(){this.channelCommLayer.then(function(e){e.destroy()})},t.prototype.getActiveEditors=function(){return this.editorStateTracker.getActiveEditors()},t.prototype.getTimestamp=function(){return(new Date).getTime()},t.prototype.getChannelName=function(){return this.channelName},t.prototype.getIsObserver=function(){return this.isObserver},t}(ge),Ue=function(){function e(e,t){this.EditorWrapperClass=t,this.clients={},this.commLayer=new ke(e)}return e.prototype.createChannelWithName=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n=!1);var r=new He(this,e,t,n,this.EditorWrapperClass);return this.clients[e]=r,r},e.prototype.destroyChannel=function(e){if(this.clients[e]){this.clients[e].destroy(),delete this.clients[e]}},e.prototype.destroy=function(){var e=this;this.commLayer.destroy(),fe.each(this.clients,function(t,n){e.destroyChannel(n)})},e}(),Ge=n("qbdv"),qe=n("sHR4"),$e=n("Qxcm"),We=n.n($e),Ke=function(){function e(e){var t=this;this.suppress=!1,this.listening=!1,this.session=e.session,this.newline=this.session.getDocument().getNewLineCharacter(),this.path=e.path,this.doc=e.doc,this.pluginWS=e.pluginWS,this.plugins=e.plugins||[],this.logger=new We.a("shareace"),this.plugins.forEach(function(e){e(t.pluginWS,t.editor)}),this.setInitialValue(),this.$onLocalChange=this.onLocalChange.bind(this),this.$onRemoteChange=this.onRemoteChange.bind(this),this.listen()}return e.prototype.setInitialValue=function(){this.suppress=!0;for(var e=this.doc.data,t=0;t<this.path.length;t++)e=e[this.path[t]];this.session.setValue(e),this.suppress=!1},e.prototype.listen=function(){this.listening||(this.listening=!0,this.session.on("change",this.$onLocalChange),this.doc.on("op",this.$onRemoteChange))},e.prototype.unlisten=function(){this.listening&&(this.listening=!1,this.session.removeListener("change",this.$onLocalChange),this.doc.removeListener("op",this.$onRemoteChange))},e.prototype.deltaTransform=function(e){var t=this.session.getDocument(),n={},r=t.positionToIndex(e.start),i=t.positionToIndex(e.end);n.p=this.path.concat(r),this.logger.log("start: "+r+" end: "+i);var o;if("insert"===e.action)o="si";else{if("remove"!==e.action)throw new Error("action "+o+" not supported");o="sd"}var s=e.lines.join("\n");return n[o]=s,n},e.prototype.opTransform=function(e){function t(e){var t,r,i,o=e.p[e.p.length-1],s=n.session.doc.indexToPosition(o,0),l=s;if("sd"in e){t="remove",r=e.sd.split("\n");var a=r.reduce(function(e,t){return e+t.length},r.length-1);i=n.session.doc.indexToPosition(o+a,0)}else{if(!("si"in e))throw new Error("Invalid Operation: "+JSON.stringify(e));t="insert",r=e.si.split("\n"),i=1===r.length?{row:l.row,column:l.column+e.si.length}:{row:l.row+(r.length-1),column:r[r.length-1].length}}return{start:l,end:i,action:t,lines:r}}var n=this;return e.map(t)},e.prototype.onLocalChange=function(e){var t=this;if(this.logger.log("*local*: fired "+Date.now()),this.logger.log("*local*: delta received: "+JSON.stringify(e)),this.suppress)return void this.logger.log("*local*: local delta, _skipping_");var n=this.deltaTransform(e);this.logger.log("*local*: transformed op: "+JSON.stringify(n));var r=function(e){if(e)throw e;t.logger.log("*local*: op submitted")};this.doc.submitOp(n,{source:this},r)},e.prototype.onRemoteChange=function(e,t){this.logger.log("*remote*: fired "+Date.now());var n=this,r=e[0].p.slice(0,e[0].p.length-1).toString();if(this.logger.log(r),t===n)return void this.logger.log("*remote*: op origin is self; _skipping_");if(r!==this.path.toString())return void this.logger.log("*remote*: not from my path; _skipping_");var i=this.opTransform(e);this.logger.log("*remote*: op received: "+JSON.stringify(e)),this.logger.log("*remote*: transformed delta: "+JSON.stringify(i)),n.suppress=!0,n.session.getDocument().applyDeltas(i),n.suppress=!1,this.logger.log("*remote*: session value"),this.logger.log(JSON.stringify(this.session.getValue())),this.logger.log("*remote*: delta applied")},e}(),Qe=function(){function e(e,t){var n=this;this.channelCommunicationService=t,this.showingRemoteCursors=!0,this.session=new(ace.require("ace/edit_session").EditSession)(""),this.cursorMarkers={},this.clazz="remoteCursor";var r=e.id;this.channelCommunicationService.getShareDBEditors().then(function(e){for(var t=0;t<e.data.length&&e.data[t].id!==r;t++);var i=[t,"contents"];n.sdbBinding=new Ke({doc:e,path:i,session:n.session}),n.channelCommunicationService.getIsObserver()&&(n.sdbBinding.setInitialValue(),n.sdbBinding.unlisten())}),this.session.forEditorID=r,this.session.addDynamicMarker(this);var i=this.session.getSelection();i.on("changeCursor",function(n){var r=i.getCursor();t.onCursorPositionChanged({editorID:e.id,type:"change-position",newBufferPosition:[r.row,r.column]})}),i.on("changeSelection",function(n){var r=qe.map(i.getAllRanges(),function(e){return{start:[e.start.row,e.start.column],end:[e.end.row,e.end.column]}});t.onCursorSelectionChanged({editorID:e.id,newRange:r[0],type:"change-selection"})})}return e.prototype.suspendEditorBinding=function(){this.sdbBinding.unlisten()},e.prototype.resumeEditorBinding=function(){this.sdbBinding.setInitialValue(),this.sdbBinding.listen()},e.prototype.setEditorState=function(e){this.editorState=e},e.prototype.setGrammar=function(e){this.session.setMode(this.getAceGrammarName(e))},e.prototype.replaceText=function(e,t){var n=this.getRangeFromSerializedRange(e),r=this.session.getTextRange(n),i={start:e.start,end:e.end},o=this.session.replace(n,t);return i.end=[o.row,o.column],{oldText:r,newRange:i}},e.prototype.setText=function(e){this.session.setValue(e)},e.prototype.getAnchor=function(e){var t=this.session.getDocument();return{start:this.getAnchorFromLocation(t,e.start),end:this.getAnchorFromLocation(t,e.end)}},e.prototype.getCurrentAnchorPosition=function(e){return{start:[e.start.row,e.start.column],end:[e.end.row,e.end.column]}},e.prototype.getRangeFromSerializedRange=function(e){var t=ace.require("ace/range").Range,n=e.start[0],r=e.start[1],i=e.end[0],o=e.end[1];return r<0&&(r=0),o<0&&(i+=1,o=0),new t(n,r,i,o)},e.prototype.getAnchorFromLocation=function(e,t){return new(0,ace.require("ace/anchor").Anchor)(e,t[0],t[1])},e.prototype.getAceGrammarName=function(e){return"TypeScript"===e?"ace/mode/typescript":"Null Grammar"===e?"":"JavaScript"===e?"ace/mode/javascript":"HTML"===e?"ace/mode/html":"CSS"===e?"ace/mode/css":"JSON"===e?"ace/mode/json":"PHP"===e?"ace/mode/php":"Python"===e?"ace/mode/python":"Markdown"===e?"ace/mode/markdown":""},e.prototype.getSession=function(){return this.session},e.prototype.addRemoteCursor=function(e,t){},e.prototype.addRemoteCursorSelection=function(e,t){},e.prototype.addRemoteCursorPosition=function(e,t){this.session._signal("changeBackMarker")},e.prototype.updateRemoteCursorPosition=function(e,t){this.session._signal("changeBackMarker")},e.prototype.removeRemoteCursor=function(e,t){var n=e.id,r=(e.range,e.user,this.cursorMarkers[n]);r&&(this.session.removeMarker(r),delete this.cursorMarkers[n])},e.prototype.updateRemoteCursorSelection=function(e,t){if(this.showingRemoteCursors){var n=e.id,r=e.range,i=e.user,o=this.cursorMarkers[n];o&&(this.session.removeMarker(o),delete this.cursorMarkers[n]);var s=this.getRangeFromSerializedRange(r),l=this.session.addMarker(s,this.clazz+(i?" user-"+i.colorIndex:""),!1);this.cursorMarkers[n]=l}},e.prototype.saveFile=function(){},e.prototype.setReadOnly=function(e,t){t.editor.setReadOnly(e)},e.prototype.addHighlight=function(e){var t=this.getRangeFromSerializedRange(e);return this.session.addMarker(t,this.clazz+" user-1",!1)},e.prototype.removeHighlight=function(e){this.session.removeMarker(e)},e.prototype.focus=function(e,t){var n=this,r=t.editor,i=this.getRangeFromSerializedRange(e),o=this.session.addMarker(i,this.clazz+" user-1",!1),s=Math.round((i.start.row+i.end.row)/2);r.scrollToLine(s,!0,!0,function(){}),setTimeout(function(){n.session.removeMarker(o)},2e3)},e.prototype.hideRemoteCursors=function(){var e=this;this.showingRemoteCursors=!1,this.session._signal("changeBackMarker"),qe.each(this.cursorMarkers,function(t,n){e.session.removeMarker(t),delete e.cursorMarkers[n]})},e.prototype.showRemoteCursors=function(e){var t=this;if(this.showingRemoteCursors=!0,this.session._signal("changeBackMarker"),e){var n=e.getCursors();qe.each(n,function(n){n.range;t.addRemoteCursorSelection(n,e),t.updateRemoteCursorSelection(n,e)})}},e.prototype.update=function(e,t,n,r){var i=this;if(this.showingRemoteCursors){var o=r.firstRow,s=r.lastRow;this.editorState.getRemoteCursors().getCursors().forEach(function(l){var a=l.pos;if(!(!a||a.row<o||a.row>s)){var u=n.documentToScreenPosition.apply(n,a),c=r.lineHeight,p=r.characterWidth,h=t.$getTop(u.row,r),d=t.$padding+u.column*p,f=l.user;e.push("<div class='carret "+i.clazz+(f?" user-"+f.getColorIndex():"")+"' style='","height:",c,"px;","top:",h,"px;","left:",d,"px;",p,"px'></div>")}})}},e}(),Je=function(){function e(){this.at_bottom=!1,this.name="",this.hasName=!1,this.connected=!1,this.isObserver=!1;var e=qe.compact(location.pathname.substring(1).split("/"));e.length>0&&(this.channelName=Ge.c.stripTrailingSlash(e[0])),e.length>1&&(this.channelID=Ge.c.stripTrailingSlash(e[1]),this.isObserver=!0,this.setName(null))}return e.prototype.ngOnInit=function(){},e.prototype.editorCursorSelectionChanged=function(e){this.chatinput&&this.chatinput.onEditorCursorSelectionChanged(e)},e.prototype.setName=function(e){var t=this;this.name=e,this.hasName=!0,this.commLayer=new Ue({username:this.name,host:window.location.host},Qe),this.channelCommLayer=this.commLayer.createChannelWithName(this.channelName,this.channelID,this.isObserver),this.editorStateTracker=this.channelCommLayer.getEditorStateTracker(),this.channelCommLayer.ready().then(function(e){t.connected=!0})},e.prototype.getChatURL=function(){return"chat.codes/"+this.channelName},e.prototype.sendTextMessage=function(e){this.channelCommLayer.sendTextMessage(e)},e.prototype.updateTypingStatus=function(e){this.channelCommLayer.sendTypingStatus(e)},e.prototype.getActiveEditors=function(){return this.channelCommLayer.getActiveEditors()},e.prototype.createNewFile=function(){var e=this;return this.channelCommLayer.ready().then(function(){return e.channelCommLayer.getShareDBEditors()}).then(function(t){var n=u(),r="file-"+(t.data.length+1);return e.editorStateTracker.createEditor(n,r,"","Python",!1)}).then(function(t){return e.codeEditor.selectFile(t),t})},e.ctorParameters=function(){return[]},e}(),Ze=["img.logo{height:40px}.container-fluid{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:100%}#content_row{-webkit-box-flex:1;-ms-flex-positive:1;flex-grow:1}#input_row,#list_row,.navbar{-webkit-box-flex:0;-ms-flex-positive:0;flex-grow:0}#list_row{margin-top:15px}#list_row,.navbar{min-height:42px}#input_row{height:70px;min-height:48px;margin-bottom:15px}chat-messages,code-editor,terminal{height:100%}.modifiedFlag.modified{border-radius:5px;height:10px;width:10px;display:inline-block;background-color:#aaa}ul.members{list-style:none;padding:0;display:inline-block}li.member{display:inline-block;margin-left:5px;margin-right:5px}.message{color:#333}.message p{margin:0;line-height:normal}.header .time{color:#888}.user-1{color:#007bff}.user-2{color:#dc3545}.user-3{color:#fd7e14}.user-4{color:#ffc107}.user-5{color:#28a745}"],Ye=n("mKy5"),Xe=n("LxRk"),et=[""],tt=function(){function e(){this.onEnter=new pe.EventEmitter,this.value=localStorage.getItem("default-username")||"",this.feedback="",this.feedbackClass="",this.MAX_LENGTH=20}return e.prototype.ngOnInit=function(){var e=this.inp.nativeElement;setTimeout(function(){e.focus(),e.select()},100)},e.prototype.valueChange=function(e){var t=e.trim();0===t.length?(this.feedback="Must be more than 0 characters",this.feedbackClass="error"):t.length>this.MAX_LENGTH?(this.feedback="Must be "+this.MAX_LENGTH+" characters or fewer",this.feedbackClass="error"):(this.feedback="",this.feedbackClass="")},e.prototype.onKeydown=function(e){13===e.keyCode&&this.doSubmit()},e.prototype.doSubmit=function(){var e=this.value.trim();e.length>0&&e.length<this.MAX_LENGTH&&(localStorage.setItem("default-username",e),this.onEnter.emit(e))},e}(),nt=n("bm2B"),rt=[et],it=pe["\u0275crt"]({encapsulation:0,styles:rt,data:{}}),ot=(pe["\u0275ccf"]("name-entry",tt,p,{},{onEnter:"onEnter"},[]),['.user[_ngcontent-%COMP%]{font-size:1em;-webkit-transform:rotate(0deg);-moz-transform:rotate(0deg);background-color:#eee}.user.typing[_ngcontent-%COMP%]{-webkit-animation:jiggle .2s infinite;-moz-animation-duration:.2s;-moz-animation-name:jiggle;-moz-animation-iteration-count:infinite;-webkit-transform:rotate(-3deg);-moz-transform:rotate(-3deg)}.user.typed[_ngcontent-%COMP%]:after, .user.typing[_ngcontent-%COMP%]:after{content:"..."}@-webkit-keyframes jiggle{0%{-webkit-transform:rotate(-1deg)}50%{-webkit-transform:rotate(1deg)}}.user.isme.user-1[_ngcontent-%COMP%]{border:1px solid #007bff}.user.isme.user-2[_ngcontent-%COMP%]{border:1px solid #dc3545}.user.isme.user-3[_ngcontent-%COMP%]{border:1px solid #fd7e14}.user.isme.user-4[_ngcontent-%COMP%]{border:1px solid #ffc107}.user.isme.user-5[_ngcontent-%COMP%]{border:1px solid #28a745}.user-1[_ngcontent-%COMP%]{color:#007bff}.user-2[_ngcontent-%COMP%]{color:#dc3545}.user-3[_ngcontent-%COMP%]{color:#fd7e14}.user-4[_ngcontent-%COMP%]{color:#ffc107}.user-5[_ngcontent-%COMP%]{color:#28a745}']),st=function(){function e(){this.typingStatus="IDLE"}return e.prototype.ngOnInit=function(){var e=this;this.typingStatus=this.user.getTypingStatus(),this.user.on("typingStatus",function(t){setTimeout(function(){e.typingStatus=e.user.getTypingStatus()},0)})},e}(),lt=[ot],at=pe["\u0275crt"]({encapsulation:0,styles:lt,data:{}}),ut=(pe["\u0275ccf"]("user-display",st,d,{user:"user"},{},[]),[".terminalContainer[_ngcontent-%COMP%]{height:100%;background-color:#333}.run[_ngcontent-%COMP%]{position:absolute;right:30px;z-index:5}"]),ct=n("ybJG"),pt=n("YGE9"),ht=function(){function e(){}return e.prototype.ngOnInit=function(){ct.loadAddon("fit"),this.term=new ct,this.term.open(this.terminalElement.nativeElement,!1),this.term.fit()},e.prototype.run=function(){function e(e){if(void 0===pt.builtinFiles||void 0===pt.builtinFiles.files[e])throw"File not found: '"+e+"'";return pt.builtinFiles.files[e]}var t=this;this.commLayer.getEditorStateTracker();pt.python3=!0,pt.configure({output:function(e){t.term.write(e)},read:e});var n=this.editor.getEditorInstance(),r=n.getValue();this.term.clear(),this.term.reset(),pt.misceval.asyncToPromise(function(){return pt.importMainWithBody("<stdin>",!1,r,!0)}).then(function(e){},function(e){t.term.writeln(e.toString())})},e.ctorParameters=function(){return[]},e}(),dt=[ut],ft=pe["\u0275crt"]({encapsulation:0,styles:dt,data:{}}),gt=(pe["\u0275ccf"]("python-output",ht,g,{commLayer:"commLayer",editor:"editor"},{},[]),["textarea[_ngcontent-%COMP%]{width:100%}ace-editor[_ngcontent-%COMP%]{height:100%}"]),mt={IDLE:"IDLE",ACTIVE_TYPING:"ACTIVE_TYPING",IDLE_TYPED:"IDLE_TYPED"},vt=function(){function e(){this.messageChanged=new pe.EventEmitter,this.send=new pe.EventEmitter,this.typing=new pe.EventEmitter,this.typingTimeout=3e3,this.typingStatus=mt.IDLE,this.activeTypingTimeout=-1}return e.prototype.ngOnInit=function(){var e=this.editor.getEditor(),t=e.getSession();e.$blockScrolling=1/0,e.setHighlightActiveLine(!1),e.renderer.setShowGutter(!1),t.setUseWrapMode(!0),t.setWrapLimitRange(35,35),t.setOption("indentedSoftWrap",!1),t.setMode("markdown"),setTimeout(function(){e.focus()},100)},e.prototype.onTextareaChange=function(e){""===e?(this.setTypingStatus(mt.IDLE),this.clearActiveTypingTimeout()):(this.setTypingStatus(mt.ACTIVE_TYPING),this.resetActiveTypingTimeout()),this.messageChanged.emit(e)},e.prototype.onTextareaKeydown=function(e){if(13===e.keyCode){var t=this.editor.getEditor(),n=t.getValue();e.preventDefault(),e.stopPropagation(),this.setTypingStatus(mt.IDLE),this.clearActiveTypingTimeout(),n&&(t.setValue(""),this.send.emit(n))}},e.prototype.rangeFromStartAndEnd=function(e,t){return new(0,ace.require("ace/range").Range)(qe.has(e,"row")?e.row:e[0],qe.has(e,"column")?e.column:e[1],qe.has(t,"row")?t.row:t[0],qe.has(t,"column")?t.column:t[1])},e.prototype.onEditorCursorSelectionChanged=function(e){var t,n=this,r=ace.require("ace/search").Search,i=(ace.require("ace/range").Range,this.editor.getEditor()),o=i.getSession(),s=(o.getDocument(),o.getSelection()),l=e.editor,a=l.getSession(),u=(a.getDocument(),this.rangeFromStartAndEnd(e.newRange.start,e.newRange.end));if(u.isEmpty())t=!1;else{var c=u.start,p=u.end,h=e.fileName;t=0===u.start.column&&0===u.end.column?u.start.row===u.end.row-1?h+":L"+c.row:h+":L"+c.row+"-L"+(p.row-1):h+":L"+c.row+","+c.column+"-L"+p.row+","+p.column}var d=o.getSelection().getRange(),f=new RegExp("\\[(.*)\\]s*\\((.*)\\)"),g=!1,v=new r;v.set({regExp:!0,needle:f});var y=v.findAll(o);if(qe.each(y,function(e){if(e.intersects(d)){if(e.isEqual(d))if(t){var i=m(a.getTextRange(u).replace(new RegExp("\n","g")," "),10),l=o.replace(e,"[`"+i+"`]("+t+")");s.setSelectionRange(n.rangeFromStartAndEnd(e.start,l))}else{var l=o.replace(e,"");s.setSelectionRange(n.rangeFromStartAndEnd(e.start,l))}else{var c=o.getTextRange(e).match(f),p=c[1],h=c[2];if(t){var v=new r;v.set({regExp:!1,needle:"("+h+")",backwards:!0,range:e});var y=v.find(o);y&&o.replace(y,"("+t+")");var b=new r;b.set({regExp:!1,needle:""+p,range:e});var w=b.find(o);w&&s.setSelectionRange(w)}else{var l=o.replace(e,""+p);s.setSelectionRange(n.rangeFromStartAndEnd(e.start,l))}}g=!0}}),t&&!g)if(d.isEmpty()){var b=m(a.getTextRange(u).replace(new RegExp("\n","g")," "),10),w=o.replace(d,"[`"+b+"`]("+t+")");s.setSelectionRange(this.rangeFromStartAndEnd(d.start,w))}else{var S=o.insert(d.start,"["),w=qe.extend({},d.end,{column:d.end.column+1});o.insert(w,"]("+t+")");s.setSelectionRange(this.rangeFromStartAndEnd(S,w))}},e.prototype.setTypingStatus=function(e){return this.typingStatus!=e&&(this.typingStatus=e,this.typing.emit(this.typingStatus)),this.typingStatus},e.prototype.resetActiveTypingTimeout=function(){this.clearActiveTypingTimeout(),this.setActiveTypingTimeout()},e.prototype.setActiveTypingTimeout=function(){var e=this;this.activeTypingTimeout=window.setTimeout(function(){e.setTypingStatus(mt.IDLE_TYPED)},this.typingTimeout)},e.prototype.clearActiveTypingTimeout=function(){this.hasActiveTypingTimeout()&&(window.clearTimeout(this.activeTypingTimeout),this.activeTypingTimeout=-1)},e.prototype.hasActiveTypingTimeout=function(){return this.activeTypingTimeout>=0},e}(),yt=n("cqgc"),bt=n("8ymd"),wt=[gt],St=pe["\u0275crt"]({encapsulation:0,styles:wt,data:{}}),kt=(pe["\u0275ccf"]("chat-input",vt,y,{},{messageChanged:"messageChanged",send:"send",typing:"typing"},[]),["ace-editor[_ngcontent-%COMP%]{height:100%;border-right:1px solid #eee;border-bottom:1px solid #eee}ace-editor.locked[_ngcontent-%COMP%]{background:url(lock_icon.39bdb0d99bcb31086006.svg) 50%;background-size:20%;background-repeat:no-repeat}.message[_ngcontent-%COMP%]{position:absolute;right:15px;top:-40px;font-size:.8em;z-index:99;background-color:#eee;padding:5px;border:1px solid #ccc;opacity:.8;color:#999}.no-editor-open[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;font-size:2em;color:#aaa;font-weight:lighter}"]),Ct=n("sexv"),Et=function(){function e(){this.parens=!1}return e.ctorParameters=function(){return[]},e}(),xt=[],_t=pe["\u0275crt"]({encapsulation:2,styles:xt,data:{}}),Tt=(pe["\u0275ccf"]("timestamp",Et,w,{t:"t",parens:"parens"},{},[]),function(){function e(){this.atomIDToEditSessionMap={},this.files=[],this.selectedEditor=!1,this.editorChanged=new pe.EventEmitter,this.cursorPositionChanged=new pe.EventEmitter,this.cursorSelectionChanged=new pe.EventEmitter}return e.prototype.updatePositionsFromAnchor=function(e){var t=e.oldRangeStartAnchor.getPosition(),n=e.oldRangeEndAnchor.getPosition(),r=e.newRangeStartAnchor.getPosition(),i=e.newRangeEndAnchor.getPosition();return e.oldRange.start=[t.row,t.column],e.oldRange.end=[n.row,n.column],e.newRange.start=[r.row,r.column],e.newRange.end=[i.row,i.column],e},e.prototype.ngOnInit=function(){var e=this;this.editorStateTracker=this.commLayer.getEditorStateTracker();var t=this.editor.getEditor();t.$blockScrolling=1/0,t.commands.addCommand({name:"saveContents",bindKey:{win:"Ctrl-s",mac:"Command-s"},exec:function(e){var t=e.getSession();t.forEditorID}}),this.isObserver?t.setReadOnly(!0):t.on("change",function(n){var r=t.curOp;if(r&&r.command&&r.command.name){var i=t.getSession();e.commLayer.emitEditorChanged({id:i.forEditorID,type:"edit"})}});var n=this.editorStateTracker.getActiveEditors();n.length>0&&this.selectFile(n[0])},e.prototype.getTimestamp=function(){return(new Date).getTime()},e.prototype.getEditorInstance=function(){return this.editor.getEditor()},e.prototype.selectFile=function(e){var t=this;this.selectedEditor&&(this.selectedEditor.selected=!1);var n=e.getEditorWrapper(),r=n.getSession();e.selected=!0;var i=this.getEditorInstance();if(i.setSession(r),this.selectedEditor=e,this.isObserver)i.setReadOnly(!0);else{var o=r.getSelection();o.on("changeSelection",function(n){var s=qe.map(o.getAllRanges(),function(e){return{start:[e.start.row,e.start.column],end:[e.end.row,e.end.column]}});t.cursorSelectionChanged.emit({editor:i,session:r,fileName:e.title,newRange:s[0],type:"change-selection"})})}},e.prototype.getRangeFromSerializedRange=function(e){return new(0,ace.require("ace/range").Range)(e.start[0],e.start[1],e.end[0],e.end[1])},e.prototype.toLatest=function(){this.editorStateTracker.toLatestVersion({editor:this.editor.getEditor()})},e.ctorParameters=function(){return[]},e}()),It=[kt],Pt=pe["\u0275crt"]({encapsulation:0,styles:It,data:{}}),Ot=(pe["\u0275ccf"]("code-editor",Tt,E,{commLayer:"commLayer",isObserver:"isObserver"},{editorChanged:"editorChanged",cursorPositionChanged:"cursorPositionChanged",cursorSelectionChanged:"cursorSelectionChanged"},[]),[".no-messages[_ngcontent-%COMP%]{text-align:center;vertical-align:middle;font-size:2em;color:#aaa;font-weight:lighter}.message-display[_ngcontent-%COMP%]{overflow-y:auto;height:100%;border-top:1px solid #ddd;padding-right:5px}.typing[_ngcontent-%COMP%]{color:#aaa}ul.messageGroups[_ngcontent-%COMP%]{list-style:none;padding:0}ul.messageGroups[_ngcontent-%COMP%] > li.messageGroup[_ngcontent-%COMP%]{margin-top:10px;margin-bottom:10px}li.messageGroup[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{background-color:#eee}.revert[_ngcontent-%COMP%]{position:absolute;right:5px}.cameAfterTimestamp[_ngcontent-%COMP%]   .text-messages[_ngcontent-%COMP%]{opacity:.5}li.messageGroup[_ngcontent-%COMP%]   .isCurrentTimestamp[_ngcontent-%COMP%]{border:1px solid #0275d8;border-radius:5px}"]),Lt=[""],At=n("S4Bb"),Rt=function(){function e(){}return e.prototype.ngOnInit=function(){var e=this,t=At(this.elem.nativeElement);t.html(this.message.getHTML());var n=-10,r=-10;At("a.line_ref",t).on("mouseenter",function(t){r=e.editorStateTracker.getCurrentTimestamp(),n=e.editorStateTracker.getCurrentVersion();var i=e.getHighlightInfo(t.currentTarget),o=i.file,s=i.range,l=e.addHighlight(o,s,e.message.getEditorVersion(),e.message.getTimestamp());At(t.target).on("mouseleave.removeHighlight",function(i){-10!==n&&e.editorStateTracker.setVersion(n,r,{editor:e.editor.getEditorInstance()}),e.removeHighlight(o,l),At(t.target).off("mouseleave.removeHighlight")})}).on("click",function(t){var i=e.getHighlightInfo(t.currentTarget),o=i.file,s=i.range;e.focusRange(o,s,e.message.getEditorVersion(),e.message.getTimestamp()),n=-10,r=-10})},e.prototype.getHighlightInfo=function(e){var t=At(e),n=t.attr("data-start"),r=t.attr("data-end");return{file:t.attr("data-file"),range:{start:qe.map(n.split(","),function(e){return parseInt(e)}),end:qe.map(r.split(","),function(e){return parseInt(e)})}}},e.prototype.addHighlight=function(e,t,n,r){return this.editorStateTracker.addHighlight(e,t,n,r,{editor:this.editor.getEditorInstance()})},e.prototype.removeHighlight=function(e,t){this.editorStateTracker.removeHighlight(e,t,{editor:this.editor.getEditorInstance()})},e.prototype.focusRange=function(e,t,n,r){var i=this.editorStateTracker.getEditorState(e);return this.editor.selectFile(i),this.editorStateTracker.focus(e,t,n,r,{editor:this.editor.getEditorInstance()})},e}(),jt=[Lt],Mt=pe["\u0275crt"]({encapsulation:0,styles:jt,data:{}}),Dt=(pe["\u0275ccf"]("chat-message",Rt,_,{editorStateTracker:"editorStateTracker",message:"message",editor:"editor"},{},[]),[".full_edit_message[_ngcontent-%COMP%]{font-size:.8em;margin-top:5px;margin-bottom:5px}.edit_message[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%]{opacity:.7}.btn-group[_ngcontent-%COMP%]{margin-right:5px}timestamp[_ngcontent-%COMP%]{opacity:.7}"]),Vt=n("Wff2"),Bt=function(){function e(){this.willExpand=new pe.EventEmitter,this.expanded=new pe.EventEmitter,this.showingDetails=!1,this.authors=[],this.numAuthors=0,this.editorStates=[],this.numEditorStates=0,this.showingChanges=!0,this.diffSummaries=[],this.diffHTMLs=[]}return e.prototype.ngOnInit=function(){var e=this;setTimeout(function(){e.updateVariables()},0);var t=qe.throttle(qe.bind(this.updateVariables,this),1e3,{leading:!1});this.messageGroup.on("item-added",function(){t()})},e.prototype.toggleDetails=function(){this.showingDetails=!this.showingDetails,this.willExpand.emit(this.showingDetails),this.showingDetails?this.updateDiffHTMLs():this.showLatestCode(),this.expanded.emit(this.showingDetails)},e.prototype.updateVariables=function(){this.authors=this.messageGroup.getAuthors(),this.numAuthors=this.authors.length,this.editorStates=this.messageGroup.getEditorStates(),this.numEditorStates=this.editorStates.length,this.showingChanges&&this.showingDetails&&this.updateDiffHTMLs()},e.prototype.openFile=function(e){this.editor.selectFile(e)},e.prototype.toggleShowingChanges=function(){this.showingChanges?this.showingChanges=!1:(this.updateDiffHTMLs(),this.showingChanges=!0)},e.prototype.updateDiffHTMLs=function(){this.diffSummaries=this.messageGroup.getDiffSummary(),this.diffHTMLs=qe.map(this.diffSummaries,function(e){return Vt.Diff2Html.getPrettyHtml(e.diff)})},e.prototype.showCodeBefore=function(){},e.prototype.showCodeAfter=function(){},e.prototype.isShowingCodeBefore=function(){return!1},e.prototype.isShowingCodeAfter=function(){return!1},e.prototype.showLatestCode=function(){},e}(),Ft=[Dt],Nt=pe["\u0275crt"]({encapsulation:0,styles:Ft,data:{}}),zt=(pe["\u0275ccf"]("edit-message-group",Bt,B,{editorStateTracker:"editorStateTracker",messageGroup:"messageGroup",editor:"editor"},{willExpand:"willExpand",expanded:"expanded"},[]),[".full_connection_message[_ngcontent-%COMP%]{font-size:.8em;margin-top:5px;margin-bottom:5px}.connection_message[_ngcontent-%COMP%]   .action[_ngcontent-%COMP%], timestamp[_ngcontent-%COMP%]{opacity:.7}"]),Ht=function(){function e(){this.users=[],this.numUsers=0,this.action=""}return e.prototype.ngOnInit=function(){var e=this;setTimeout(function(){e.updateVariables()},0),this.messageGroup.on("item-added",function(){e.updateVariables()}),this.messageGroup.on("delta-added",function(){e.updateVariables()})},e.prototype.updateVariables=function(){this.users=this.messageGroup.getUsers(),this.numUsers=this.users.length,this.action=this.messageGroup.isConnect()?"connected":"disconnected"},e}(),Ut=[zt],Gt=pe["\u0275crt"]({encapsulation:0,styles:Ut,data:{}}),qt=(pe["\u0275ccf"]("connection-message-group",Ht,G,{messageGroup:"messageGroup"},{},[]),function(){function e(){this.willChangeSize=new pe.EventEmitter,this.changedSize=new pe.EventEmitter}return e.prototype.ngOnInit=function(){var e=this;setTimeout(function(){e.scrollToBottom()},0);var t=!1,n=this.commLayer.getMessageGroups();n.on("group-will-be-added",function(n){t=e.atBottom()}),n.on("item-will-be-added",function(n){t=e.atBottom()}),this.willChangeSize.subscribe(function(){t=e.atBottom()}),n.on("group-added",function(n){setTimeout(function(){t&&e.scrollToBottom()},0)}),n.on("item-added",function(n){setTimeout(function(){t&&e.scrollToBottom()},0)}),this.editorStateTracker.on("timestampChanged",function(t){e.updateCurrentTimestamp()}),this.changedSize.subscribe(function(){setTimeout(function(){t&&e.scrollToBottom()},0)})},e.prototype.scrollToBottom=function(){var e=this.messageDisplay.nativeElement;try{e.scrollTop=e.scrollHeight}catch(e){console.error(e)}},e.prototype.atBottom=function(){var e=this.messageDisplay.nativeElement;return Math.abs(e.scrollTop+e.clientHeight-e.scrollHeight)<100},e.prototype.revert=function(e){return this.editorStateTracker.setVersion(e.getEditorVersion(),e.getLatestTimestamp(),{editor:this.editor.getEditorInstance()})},e.prototype.isChatMessage=function(e){return e instanceof Le},e.prototype.isEditMessage=function(e){return e instanceof Oe},e.prototype.isConnectMessage=function(e){return e instanceof Ae},e.prototype.updateCurrentTimestamp=function(){},e.prototype.toLatest=function(e){return e.stopPropagation(),this.editorStateTracker.toLatestVersion({editor:this.editor.getEditorInstance()})},e.ctorParameters=function(){return[]},e}()),$t=[Ot],Wt=pe["\u0275crt"]({encapsulation:0,styles:$t,data:{}}),Kt=(pe["\u0275ccf"]("chat-messages",qt,ee,{commLayer:"commLayer",editorStateTracker:"editorStateTracker",editor:"editor"},{},[]),[Ze,Ye.a,Xe.a]),Qt=pe["\u0275crt"]({encapsulation:2,styles:Kt,data:{}}),Jt=pe["\u0275ccf"]("app-root",Je,ue,{},{},[]),Zt=n("fc+i"),Yt=n("p5gf"),Xt=n("biyL"),en=pe["\u0275cmf"](de,[Je],function(e){return pe["\u0275mod"]([pe["\u0275mpd"](512,pe.ComponentFactoryResolver,pe["\u0275CodegenComponentFactoryResolver"],[[8,[Jt]],[3,pe.ComponentFactoryResolver],pe.NgModuleRef]),pe["\u0275mpd"](5120,pe.LOCALE_ID,pe["\u0275m"],[[3,pe.LOCALE_ID]]),pe["\u0275mpd"](4608,Ge.h,Ge.g,[pe.LOCALE_ID]),pe["\u0275mpd"](4608,pe.Compiler,pe.Compiler,[]),pe["\u0275mpd"](5120,pe.APP_ID,pe["\u0275f"],[]),pe["\u0275mpd"](5120,pe.IterableDiffers,pe["\u0275k"],[]),pe["\u0275mpd"](5120,pe.KeyValueDiffers,pe["\u0275l"],[]),pe["\u0275mpd"](4608,Zt.b,Zt.s,[Ge.b]),pe["\u0275mpd"](6144,pe.Sanitizer,null,[Zt.b]),pe["\u0275mpd"](4608,Zt.e,Zt.f,[]),pe["\u0275mpd"](5120,Zt.c,function(e,t,n,r){return[new Zt.k(e),new Zt.o(t),new Zt.n(n,r)]},[Ge.b,Ge.b,Ge.b,Zt.e]),pe["\u0275mpd"](4608,Zt.d,Zt.d,[Zt.c,pe.NgZone]),pe["\u0275mpd"](135680,Zt.m,Zt.m,[Ge.b]),pe["\u0275mpd"](4608,Zt.l,Zt.l,[Zt.d,Zt.m]),pe["\u0275mpd"](6144,pe.RendererFactory2,null,[Zt.l]),pe["\u0275mpd"](6144,Zt.p,null,[Zt.m]),pe["\u0275mpd"](4608,pe.Testability,pe.Testability,[pe.NgZone]),pe["\u0275mpd"](4608,Zt.g,Zt.g,[Ge.b]),pe["\u0275mpd"](4608,Zt.i,Zt.i,[Ge.b]),pe["\u0275mpd"](4608,nt.i,nt.i,[]),pe["\u0275mpd"](512,Ge.a,Ge.a,[]),pe["\u0275mpd"](1024,pe.ErrorHandler,Zt.q,[]),pe["\u0275mpd"](1024,pe.APP_INITIALIZER,function(e,t){return[Zt.r(e,t)]},[[2,Zt.h],[2,pe.NgProbeToken]]),pe["\u0275mpd"](512,pe.ApplicationInitStatus,pe.ApplicationInitStatus,[[2,pe.APP_INITIALIZER]]),pe["\u0275mpd"](131584,pe["\u0275e"],pe["\u0275e"],[pe.NgZone,pe["\u0275Console"],pe.Injector,pe.ErrorHandler,pe.ComponentFactoryResolver,pe.ApplicationInitStatus]),pe["\u0275mpd"](2048,pe.ApplicationRef,null,[pe["\u0275e"]]),pe["\u0275mpd"](512,pe.ApplicationModule,pe.ApplicationModule,[pe.ApplicationRef]),pe["\u0275mpd"](512,Zt.a,Zt.a,[[3,Zt.a]]),pe["\u0275mpd"](512,nt.h,nt.h,[]),pe["\u0275mpd"](512,nt.c,nt.c,[]),pe["\u0275mpd"](512,Yt.MomentModule,Yt.MomentModule,[]),pe["\u0275mpd"](512,Xt.a,Xt.a,[]),pe["\u0275mpd"](512,de,de,[])])});he.production&&Object(pe.enableProdMode)(),Object(Zt.j)().bootstrapModuleFactory(en)},fnsC:function(e,t,n){var r,i;(function(){function n(e){function t(t,n,r,i,o,s){for(;o>=0&&o<s;o+=e){var l=i?i[o]:o;r=n(r,t[l],l,t)}return r}return function(n,r,i,o){r=C(r,o,4);var s=!O(n)&&k.keys(n),l=(s||n).length,a=e>0?0:l-1;return arguments.length<3&&(i=n[s?s[a]:a],a+=e),t(n,r,i,s,a,l)}}function o(e){return function(t,n,r){n=E(n,r);for(var i=P(t),o=e>0?0:i-1;o>=0&&o<i;o+=e)if(n(t[o],o,t))return o;return-1}}function s(e,t,n){return function(r,i,o){var s=0,l=P(r);if("number"==typeof o)e>0?s=o>=0?o:Math.max(o+l,s):l=o>=0?Math.min(o+1,l):o+l+1;else if(n&&o&&l)return o=n(r,i),r[o]===i?o:-1;if(i!==i)return o=t(f.call(r,s,l),k.isNaN),o>=0?o+s:-1;for(o=e>0?s:l-1;o>=0&&o<l;o+=e)if(r[o]===i)return o;return-1}}function l(e,t){var n=M.length,r=e.constructor,i=k.isFunction(r)&&r.prototype||p,o="constructor";for(k.has(e,o)&&!k.contains(t,o)&&t.push(o);n--;)(o=M[n])in e&&e[o]!==i[o]&&!k.contains(t,o)&&t.push(o)}var a=this,u=a._,c=Array.prototype,p=Object.prototype,h=Function.prototype,d=c.push,f=c.slice,g=p.toString,m=p.hasOwnProperty,v=Array.isArray,y=Object.keys,b=h.bind,w=Object.create,S=function(){},k=function(e){return e instanceof k?e:this instanceof k?void(this._wrapped=e):new k(e)};void 0!==e&&e.exports&&(t=e.exports=k),t._=k,k.VERSION="1.8.3";var C=function(e,t,n){if(void 0===t)return e;switch(null==n?3:n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,r){return e.call(t,n,r)};case 3:return function(n,r,i){return e.call(t,n,r,i)};case 4:return function(n,r,i,o){return e.call(t,n,r,i,o)}}return function(){return e.apply(t,arguments)}},E=function(e,t,n){return null==e?k.identity:k.isFunction(e)?C(e,t,n):k.isObject(e)?k.matcher(e):k.property(e)};k.iteratee=function(e,t){return E(e,t,1/0)};var x=function(e,t){return function(n){var r=arguments.length;if(r<2||null==n)return n;for(var i=1;i<r;i++)for(var o=arguments[i],s=e(o),l=s.length,a=0;a<l;a++){var u=s[a];t&&void 0!==n[u]||(n[u]=o[u])}return n}},_=function(e){if(!k.isObject(e))return{};if(w)return w(e);S.prototype=e;var t=new S;return S.prototype=null,t},T=function(e){return function(t){return null==t?void 0:t[e]}},I=Math.pow(2,53)-1,P=T("length"),O=function(e){var t=P(e);return"number"==typeof t&&t>=0&&t<=I};k.each=k.forEach=function(e,t,n){t=C(t,n);var r,i;if(O(e))for(r=0,i=e.length;r<i;r++)t(e[r],r,e);else{var o=k.keys(e);for(r=0,i=o.length;r<i;r++)t(e[o[r]],o[r],e)}return e},k.map=k.collect=function(e,t,n){t=E(t,n);for(var r=!O(e)&&k.keys(e),i=(r||e).length,o=Array(i),s=0;s<i;s++){var l=r?r[s]:s;o[s]=t(e[l],l,e)}return o},k.reduce=k.foldl=k.inject=n(1),k.reduceRight=k.foldr=n(-1),k.find=k.detect=function(e,t,n){var r;if(void 0!==(r=O(e)?k.findIndex(e,t,n):k.findKey(e,t,n))&&-1!==r)return e[r]},k.filter=k.select=function(e,t,n){var r=[];return t=E(t,n),k.each(e,function(e,n,i){t(e,n,i)&&r.push(e)}),r},k.reject=function(e,t,n){return k.filter(e,k.negate(E(t)),n)},k.every=k.all=function(e,t,n){t=E(t,n);for(var r=!O(e)&&k.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(!t(e[s],s,e))return!1}return!0},k.some=k.any=function(e,t,n){t=E(t,n);for(var r=!O(e)&&k.keys(e),i=(r||e).length,o=0;o<i;o++){var s=r?r[o]:o;if(t(e[s],s,e))return!0}return!1},k.contains=k.includes=k.include=function(e,t,n,r){return O(e)||(e=k.values(e)),("number"!=typeof n||r)&&(n=0),k.indexOf(e,t,n)>=0},k.invoke=function(e,t){var n=f.call(arguments,2),r=k.isFunction(t);return k.map(e,function(e){var i=r?t:e[t];return null==i?i:i.apply(e,n)})},k.pluck=function(e,t){return k.map(e,k.property(t))},k.where=function(e,t){return k.filter(e,k.matcher(t))},k.findWhere=function(e,t){return k.find(e,k.matcher(t))},k.max=function(e,t,n){var r,i,o=-1/0,s=-1/0;if(null==t&&null!=e){e=O(e)?e:k.values(e);for(var l=0,a=e.length;l<a;l++)(r=e[l])>o&&(o=r)}else t=E(t,n),k.each(e,function(e,n,r){((i=t(e,n,r))>s||i===-1/0&&o===-1/0)&&(o=e,s=i)});return o},k.min=function(e,t,n){var r,i,o=1/0,s=1/0;if(null==t&&null!=e){e=O(e)?e:k.values(e);for(var l=0,a=e.length;l<a;l++)(r=e[l])<o&&(o=r)}else t=E(t,n),k.each(e,function(e,n,r){((i=t(e,n,r))<s||i===1/0&&o===1/0)&&(o=e,s=i)});return o},k.shuffle=function(e){for(var t,n=O(e)?e:k.values(e),r=n.length,i=Array(r),o=0;o<r;o++)t=k.random(0,o),t!==o&&(i[o]=i[t]),i[t]=n[o];return i},k.sample=function(e,t,n){return null==t||n?(O(e)||(e=k.values(e)),e[k.random(e.length-1)]):k.shuffle(e).slice(0,Math.max(0,t))},k.sortBy=function(e,t,n){return t=E(t,n),k.pluck(k.map(e,function(e,n,r){return{value:e,index:n,criteria:t(e,n,r)}}).sort(function(e,t){var n=e.criteria,r=t.criteria;if(n!==r){if(n>r||void 0===n)return 1;if(n<r||void 0===r)return-1}return e.index-t.index}),"value")};var L=function(e){return function(t,n,r){var i={};return n=E(n,r),k.each(t,function(r,o){var s=n(r,o,t);e(i,r,s)}),i}};k.groupBy=L(function(e,t,n){k.has(e,n)?e[n].push(t):e[n]=[t]}),k.indexBy=L(function(e,t,n){e[n]=t}),k.countBy=L(function(e,t,n){k.has(e,n)?e[n]++:e[n]=1}),k.toArray=function(e){return e?k.isArray(e)?f.call(e):O(e)?k.map(e,k.identity):k.values(e):[]},k.size=function(e){return null==e?0:O(e)?e.length:k.keys(e).length},k.partition=function(e,t,n){t=E(t,n);var r=[],i=[];return k.each(e,function(e,n,o){(t(e,n,o)?r:i).push(e)}),[r,i]},k.first=k.head=k.take=function(e,t,n){if(null!=e)return null==t||n?e[0]:k.initial(e,e.length-t)},k.initial=function(e,t,n){return f.call(e,0,Math.max(0,e.length-(null==t||n?1:t)))},k.last=function(e,t,n){if(null!=e)return null==t||n?e[e.length-1]:k.rest(e,Math.max(0,e.length-t))},k.rest=k.tail=k.drop=function(e,t,n){return f.call(e,null==t||n?1:t)},k.compact=function(e){return k.filter(e,k.identity)};var A=function(e,t,n,r){for(var i=[],o=0,s=r||0,l=P(e);s<l;s++){var a=e[s];if(O(a)&&(k.isArray(a)||k.isArguments(a))){t||(a=A(a,t,n));var u=0,c=a.length;for(i.length+=c;u<c;)i[o++]=a[u++]}else n||(i[o++]=a)}return i};k.flatten=function(e,t){return A(e,t,!1)},k.without=function(e){return k.difference(e,f.call(arguments,1))},k.uniq=k.unique=function(e,t,n,r){k.isBoolean(t)||(r=n,n=t,t=!1),null!=n&&(n=E(n,r));for(var i=[],o=[],s=0,l=P(e);s<l;s++){var a=e[s],u=n?n(a,s,e):a;t?(s&&o===u||i.push(a),o=u):n?k.contains(o,u)||(o.push(u),i.push(a)):k.contains(i,a)||i.push(a)}return i},k.union=function(){return k.uniq(A(arguments,!0,!0))},k.intersection=function(e){for(var t=[],n=arguments.length,r=0,i=P(e);r<i;r++){var o=e[r];if(!k.contains(t,o)){for(var s=1;s<n&&k.contains(arguments[s],o);s++);s===n&&t.push(o)}}return t},k.difference=function(e){var t=A(arguments,!0,!0,1);return k.filter(e,function(e){return!k.contains(t,e)})},k.zip=function(){return k.unzip(arguments)},k.unzip=function(e){for(var t=e&&k.max(e,P).length||0,n=Array(t),r=0;r<t;r++)n[r]=k.pluck(e,r);return n},k.object=function(e,t){for(var n={},r=0,i=P(e);r<i;r++)t?n[e[r]]=t[r]:n[e[r][0]]=e[r][1];return n},k.findIndex=o(1),k.findLastIndex=o(-1),k.sortedIndex=function(e,t,n,r){n=E(n,r,1);for(var i=n(t),o=0,s=P(e);o<s;){var l=Math.floor((o+s)/2);n(e[l])<i?o=l+1:s=l}return o},k.indexOf=s(1,k.findIndex,k.sortedIndex),k.lastIndexOf=s(-1,k.findLastIndex),k.range=function(e,t,n){null==t&&(t=e||0,e=0),n=n||1;for(var r=Math.max(Math.ceil((t-e)/n),0),i=Array(r),o=0;o<r;o++,e+=n)i[o]=e;return i};var R=function(e,t,n,r,i){if(!(r instanceof t))return e.apply(n,i);var o=_(e.prototype),s=e.apply(o,i);return k.isObject(s)?s:o};k.bind=function(e,t){if(b&&e.bind===b)return b.apply(e,f.call(arguments,1));if(!k.isFunction(e))throw new TypeError("Bind must be called on a function");var n=f.call(arguments,2),r=function(){return R(e,r,t,this,n.concat(f.call(arguments)))};return r},k.partial=function(e){var t=f.call(arguments,1),n=function(){for(var r=0,i=t.length,o=Array(i),s=0;s<i;s++)o[s]=t[s]===k?arguments[r++]:t[s];for(;r<arguments.length;)o.push(arguments[r++]);return R(e,n,this,this,o)};return n},k.bindAll=function(e){var t,n,r=arguments.length;if(r<=1)throw new Error("bindAll must be passed function names");for(t=1;t<r;t++)n=arguments[t],e[n]=k.bind(e[n],e);return e},k.memoize=function(e,t){var n=function(r){var i=n.cache,o=""+(t?t.apply(this,arguments):r);return k.has(i,o)||(i[o]=e.apply(this,arguments)),i[o]};return n.cache={},n},k.delay=function(e,t){var n=f.call(arguments,2);return setTimeout(function(){return e.apply(null,n)},t)},k.defer=k.partial(k.delay,k,1),k.throttle=function(e,t,n){var r,i,o,s=null,l=0;n||(n={});var a=function(){l=!1===n.leading?0:k.now(),s=null,o=e.apply(r,i),s||(r=i=null)};return function(){var u=k.now();l||!1!==n.leading||(l=u);var c=t-(u-l);return r=this,i=arguments,c<=0||c>t?(s&&(clearTimeout(s),s=null),l=u,o=e.apply(r,i),s||(r=i=null)):s||!1===n.trailing||(s=setTimeout(a,c)),o}},k.debounce=function(e,t,n){var r,i,o,s,l,a=function(){var u=k.now()-s;u<t&&u>=0?r=setTimeout(a,t-u):(r=null,n||(l=e.apply(o,i),r||(o=i=null)))};return function(){o=this,i=arguments,s=k.now();var u=n&&!r;return r||(r=setTimeout(a,t)),u&&(l=e.apply(o,i),o=i=null),l}},k.wrap=function(e,t){return k.partial(t,e)},k.negate=function(e){return function(){return!e.apply(this,arguments)}},k.compose=function(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}},k.after=function(e,t){return function(){if(--e<1)return t.apply(this,arguments)}},k.before=function(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}},k.once=k.partial(k.before,2);var j=!{toString:null}.propertyIsEnumerable("toString"),M=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"];k.keys=function(e){if(!k.isObject(e))return[];if(y)return y(e);var t=[];for(var n in e)k.has(e,n)&&t.push(n);return j&&l(e,t),t},k.allKeys=function(e){if(!k.isObject(e))return[];var t=[];for(var n in e)t.push(n);return j&&l(e,t),t},k.values=function(e){for(var t=k.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=e[t[i]];return r},k.mapObject=function(e,t,n){t=E(t,n);for(var r,i=k.keys(e),o=i.length,s={},l=0;l<o;l++)r=i[l],s[r]=t(e[r],r,e);return s},k.pairs=function(e){for(var t=k.keys(e),n=t.length,r=Array(n),i=0;i<n;i++)r[i]=[t[i],e[t[i]]];return r},k.invert=function(e){for(var t={},n=k.keys(e),r=0,i=n.length;r<i;r++)t[e[n[r]]]=n[r];return t},k.functions=k.methods=function(e){var t=[];for(var n in e)k.isFunction(e[n])&&t.push(n);return t.sort()},k.extend=x(k.allKeys),k.extendOwn=k.assign=x(k.keys),k.findKey=function(e,t,n){t=E(t,n);for(var r,i=k.keys(e),o=0,s=i.length;o<s;o++)if(r=i[o],t(e[r],r,e))return r},k.pick=function(e,t,n){var r,i,o={},s=e;if(null==s)return o;k.isFunction(t)?(i=k.allKeys(s),r=C(t,n)):(i=A(arguments,!1,!1,1),r=function(e,t,n){return t in n},s=Object(s));for(var l=0,a=i.length;l<a;l++){var u=i[l],c=s[u];r(c,u,s)&&(o[u]=c)}return o},k.omit=function(e,t,n){if(k.isFunction(t))t=k.negate(t);else{var r=k.map(A(arguments,!1,!1,1),String);t=function(e,t){return!k.contains(r,t)}}return k.pick(e,t,n)},k.defaults=x(k.allKeys,!0),k.create=function(e,t){var n=_(e);return t&&k.extendOwn(n,t),n},k.clone=function(e){return k.isObject(e)?k.isArray(e)?e.slice():k.extend({},e):e},k.tap=function(e,t){return t(e),e},k.isMatch=function(e,t){var n=k.keys(t),r=n.length;if(null==e)return!r;for(var i=Object(e),o=0;o<r;o++){var s=n[o];if(t[s]!==i[s]||!(s in i))return!1}return!0};var D=function(e,t,n,r){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return e===t;e instanceof k&&(e=e._wrapped),t instanceof k&&(t=t._wrapped);var i=g.call(e);if(i!==g.call(t))return!1;switch(i){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t}var o="[object Array]"===i;if(!o){if("object"!=typeof e||"object"!=typeof t)return!1;var s=e.constructor,l=t.constructor;if(s!==l&&!(k.isFunction(s)&&s instanceof s&&k.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],r=r||[];for(var a=n.length;a--;)if(n[a]===e)return r[a]===t;if(n.push(e),r.push(t),o){if((a=e.length)!==t.length)return!1;for(;a--;)if(!D(e[a],t[a],n,r))return!1}else{var u,c=k.keys(e);if(a=c.length,k.keys(t).length!==a)return!1;for(;a--;)if(u=c[a],!k.has(t,u)||!D(e[u],t[u],n,r))return!1}return n.pop(),r.pop(),!0};k.isEqual=function(e,t){return D(e,t)},k.isEmpty=function(e){return null==e||(O(e)&&(k.isArray(e)||k.isString(e)||k.isArguments(e))?0===e.length:0===k.keys(e).length)},k.isElement=function(e){return!(!e||1!==e.nodeType)},k.isArray=v||function(e){return"[object Array]"===g.call(e)},k.isObject=function(e){var t=typeof e;return"function"===t||"object"===t&&!!e},k.each(["Arguments","Function","String","Number","Date","RegExp","Error"],function(e){k["is"+e]=function(t){return g.call(t)==="[object "+e+"]"}}),k.isArguments(arguments)||(k.isArguments=function(e){return k.has(e,"callee")}),"function"!=typeof/./&&"object"!=typeof Int8Array&&(k.isFunction=function(e){return"function"==typeof e||!1}),k.isFinite=function(e){return isFinite(e)&&!isNaN(parseFloat(e))},k.isNaN=function(e){return k.isNumber(e)&&e!==+e},k.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===g.call(e)},k.isNull=function(e){return null===e},k.isUndefined=function(e){return void 0===e},k.has=function(e,t){return null!=e&&m.call(e,t)},k.noConflict=function(){return a._=u,this},k.identity=function(e){return e},k.constant=function(e){return function(){return e}},k.noop=function(){},k.property=T,k.propertyOf=function(e){return null==e?function(){}:function(t){return e[t]}},k.matcher=k.matches=function(e){return e=k.extendOwn({},e),function(t){return k.isMatch(t,e)}},k.times=function(e,t,n){var r=Array(Math.max(0,e));t=C(t,n,1);for(var i=0;i<e;i++)r[i]=t(i);return r},k.random=function(e,t){return null==t&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))},k.now=Date.now||function(){return(new Date).getTime()};var V={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},B=k.invert(V),F=function(e){var t=function(t){return e[t]},n="(?:"+k.keys(e).join("|")+")",r=RegExp(n),i=RegExp(n,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(i,t):e}};k.escape=F(V),k.unescape=F(B),k.result=function(e,t,n){var r=null==e?void 0:e[t];return void 0===r&&(r=n),k.isFunction(r)?r.call(e):r};var N=0;k.uniqueId=function(e){var t=++N+"";return e?e+t:t},k.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var z=/(.)^/,H={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},U=/\\|'|\r|\n|\u2028|\u2029/g,G=function(e){return"\\"+H[e]};k.template=function(e,t,n){!t&&n&&(t=n),t=k.defaults({},t,k.templateSettings);var r=RegExp([(t.escape||z).source,(t.interpolate||z).source,(t.evaluate||z).source].join("|")+"|$","g"),i=0,o="__p+='";e.replace(r,function(t,n,r,s,l){return o+=e.slice(i,l).replace(U,G),i=l+t.length,n?o+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":r?o+="'+\n((__t=("+r+"))==null?'':__t)+\n'":s&&(o+="';\n"+s+"\n__p+='"),t}),o+="';\n",t.variable||(o="with(obj||{}){\n"+o+"}\n"),o="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+o+"return __p;\n";try{var s=new Function(t.variable||"obj","_",o)}catch(e){throw e.source=o,e}var l=function(e){return s.call(this,e,k)};return l.source="function("+(t.variable||"obj")+"){\n"+o+"}",l},k.chain=function(e){var t=k(e);return t._chain=!0,t};var q=function(e,t){return e._chain?k(t).chain():t};k.mixin=function(e){k.each(k.functions(e),function(t){var n=k[t]=e[t];k.prototype[t]=function(){var e=[this._wrapped];return d.apply(e,arguments),q(this,n.apply(k,e))}})},k.mixin(k),k.each(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=c[e];k.prototype[e]=function(){var n=this._wrapped;return t.apply(n,arguments),"shift"!==e&&"splice"!==e||0!==n.length||delete n[0],q(this,n)}}),k.each(["concat","join","slice"],function(e){var t=c[e];k.prototype[e]=function(){return q(this,t.apply(this._wrapped,arguments))}}),k.prototype.value=function(){return this._wrapped},k.prototype.valueOf=k.prototype.toJSON=k.prototype.value,k.prototype.toString=function(){return""+this._wrapped},r=[],void 0!==(i=function(){return k}.apply(t,r))&&(e.exports=i)}).call(this)},frgR:function(e,t,n){var r=e.exports={name:"text0",uri:"http://sharejs.org/types/textv0",create:function(e){if(null!=e&&"string"!=typeof e)throw new Error("Initial data must be a string");return e||""}},i=function(e,t,n){return e.slice(0,t)+n+e.slice(t)},o=function(e){if("number"!=typeof e.p)throw new Error("component missing position field");if("string"==typeof e.i==("string"==typeof e.d))throw new Error("component needs an i or d field");if(e.p<0)throw new Error("position cannot be negative")},s=function(e){for(var t=0;t<e.length;t++)o(e[t])};r.apply=function(e,t){var n;s(t);for(var r=0;r<t.length;r++){var o=t[r];if(null!=o.i)e=i(e,o.p,o.i);else{if(n=e.slice(o.p,o.p+o.d.length),o.d!==n)throw new Error("Delete component '"+o.d+"' does not match deleted text '"+n+"'");e=e.slice(0,o.p)+e.slice(o.p+o.d.length)}}return e};var l=r._append=function(e,t){if(""!==t.i&&""!==t.d)if(0===e.length)e.push(t);else{var n=e[e.length-1];null!=n.i&&null!=t.i&&n.p<=t.p&&t.p<=n.p+n.i.length?e[e.length-1]={i:i(n.i,t.p-n.p,t.i),p:n.p}:null!=n.d&&null!=t.d&&t.p<=n.p&&n.p<=t.p+t.d.length?e[e.length-1]={d:i(t.d,n.p-t.p,n.d),p:t.p}:e.push(t)}};r.compose=function(e,t){s(e),s(t);for(var n=e.slice(),r=0;r<t.length;r++)l(n,t[r]);return n},r.normalize=function(e){var t=[];null==e.i&&null==e.p||(e=[e]);for(var n=0;n<e.length;n++){var r=e[n];null==r.p&&(r.p=0),l(t,r)}return t};var a=function(e,t,n){return null!=t.i?t.p<e||t.p===e&&n?e+t.i.length:e:e<=t.p?e:e<=t.p+t.d.length?t.p:e-t.d.length};r.transformCursor=function(e,t,n){for(var r="right"===n,i=0;i<t.length;i++)e=a(e,t[i],r);return e};var u=r._tc=function(e,t,n,r){if(o(t),o(n),null!=t.i)l(e,{i:t.i,p:a(t.p,n,"right"===r)});else if(null!=n.i){var i=t.d;t.p<n.p&&(l(e,{d:i.slice(0,n.p-t.p),p:t.p}),i=i.slice(n.p-t.p)),""!==i&&l(e,{d:i,p:t.p+n.i.length})}else if(t.p>=n.p+n.d.length)l(e,{d:t.d,p:t.p-n.d.length});else if(t.p+t.d.length<=n.p)l(e,t);else{var s={d:"",p:t.p};t.p<n.p&&(s.d=t.d.slice(0,n.p-t.p)),t.p+t.d.length>n.p+n.d.length&&(s.d+=t.d.slice(n.p+n.d.length-t.p));var u=Math.max(t.p,n.p),c=Math.min(t.p+t.d.length,n.p+n.d.length),p=t.d.slice(u-t.p,c-t.p),h=n.d.slice(u-n.p,c-n.p);if(p!==h)throw new Error("Delete ops delete different text in the same region of the document");""!==s.d&&(s.p=a(s.p,n),l(e,s))}return e},c=function(e){return null!=e.i?{d:e.i,p:e.p}:{i:e.d,p:e.p}};r.invert=function(e){e=e.slice().reverse();for(var t=0;t<e.length;t++)e[t]=c(e[t]);return e},n("ATzb")(r,u,s,l)},gFIY:function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="gFIY"},gimP:function(e,t,n){function r(e,t){r.super.call(this,t),this.code=e}n("pPHi")(r),e.exports=r},"gvk/":function(e,t,n){e.exports=n("ZkSD")},pPHi:function(e,t,n){"use strict";function r(e){e&&o(this,"message",{configurable:!0,value:e,writable:!0});var t=this.constructor.name;t&&t!==this.name&&o(this,"name",{configurable:!0,value:t,writable:!0}),s(this,this.constructor)}function i(e,t){if(null==t||t===Error)t=r;else if("function"!=typeof t)throw new TypeError("super_ should be a function");var n;if("string"==typeof e)n=e,e=function(){t.apply(this,arguments)},l&&(l(e,n),n=null);else if("function"!=typeof e)throw new TypeError("constructor should be either a string or a function");e.super_=e.super=t;var i={constructor:{configurable:!0,value:e,writable:!0}};return null!=n&&(i.name={configurable:!0,value:n,writable:!0}),e.prototype=Object.create(t.prototype,i),e}var o=Object.defineProperty,s=Error.captureStackTrace;s||(s=function(e){var t=new Error;o(e,"stack",{configurable:!0,get:function(){var e=t.stack;return o(this,"stack",{value:e}),e},set:function(t){o(e,"stack",{configurable:!0,value:t,writable:!0})}})}),r.prototype=Object.create(Error.prototype,{constructor:{configurable:!0,value:r,writable:!0}});var l=function(){function e(e,t){return o(e,"name",{configurable:!0,value:t})}try{var t=function(){};if(e(t,"foo"),"foo"===t.name)return e}catch(e){}}();t=e.exports=i,t.BaseError=r},pXmw:function(e,t,n){e.exports=n("xanM")},"s/MU":function(e,t,n){var r,i,o;(function(){var n,s,l,a,u,c,p,h,d,f,g,m,v,y,b;l=Math.floor,f=Math.min,s=function(e,t){return e<t?-1:e>t?1:0},d=function(e,t,n,r,i){var o;if(null==n&&(n=0),null==i&&(i=s),n<0)throw new Error("lo must be non-negative");for(null==r&&(r=e.length);n<r;)o=l((n+r)/2),i(t,e[o])<0?r=o:n=o+1;return[].splice.apply(e,[n,n-n].concat(t)),t},c=function(e,t,n){return null==n&&(n=s),e.push(t),y(e,0,e.length-1,n)},u=function(e,t){var n,r;return null==t&&(t=s),n=e.pop(),e.length?(r=e[0],e[0]=n,b(e,0,t)):r=n,r},h=function(e,t,n){var r;return null==n&&(n=s),r=e[0],e[0]=t,b(e,0,n),r},p=function(e,t,n){var r;return null==n&&(n=s),e.length&&n(e[0],t)<0&&(r=[e[0],t],t=r[0],e[0]=r[1],b(e,0,n)),t},a=function(e,t){var n,r,i,o,a,u;for(null==t&&(t=s),o=function(){u=[];for(var t=0,n=l(e.length/2);0<=n?t<n:t>n;0<=n?t++:t--)u.push(t);return u}.apply(this).reverse(),a=[],r=0,i=o.length;r<i;r++)n=o[r],a.push(b(e,n,t));return a},v=function(e,t,n){var r;if(null==n&&(n=s),-1!==(r=e.indexOf(t)))return y(e,0,r,n),b(e,r,n)},g=function(e,t,n){var r,i,o,l,u;if(null==n&&(n=s),i=e.slice(0,t),!i.length)return i;for(a(i,n),u=e.slice(t),o=0,l=u.length;o<l;o++)r=u[o],p(i,r,n);return i.sort(n).reverse()},m=function(e,t,n){var r,i,o,l,c,p,h,g,m;if(null==n&&(n=s),10*t<=e.length){if(o=e.slice(0,t).sort(n),!o.length)return o;for(i=o[o.length-1],h=e.slice(t),l=0,p=h.length;l<p;l++)r=h[l],n(r,i)<0&&(d(o,r,0,null,n),o.pop(),i=o[o.length-1]);return o}for(a(e,n),m=[],c=0,g=f(t,e.length);0<=g?c<g:c>g;0<=g?++c:--c)m.push(u(e,n));return m},y=function(e,t,n,r){var i,o,l;for(null==r&&(r=s),i=e[n];n>t&&(l=n-1>>1,o=e[l],r(i,o)<0);)e[n]=o,n=l;return e[n]=i},b=function(e,t,n){var r,i,o,l,a;for(null==n&&(n=s),i=e.length,a=t,o=e[t],r=2*t+1;r<i;)l=r+1,l<i&&!(n(e[r],e[l])<0)&&(r=l),e[t]=e[r],t=r,r=2*t+1;return e[t]=o,y(e,a,t,n)},n=function(){function e(e){this.cmp=null!=e?e:s,this.nodes=[]}return e.push=c,e.pop=u,e.replace=h,e.pushpop=p,e.heapify=a,e.updateItem=v,e.nlargest=g,e.nsmallest=m,e.prototype.push=function(e){return c(this.nodes,e,this.cmp)},e.prototype.pop=function(){return u(this.nodes,this.cmp)},e.prototype.peek=function(){return this.nodes[0]},e.prototype.contains=function(e){return-1!==this.nodes.indexOf(e)},e.prototype.replace=function(e){return h(this.nodes,e,this.cmp)},e.prototype.pushpop=function(e){return p(this.nodes,e,this.cmp)},e.prototype.heapify=function(){return a(this.nodes,this.cmp)},e.prototype.updateItem=function(e){return v(this.nodes,e,this.cmp)},e.prototype.clear=function(){return this.nodes=[]},e.prototype.empty=function(){return 0===this.nodes.length},e.prototype.size=function(){return this.nodes.length},e.prototype.clone=function(){var t;return t=new e,t.nodes=this.nodes.slice(0),t},e.prototype.toArray=function(){return this.nodes.slice(0)},e.prototype.insert=e.prototype.push,e.prototype.top=e.prototype.peek,e.prototype.front=e.prototype.peek,e.prototype.has=e.prototype.contains,e.prototype.copy=e.prototype.clone,e}(),function(n,s){i=[],r=s,void 0!==(o="function"==typeof r?r.apply(t,i):r)&&(e.exports=o)}(0,function(){return n})}).call(this)},xanM:function(e,t){!function(){var t=function(e,t,n,r){var i={};e=e||[],i.gramSizeLower=n||2,i.gramSizeUpper=r||3,i.useLevenshtein="boolean"!=typeof t||t,i.exactSet={},i.matchDict={},i.items={};var o=function(e,t){for(var n,r,i=[],o=0;o<=t.length;o++)for(var s=0;s<=e.length;s++)r=o&&s?e.charAt(s-1)===t.charAt(o-1)?n:Math.min(i[s],i[s-1],n)+1:o+s,n=i[s],i[s]=r;return i.pop()},s=function(e,t){if(null===e&&null===t)throw"Trying to compare two null values";if(null===e||null===t)return 0;e=String(e),t=String(t);var n=o(e,t);return e.length>t.length?1-n/e.length:1-n/t.length},l=/[^a-zA-Z0-9\u00C0-\u00FF, ]+/,a=function(e,t){t=t||2;var n="-"+e.toLowerCase().replace(l,"")+"-",r=t-n.length,i=[];if(r>0)for(var o=0;o<r;++o)e+="-";for(var o=0;o<n.length-t+1;++o)i.push(n.slice(o,o+t));return i},u=function(e,t){t=t||2;var n={},r=a(e,t),i=0;for(i;i<r.length;++i)r[i]in n?n[r[i]]+=1:n[r[i]]=1;return n};i.get=function(e,t,n){void 0===n&&(n=.33);var r=this._get(e,n);return r||void 0===t?r:t},i._get=function(e,t){var n=this._normalizeStr(e),r=this.exactSet[n];if(r)return[[1,r]];for(var i=[],o=this.gramSizeUpper;o>=this.gramSizeLower;--o)if((i=this.__get(e,o,t))&&i.length>0)return i;return null},i.__get=function(e,t,n){var r,i,o,l,a,c=this._normalizeStr(e),p={},h=u(c,t),d=this.items[t],f=0;for(r in h)if(i=h[r],f+=Math.pow(i,2),r in this.matchDict)for(o=0;o<this.matchDict[r].length;++o)l=this.matchDict[r][o][0],a=this.matchDict[r][o][1],l in p?p[l]+=i*a:p[l]=i*a;if(function(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}(p))return null;var g,m=Math.sqrt(f),v=[];for(var y in p)g=p[y],v.push([g/(m*d[y][0]),d[y][1]]);var b=function(e,t){return e[0]<t[0]?1:e[0]>t[0]?-1:0};if(v.sort(b),this.useLevenshtein){for(var w=[],S=Math.min(50,v.length),o=0;o<S;++o)w.push([s(v[o][1],c),v[o][1]]);v=w,v.sort(b)}var w=[];return v.forEach(function(e){e[0]>=n&&w.push([e[0],this.exactSet[e[1]]])}.bind(this)),w},i.add=function(e){if(this._normalizeStr(e)in this.exactSet)return!1;var t=this.gramSizeLower;for(t;t<this.gramSizeUpper+1;++t)this._add(e,t)},i._add=function(e,t){var n=this._normalizeStr(e),r=this.items[t]||[],i=r.length;r.push(0);var o,s,l=u(n,t),a=0;for(o in l)s=l[o],a+=Math.pow(s,2),o in this.matchDict?this.matchDict[o].push([i,s]):this.matchDict[o]=[[i,s]];var c=Math.sqrt(a);r[i]=[c,n],this.items[t]=r,this.exactSet[n]=e},i._normalizeStr=function(e){if("[object String]"!==Object.prototype.toString.call(e))throw"Must use a string as argument to FuzzySet functions";return e.toLowerCase()},i.length=function(){var e,t=0;for(e in this.exactSet)this.exactSet.hasOwnProperty(e)&&(t+=1);return t},i.isEmpty=function(){for(var e in this.exactSet)if(this.exactSet.hasOwnProperty(e))return!1;return!0},i.values=function(){var e,t=[];for(e in this.exactSet)this.exactSet.hasOwnProperty(e)&&t.push(this.exactSet[e]);return t};var c=i.gramSizeLower;for(c;c<i.gramSizeUpper+1;++c)i.items[c]=[];for(c=0;c<e.length;++c)i.add(e[c]);return i},n=this;void 0!==e&&e.exports?(e.exports=t,n.FuzzySet=t):n.FuzzySet=t}()}},[0]);